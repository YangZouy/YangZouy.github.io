<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0,viewport-fit=cover"><title>reactå­¦ä¹  | é‚¹é˜³ ã® åšå®¢</title><meta name="author" content="é‚¹é˜³,3075879316@qq.com"><meta name="copyright" content="é‚¹é˜³"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="ffffff"><meta name="description" content="æ˜¯å¯¹reactå­¦ä¹ è·¯ç¨‹çš„ç¬”è®°æ€»ç»“">
<meta property="og:type" content="article">
<meta property="og:title" content="reactå­¦ä¹ ">
<meta property="og:url" content="http://zyydgrbk.top/2023/08/16/react-xue-xi/index.html">
<meta property="og:site_name" content="é‚¹é˜³ ã® åšå®¢">
<meta property="og:description" content="æ˜¯å¯¹reactå­¦ä¹ è·¯ç¨‹çš„ç¬”è®°æ€»ç»“">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://zyydgrbk.oss-cn-chengdu.aliyuncs.com/images/01d59958d20fd2a801219c77f1d73b.webp">
<meta property="article:published_time" content="2023-08-16T15:01:45.000Z">
<meta property="article:modified_time" content="2023-12-03T08:15:52.155Z">
<meta property="article:author" content="é‚¹é˜³">
<meta property="article:tag" content="å‰ç«¯">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://zyydgrbk.oss-cn-chengdu.aliyuncs.com/images/01d59958d20fd2a801219c77f1d73b.webp"><link rel="shortcut icon" href="https://zyydgrbk.oss-cn-chengdu.aliyuncs.com/images/nobackground.png"><link rel="canonical" href="http://zyydgrbk.top/2023/08/16/react-xue-xi/index.html"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="preconnect" href="//busuanzi.ibruce.info"/><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free/css/all.min.css" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/ui/dist/fancybox/fancybox.min.css" media="print" onload="this.media='all'"><script>const GLOBAL_CONFIG = { 
  root: '/',
  algolia: undefined,
  localSearch: undefined,
  translate: undefined,
  noticeOutdate: undefined,
  highlight: undefined,
  copy: {
    success: 'å¤åˆ¶æˆåŠŸ',
    error: 'å¤åˆ¶é”™è¯¯',
    noSupport: 'æµè§ˆå™¨ä¸æ”¯æŒ'
  },
  relativeDate: {
    homepage: false,
    post: false
  },
  runtime: '',
  dateSuffix: {
    just: 'åˆšåˆš',
    min: 'åˆ†é’Ÿå‰',
    hour: 'å°æ—¶å‰',
    day: 'å¤©å‰',
    month: 'ä¸ªæœˆå‰'
  },
  copyright: undefined,
  lightbox: 'fancybox',
  Snackbar: undefined,
  source: {
    justifiedGallery: {
      js: 'https://cdn.jsdelivr.net/npm/flickr-justified-gallery/dist/fjGallery.min.js',
      css: 'https://cdn.jsdelivr.net/npm/flickr-justified-gallery/dist/fjGallery.min.css'
    }
  },
  isPhotoFigcaption: false,
  islazyload: false,
  isAnchor: false,
  percent: {
    toc: true,
    rightside: true,
  }
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  title: 'reactå­¦ä¹ ',
  isPost: true,
  isHome: false,
  isHighlightShrink: false,
  isToc: true,
  postUpdate: '2023-12-03 16:15:52'
}</script><noscript><style type="text/css">
  #nav {
    opacity: 1
  }
  .justified-gallery img {
    opacity: 1
  }

  #recent-posts time,
  #post-meta time {
    display: inline !important
  }
</style></noscript><script>(win=>{
    win.saveToLocal = {
      set: function setWithExpiry(key, value, ttl) {
        if (ttl === 0) return
        const now = new Date()
        const expiryDay = ttl * 86400000
        const item = {
          value: value,
          expiry: now.getTime() + expiryDay,
        }
        localStorage.setItem(key, JSON.stringify(item))
      },

      get: function getWithExpiry(key) {
        const itemStr = localStorage.getItem(key)

        if (!itemStr) {
          return undefined
        }
        const item = JSON.parse(itemStr)
        const now = new Date()

        if (now.getTime() > item.expiry) {
          localStorage.removeItem(key)
          return undefined
        }
        return item.value
      }
    }
  
    win.getScript = url => new Promise((resolve, reject) => {
      const script = document.createElement('script')
      script.src = url
      script.async = true
      script.onerror = reject
      script.onload = script.onreadystatechange = function() {
        const loadState = this.readyState
        if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
        script.onload = script.onreadystatechange = null
        resolve()
      }
      document.head.appendChild(script)
    })
  
    win.getCSS = (url,id = false) => new Promise((resolve, reject) => {
      const link = document.createElement('link')
      link.rel = 'stylesheet'
      link.href = url
      if (id) link.id = id
      link.onerror = reject
      link.onload = link.onreadystatechange = function() {
        const loadState = this.readyState
        if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
        link.onload = link.onreadystatechange = null
        resolve()
      }
      document.head.appendChild(link)
    })
  
      win.activateDarkMode = function () {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#0d0d0d')
        }
      }
      win.activateLightMode = function () {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', 'ffffff')
        }
      }
      const t = saveToLocal.get('theme')
    
          if (t === 'dark') activateDarkMode()
          else if (t === 'light') activateLightMode()
        
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        if (asideStatus === 'hide') {
          document.documentElement.classList.add('hide-aside')
        } else {
          document.documentElement.classList.remove('hide-aside')
        }
      }
    
    const detectApple = () => {
      if(/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)){
        document.documentElement.classList.add('apple')
      }
    }
    detectApple()
    })(window)</script><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/custom.css"><meta name="generator" content="Hexo 6.3.0"><link rel="stylesheet" href="/css/prism-tomorrow.css" type="text/css"></head><body><div id="web_bg"></div><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="avatar-img is-center"><img src="https://zyydgrbk.oss-cn-chengdu.aliyuncs.com/images/nobackground.png" onerror="onerror=null;src='/img/friend_404.gif'" alt="avatar"/></div><div class="sidebar-site-data site-data is-center"><a href="/archives/"><div class="headline">æ–‡ç« </div><div class="length-num">70</div></a><a href="/tags/"><div class="headline">æ ‡ç­¾</div><div class="length-num">20</div></a><a href="/categories/"><div class="headline">åˆ†ç±»</div><div class="length-num">9</div></a></div><hr/><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> Home</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> Archives</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> Tags</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> Categories</span></a></div><div class="menus_item"><a class="site-page group" href="javascript:void(0);"><i class="fa-fw fas fa-list"></i><span> List</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/music/"><i class="fa-fw fas fa-music"></i><span> Music</span></a></li><li><a class="site-page child" href="/movies/"><i class="fa-fw fas fa-video"></i><span> Movie</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fas fa-link"></i><span> Link</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> About</span></a></div></div></div></div><div class="post" id="body-wrap"><header class="post-bg" id="page-header" style="background-image: url('https://zyydgrbk.oss-cn-chengdu.aliyuncs.com/images/01d59958d20fd2a801219c77f1d73b.webp')"><nav id="nav"><span id="blog-info"><a href="/" title="é‚¹é˜³ ã® åšå®¢"><img class="site-icon" src="https://zyydgrbk.oss-cn-chengdu.aliyuncs.com/images/nobackground.png"/><span class="site-name">é‚¹é˜³ ã® åšå®¢</span></a></span><div id="menus"><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> Home</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> Archives</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> Tags</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> Categories</span></a></div><div class="menus_item"><a class="site-page group" href="javascript:void(0);"><i class="fa-fw fas fa-list"></i><span> List</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/music/"><i class="fa-fw fas fa-music"></i><span> Music</span></a></li><li><a class="site-page child" href="/movies/"><i class="fa-fw fas fa-video"></i><span> Movie</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fas fa-link"></i><span> Link</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> About</span></a></div></div><div id="toggle-menu"><a class="site-page" href="javascript:void(0);"><i class="fas fa-bars fa-fw"></i></a></div></div></nav><div id="post-info"><h1 class="post-title">reactå­¦ä¹ </h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="far fa-calendar-alt fa-fw post-meta-icon"></i><span class="post-meta-label">å‘è¡¨äº</span><time class="post-meta-date-created" datetime="2023-08-16T15:01:45.000Z" title="å‘è¡¨äº 2023-08-16 23:01:45">2023-08-16</time><span class="post-meta-separator">|</span><i class="fas fa-history fa-fw post-meta-icon"></i><span class="post-meta-label">æ›´æ–°äº</span><time class="post-meta-date-updated" datetime="2023-12-03T08:15:52.155Z" title="æ›´æ–°äº 2023-12-03 16:15:52">2023-12-03</time></span><span class="post-meta-categories"><span class="post-meta-separator">|</span><i class="fas fa-inbox fa-fw post-meta-icon"></i><a class="post-meta-categories" href="/categories/%E5%89%8D%E7%AB%AF/">å‰ç«¯</a></span></div><div class="meta-secondline"><span class="post-meta-separator">|</span><span class="post-meta-pv-cv" id="" data-flag-title="reactå­¦ä¹ "><i class="far fa-eye fa-fw post-meta-icon"></i><span class="post-meta-label">é˜…è¯»é‡:</span><span id="busuanzi_value_page_pv"><i class="fa-solid fa-spinner fa-spin"></i></span></span></div></div></div></header><main class="layout" id="content-inner"><div id="post"><article class="post-content" id="article-container"><h1 id="reactå­¦ä¹ è·¯å¾„"><a href="#reactå­¦ä¹ è·¯å¾„" class="headerlink" title="reactå­¦ä¹ è·¯å¾„"></a>reactå­¦ä¹ è·¯å¾„</h1><p>ä¸€ä»½å¾ˆå¥½çš„å‰åç«¯å­¦ä¹ ç¬”è®°ï¼šä¸ªäººåšå®¢ï¼Œreactç¬”è®°æ˜¯å°šç¡…è°·ä¸­çš„ç¬”è®° ä½†ä¸æ˜¯å¾ˆè¯¦ç»†</p>
<p><a target="_blank" rel="noopener" href="https://bright-boy.gitee.io/technical-notes/#/react/React%E5%BA%94%E7%94%A8(%E5%9F%BA%E4%BA%8EReact%E8%84%9A%E6%89%8B%E6%9E%B6)">Reactåº”ç”¨(åŸºäºReactè„šæ‰‹æ¶) (gitee.io)</a></p>
<p>ä¸€ä»½å¾ˆå…¨çš„reactå­¦ä¹ è·¯å¾„</p>
<p><a target="_blank" rel="noopener" href="https://github.com/linjunc/react-study">linjunc&#x2F;react-study: ğŸ‰ Here are all the high-quality React articles, a React repository worth learning (github.com)</a></p>
<p>é‡Œé¢çš„ç¬”è®°ä¹Ÿéƒ½æ˜¯å°šç¡…è°·é‡Œçš„ï¼Œè¿™é‡Œæ•´ç†ä¸€ä¸‹ç”¨ä½œæ—¥å¸¸å¤ä¹ </p>
<h2 id="React-ä»å…¥é—¨åˆ°å…¥åœŸï¼ˆä¸€ï¼‰â€“-åŸºç¡€çŸ¥è¯†ä»¥åŠ-jsx-è¯­æ³•"><a href="#React-ä»å…¥é—¨åˆ°å…¥åœŸï¼ˆä¸€ï¼‰â€“-åŸºç¡€çŸ¥è¯†ä»¥åŠ-jsx-è¯­æ³•" class="headerlink" title="React ä»å…¥é—¨åˆ°å…¥åœŸï¼ˆä¸€ï¼‰â€“ åŸºç¡€çŸ¥è¯†ä»¥åŠ jsx è¯­æ³•"></a>React ä»å…¥é—¨åˆ°å…¥åœŸï¼ˆä¸€ï¼‰â€“ åŸºç¡€çŸ¥è¯†ä»¥åŠ jsx è¯­æ³•</h2><p>å…ˆé™„ä¸Š<a target="_blank" rel="noopener" href="https://zh-hans.reactjs.org/">Reactå®˜ç½‘</a> ï¼Œæœ‰å¾ˆå¤šé—®é¢˜éƒ½è¦é€šè¿‡æŸ¥è¯¢å®˜æ–¹æ–‡æ¡£æ¥è§£å†³ï¼Œè¦å­¦ä¼šæŸ¥æ–‡æ¡£~</p>
<h2 id="ä¸€ã€React-ç®€ä»‹"><a href="#ä¸€ã€React-ç®€ä»‹" class="headerlink" title="ä¸€ã€React ç®€ä»‹"></a>ä¸€ã€React ç®€ä»‹</h2><h3 id="1-å…³äº-React"><a href="#1-å…³äº-React" class="headerlink" title="1. å…³äº React"></a>1. å…³äº React</h3><p>æ•´å‡ ä¸ªé¢è¯•é¢˜æ¥è®¤è¯†ä¸€ä¸‹~~</p>
<blockquote>
<p>ä»€ä¹ˆæ˜¯ React ï¼Ÿ</p>
</blockquote>
<p><strong>React</strong> æ˜¯ä¸€ä¸ªç”¨äºæ„å»ºç”¨æˆ·ç•Œé¢çš„ JavaScript åº“ã€‚</p>
<ul>
<li>æ˜¯ä¸€ä¸ªå°†æ•°æ®æ¸²æŸ“ä¸º HTML è§†å›¾çš„å¼€æº JS åº“</li>
<li>å®ƒéµå¾ªåŸºäºç»„ä»¶çš„æ–¹æ³•ï¼Œæœ‰åŠ©äºæ„å»ºå¯é‡ç”¨çš„ UI ç»„ä»¶</li>
<li>å®ƒç”¨äºå¼€å‘å¤æ‚çš„äº¤äº’å¼çš„ web å’Œç§»åŠ¨ UI</li>
</ul>
<blockquote>
<p>React æœ‰ä»€ä¹ˆç‰¹ç‚¹ï¼Ÿ</p>
</blockquote>
<ol>
<li>ä½¿ç”¨è™šæ‹Ÿ DOM è€Œä¸æ˜¯çœŸæ­£çš„ DOM</li>
<li>å®ƒå¯ä»¥ç”¨æœåŠ¡å™¨æ¸²æŸ“</li>
<li>å®ƒéµå¾ªå•å‘æ•°æ®æµæˆ–æ•°æ®ç»‘å®š</li>
<li>é«˜æ•ˆ</li>
<li>å£°æ˜å¼ç¼–ç ï¼Œç»„ä»¶åŒ–ç¼–ç </li>
</ol>
<blockquote>
<p>React çš„ä¸€äº›ä¸»è¦ä¼˜ç‚¹ï¼Ÿ</p>
</blockquote>
<ol>
<li>å®ƒæé«˜äº†åº”ç”¨çš„æ€§èƒ½</li>
<li>å¯ä»¥æ–¹ä¾¿åœ¨å®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨ç«¯ä½¿ç”¨</li>
<li>ç”±äºä½¿ç”¨ JSXï¼Œä»£ç çš„å¯è¯»æ€§æ›´å¥½</li>
<li>ä½¿ç”¨Reactï¼Œç¼–å†™ UI æµ‹è¯•ç”¨ä¾‹å˜å¾—éå¸¸å®¹æ˜“</li>
</ol>
<h3 id="2-Hello-React"><a href="#2-Hello-React" class="headerlink" title="2. Hello React"></a>2. Hello React</h3><p>é¦–å…ˆéœ€è¦å¼•å…¥å‡ ä¸ª react åŒ…ï¼Œæˆ‘ç›´æ¥ç”¨çš„æ˜¯è€å¸ˆä¸‹è½½å¥½çš„</p>
<ul>
<li>React æ ¸å¿ƒåº“ã€æ“ä½œ DOM çš„ react æ‰©å±•åº“ã€å°† jsx è½¬ä¸º js çš„ babel åº“</li>
</ul>
<p><img src="https://ljcimg.oss-cn-beijing.aliyuncs.com/img/react1.png" alt="react1"></p>
<pre class=" language-jsx"><code class="language-jsx"><span class="token keyword">const</span> VDOM <span class="token operator">=</span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h1</span><span class="token punctuation">></span></span>Hello<span class="token punctuation">,</span>React<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h1</span><span class="token punctuation">></span></span>
ReactDOM<span class="token punctuation">.</span><span class="token function">render</span><span class="token punctuation">(</span>VDOM<span class="token punctuation">,</span>document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">".test"</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
</code></pre>
<h3 id="3-è™šæ‹Ÿ-DOM-å’ŒçœŸå®-DOM-çš„ä¸¤ç§åˆ›å»ºæ–¹æ³•"><a href="#3-è™šæ‹Ÿ-DOM-å’ŒçœŸå®-DOM-çš„ä¸¤ç§åˆ›å»ºæ–¹æ³•" class="headerlink" title="3. è™šæ‹Ÿ DOM å’ŒçœŸå® DOM çš„ä¸¤ç§åˆ›å»ºæ–¹æ³•"></a>3. è™šæ‹Ÿ DOM å’ŒçœŸå® DOM çš„ä¸¤ç§åˆ›å»ºæ–¹æ³•</h3><h4 id="3-1-JS-åˆ›å»ºè™šæ‹Ÿ-DOM"><a href="#3-1-JS-åˆ›å»ºè™šæ‹Ÿ-DOM" class="headerlink" title="3.1 JS åˆ›å»ºè™šæ‹Ÿ DOM"></a>3.1 JS åˆ›å»ºè™šæ‹Ÿ DOM</h4><pre class=" language-js"><code class="language-js"><span class="token comment" spellcheck="true">//1.åˆ›å»ºè™šæ‹ŸDOM,åˆ›å»ºåµŒå¥—æ ¼å¼çš„dom</span>
<span class="token keyword">const</span> VDOM<span class="token operator">=</span>React<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">'h1'</span><span class="token punctuation">,</span><span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>id<span class="token punctuation">:</span><span class="token string">'title'</span><span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span><span class="token punctuation">,</span>React<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">'span'</span><span class="token punctuation">,</span><span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span><span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span><span class="token punctuation">,</span><span class="token string">'hello,React'</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token comment" spellcheck="true">//2.æ¸²æŸ“è™šæ‹ŸDOMåˆ°é¡µé¢</span>
ReactDOM<span class="token punctuation">.</span><span class="token function">render</span><span class="token punctuation">(</span>VDOM<span class="token punctuation">,</span>document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">'.test'</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
</code></pre>
<h4 id="3-2-Jsx-åˆ›å»ºè™šæ‹ŸDOM"><a href="#3-2-Jsx-åˆ›å»ºè™šæ‹ŸDOM" class="headerlink" title="3.2 Jsx åˆ›å»ºè™šæ‹ŸDOM"></a>3.2 Jsx åˆ›å»ºè™šæ‹ŸDOM</h4><pre class=" language-jsx"><code class="language-jsx"><span class="token comment" spellcheck="true">//1.åˆ›å»ºè™šæ‹ŸDOM</span>
    <span class="token keyword">const</span> VDOM <span class="token operator">=</span> <span class="token punctuation">(</span>  <span class="token comment" spellcheck="true">/* æ­¤å¤„ä¸€å®šä¸è¦å†™å¼•å·ï¼Œå› ä¸ºä¸æ˜¯å­—ç¬¦ä¸² */</span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h1</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>title<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span><span class="token punctuation">></span></span>Hello<span class="token punctuation">,</span>React<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">></span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h1</span><span class="token punctuation">></span></span>
    <span class="token punctuation">)</span>
<span class="token comment" spellcheck="true">//2.æ¸²æŸ“è™šæ‹ŸDOMåˆ°é¡µé¢</span>
    ReactDOM<span class="token punctuation">.</span><span class="token function">render</span><span class="token punctuation">(</span>VDOM<span class="token punctuation">,</span>document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">'.test'</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
</code></pre>
<blockquote>
<p>js çš„å†™æ³•å¹¶ä¸æ˜¯å¸¸ç”¨çš„ï¼Œå¸¸ç”¨jsxæ¥å†™ï¼Œæ¯•ç«ŸJSXæ›´ç¬¦åˆä¹¦å†™çš„ä¹ æƒ¯</p>
</blockquote>
<h2 id="äºŒã€jsx-è¯­æ³•"><a href="#äºŒã€jsx-è¯­æ³•" class="headerlink" title="äºŒã€jsx è¯­æ³•"></a>äºŒã€jsx è¯­æ³•</h2><ol>
<li><p>å®šä¹‰è™šæ‹ŸDOMï¼Œä¸èƒ½ä½¿ç”¨<code>â€œâ€</code></p>
</li>
<li><p>æ ‡ç­¾ä¸­æ··å…¥JSè¡¨è¾¾å¼çš„æ—¶å€™ä½¿ç”¨<code>&#123;&#125;</code></p>
</li>
</ol>
<pre class=" language-jsx"><code class="language-jsx">id <span class="token operator">=</span> <span class="token entity" title="&#123;">&amp;#123;</span>myId<span class="token punctuation">.</span><span class="token function">toUpperCase</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token entity" title="&#125;">&amp;#125;</span>
</code></pre>
<ol start="3">
<li><p>æ ·å¼çš„ç±»åæŒ‡å®šä¸èƒ½ä½¿ç”¨classï¼Œä½¿ç”¨<code>className</code></p>
</li>
<li><p>å†…æ•›æ ·å¼è¦ä½¿ç”¨<code>&#123;&#123;&#125;&#125;</code>åŒ…è£¹</p>
</li>
</ol>
<pre class=" language-jsx"><code class="language-jsx">style<span class="token operator">=</span><span class="token entity" title="&#123;">&amp;#123;</span><span class="token entity" title="&#123;">&amp;#123;</span>color<span class="token punctuation">:</span><span class="token string">'skyblue'</span><span class="token punctuation">,</span>fontSize<span class="token punctuation">:</span><span class="token string">'24px'</span><span class="token entity" title="&#125;">&amp;#125;</span><span class="token entity" title="&#125;">&amp;#125;</span>
</code></pre>
<ol start="5">
<li><p>ä¸èƒ½æœ‰å¤šä¸ªæ ¹æ ‡ç­¾ï¼Œåªèƒ½æœ‰ä¸€ä¸ªæ ¹æ ‡ç­¾</p>
</li>
<li><p>æ ‡ç­¾å¿…é¡»é—­åˆï¼Œè‡ªé—­åˆä¹Ÿè¡Œ</p>
</li>
<li><p>å¦‚æœå°å†™å­—æ¯å¼€å¤´ï¼Œå°±å°†æ ‡ç­¾è½¬åŒ–ä¸º html åŒåå…ƒç´ ï¼Œå¦‚æœ html ä¸­æ— è¯¥æ ‡ç­¾å¯¹åº”çš„å…ƒç´ ï¼Œå°±æŠ¥é”™ï¼›å¦‚æœæ˜¯å¤§å†™å­—æ¯å¼€å¤´ï¼Œreact å°±å»æ¸²æŸ“å¯¹åº”çš„ç»„ä»¶ï¼Œå¦‚æœæ²¡æœ‰å°±æŠ¥é”™</p>
</li>
</ol>
<blockquote>
<p>è®°å‡ ä¸ª</p>
</blockquote>
<h4 id="1-æ³¨é‡Š"><a href="#1-æ³¨é‡Š" class="headerlink" title="1. æ³¨é‡Š"></a>1. æ³¨é‡Š</h4><p>å†™åœ¨èŠ±æ‹¬å·é‡Œ</p>
<pre class=" language-jsx"><code class="language-jsx">ReactDOM<span class="token punctuation">.</span><span class="token function">render</span><span class="token punctuation">(</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h1</span><span class="token punctuation">></span></span>å°ä¸<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h1</span><span class="token punctuation">></span></span>
    <span class="token entity" title="&#123;">&amp;#123;</span><span class="token comment" spellcheck="true">/*æ³¨é‡Š...*/</span><span class="token entity" title="&#125;">&amp;#125;</span>
     <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span><span class="token punctuation">,</span>
    document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">'example'</span><span class="token punctuation">)</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
<h4 id="2-æ•°ç»„"><a href="#2-æ•°ç»„" class="headerlink" title="2. æ•°ç»„"></a>2. æ•°ç»„</h4><p>JSX å…è®¸åœ¨æ¨¡æ¿ä¸­æ’å…¥æ•°ç»„ï¼Œæ•°ç»„è‡ªåŠ¨å±•å¼€å…¨éƒ¨æˆå‘˜</p>
<pre class=" language-jsx"><code class="language-jsx"><span class="token keyword">var</span> arr <span class="token operator">=</span> <span class="token punctuation">[</span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h1</span><span class="token punctuation">></span></span>å°ä¸<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h1</span><span class="token punctuation">></span></span><span class="token punctuation">,</span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h2</span><span class="token punctuation">></span></span>åŒå­¦<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h2</span><span class="token punctuation">></span></span><span class="token punctuation">,</span>
<span class="token punctuation">]</span><span class="token punctuation">;</span>
ReactDOM<span class="token punctuation">.</span><span class="token function">render</span><span class="token punctuation">(</span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">></span></span><span class="token entity" title="&#123;">&amp;#123;</span>arr<span class="token entity" title="&#125;">&amp;#125;</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span><span class="token punctuation">,</span>
  document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">'example'</span><span class="token punctuation">)</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
<h3 id="tip-JSX-å°ç»ƒä¹ "><a href="#tip-JSX-å°ç»ƒä¹ " class="headerlink" title="tip: JSX å°ç»ƒä¹ "></a>tip: JSX å°ç»ƒä¹ </h3><p>æ ¹æ®åŠ¨æ€æ•°æ®ç”Ÿæˆ <code>li</code></p>
<pre class=" language-jsx"><code class="language-jsx"><span class="token keyword">const</span> data <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">'A'</span><span class="token punctuation">,</span><span class="token string">'B'</span><span class="token punctuation">,</span><span class="token string">'C'</span><span class="token punctuation">]</span>
<span class="token keyword">const</span> VDOM <span class="token operator">=</span> <span class="token punctuation">(</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">></span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>ul</span><span class="token punctuation">></span></span>
            <span class="token entity" title="&#123;">&amp;#123;</span>
                data<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token punctuation">(</span>item<span class="token punctuation">,</span>index<span class="token punctuation">)</span><span class="token operator">=</span><span class="token operator">></span><span class="token entity" title="&#123;">&amp;#123;</span>
                    <span class="token keyword">return</span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span> <span class="token attr-name">key</span><span class="token attr-value"><span class="token punctuation">=</span>&amp;#123;index&amp;#125;</span><span class="token punctuation">></span></span><span class="token entity" title="&#123;">&amp;#123;</span>item<span class="token entity" title="&#125;">&amp;#125;</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">></span></span>
                <span class="token entity" title="&#125;">&amp;#125;</span><span class="token punctuation">)</span>
            <span class="token entity" title="&#125;">&amp;#125;</span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>ul</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>
<span class="token punctuation">)</span>
ReactDOM<span class="token punctuation">.</span><span class="token function">render</span><span class="token punctuation">(</span>VDOM<span class="token punctuation">,</span>document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">'.test'</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
</code></pre>
<h2 id="React-ä»å…¥é—¨åˆ°å…¥åœŸï¼ˆäºŒï¼‰â€“-é¢å‘ç»„ä»¶ç¼–ç¨‹"><a href="#React-ä»å…¥é—¨åˆ°å…¥åœŸï¼ˆäºŒï¼‰â€“-é¢å‘ç»„ä»¶ç¼–ç¨‹" class="headerlink" title="React ä»å…¥é—¨åˆ°å…¥åœŸï¼ˆäºŒï¼‰â€“ é¢å‘ç»„ä»¶ç¼–ç¨‹"></a>React ä»å…¥é—¨åˆ°å…¥åœŸï¼ˆäºŒï¼‰â€“ é¢å‘ç»„ä»¶ç¼–ç¨‹</h2><h2 id="ä¸€ã€ç»„ä»¶çš„ä½¿ç”¨"><a href="#ä¸€ã€ç»„ä»¶çš„ä½¿ç”¨" class="headerlink" title="ä¸€ã€ç»„ä»¶çš„ä½¿ç”¨"></a>ä¸€ã€ç»„ä»¶çš„ä½¿ç”¨</h2><p>å½“åº”ç”¨æ˜¯ä»¥å¤šç»„ä»¶çš„æ–¹å¼å®ç°ï¼Œè¿™ä¸ªåº”ç”¨å°±æ˜¯ä¸€ä¸ªç»„ä»¶åŒ–çš„åº”ç”¨</p>
<blockquote>
<p><strong>æ³¨æ„ï¼š</strong> </p>
<ol>
<li><p>ç»„ä»¶åå¿…é¡»æ˜¯é¦–å­—æ¯å¤§å†™</p>
</li>
<li><p>è™šæ‹ŸDOMå…ƒç´ åªèƒ½æœ‰ä¸€ä¸ªæ ¹å…ƒç´ </p>
</li>
<li><p>è™šæ‹ŸDOMå…ƒç´ å¿…é¡»æœ‰ç»“æŸæ ‡ç­¾ <code>&lt; /&gt;</code></p>
</li>
</ol>
</blockquote>
<p><strong>æ¸²æŸ“ç±»ç»„ä»¶æ ‡ç­¾çš„åŸºæœ¬æµç¨‹</strong></p>
<ol>
<li><p>React å†…éƒ¨ä¼šåˆ›å»ºç»„ä»¶å®ä¾‹å¯¹è±¡</p>
</li>
<li><p>è°ƒç”¨<code>render()</code>å¾—åˆ°è™šæ‹Ÿ DOM ,å¹¶è§£æä¸ºçœŸå® DOM</p>
</li>
<li><p>æ’å…¥åˆ°æŒ‡å®šçš„é¡µé¢å…ƒç´ å†…éƒ¨</p>
</li>
</ol>
<h3 id="1-å‡½æ•°å¼ç»„ä»¶"><a href="#1-å‡½æ•°å¼ç»„ä»¶" class="headerlink" title="1. å‡½æ•°å¼ç»„ä»¶"></a>1. å‡½æ•°å¼ç»„ä»¶</h3><pre class=" language-js"><code class="language-js"><span class="token comment" spellcheck="true">//1.å…ˆåˆ›å»ºå‡½æ•°ï¼Œå‡½æ•°å¯ä»¥æœ‰å‚æ•°ï¼Œä¹Ÿå¯ä»¥æ²¡æœ‰ï¼Œä½†æ˜¯å¿…é¡»è¦æœ‰è¿”å›å€¼ è¿”å›ä¸€ä¸ªè™šæ‹ŸDOM</span>
<span class="token keyword">function</span> <span class="token function">Welcome</span><span class="token punctuation">(</span>props<span class="token punctuation">)</span> <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>
  <span class="token keyword">return</span> <span class="token operator">&lt;</span>h1<span class="token operator">></span>Hello<span class="token punctuation">,</span> <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>props<span class="token punctuation">.</span>name<span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span><span class="token operator">&lt;</span><span class="token operator">/</span>h1<span class="token operator">></span><span class="token punctuation">;</span>
<span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>
<span class="token comment" spellcheck="true">//2.è¿›è¡Œæ¸²æŸ“</span>
ReactDOM<span class="token punctuation">.</span><span class="token function">Render</span><span class="token punctuation">(</span><span class="token operator">&lt;</span>Welcom name <span class="token operator">=</span> <span class="token string">"ljc"</span> <span class="token operator">/</span><span class="token operator">></span><span class="token punctuation">,</span>document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">"div"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
<p>ä¸Šé¢çš„ä»£ç ç»å†äº†ä»¥ä¸‹å‡ æ­¥</p>
<ol>
<li>æˆ‘ä»¬è°ƒç”¨ <code>ReactDOM.render()</code> å‡½æ•°ï¼Œå¹¶ä¼ å…¥ <code>&lt;Welcome name=&quot;ljc&quot; /&gt;</code> ä½œä¸ºå‚æ•°ã€‚</li>
<li>React è°ƒç”¨ <code>Welcome</code> ç»„ä»¶ï¼Œå¹¶å°† <code>&#123;name: &#39;ljc&#39;&#125;</code> ä½œä¸º props ä¼ å…¥ã€‚</li>
<li><code>Welcome</code> ç»„ä»¶å°† <code>Hello, ljc</code> å…ƒç´ ä½œä¸ºè¿”å›å€¼ã€‚</li>
<li>React DOM å°† DOM é«˜æ•ˆåœ°æ›´æ–°ä¸º <code>Hello,ljc</code>ã€‚</li>
</ol>
<h3 id="2-ç±»å¼ç»„ä»¶"><a href="#2-ç±»å¼ç»„ä»¶" class="headerlink" title="2. ç±»å¼ç»„ä»¶"></a>2. ç±»å¼ç»„ä»¶</h3><p><img src="https://ljcimg.oss-cn-beijing.aliyuncs.com/img/weather.gif" alt="weather"></p>
<pre class=" language-js"><code class="language-js"><span class="token keyword">class</span> <span class="token class-name">MyComponent</span> <span class="token keyword">extends</span> <span class="token class-name">React<span class="token punctuation">.</span>Component</span> <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>
    state <span class="token operator">=</span> <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>isHot<span class="token punctuation">:</span><span class="token boolean">false</span><span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>
    <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>
        <span class="token keyword">const</span> <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>isHot<span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span> <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>state
        <span class="token keyword">return</span> <span class="token operator">&lt;</span>h1 onClick<span class="token operator">=</span><span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span><span class="token keyword">this</span><span class="token punctuation">.</span>changeWeather<span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span><span class="token operator">></span>ä»Šå¤©å¤©æ°”å¾ˆ<span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>isHot<span class="token operator">?</span><span class="token string">'ç‚çƒ­'</span><span class="token punctuation">:</span><span class="token string">'å‡‰çˆ½'</span><span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span><span class="token operator">&lt;</span><span class="token operator">/</span>h1<span class="token operator">></span>
    <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>
    changeWeather <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=</span><span class="token operator">></span><span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>
        <span class="token keyword">const</span> isHot <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>isHot
        <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setState</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>isHot<span class="token punctuation">:</span><span class="token operator">!</span>isHot<span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span><span class="token punctuation">)</span>
    <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>
<span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>
ReactDOM<span class="token punctuation">.</span><span class="token function">render</span><span class="token punctuation">(</span><span class="token operator">&lt;</span>MyComponent<span class="token operator">/</span><span class="token operator">></span><span class="token punctuation">,</span>document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">'.test'</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
</code></pre>
<p>è¿™ç©æ„åº•å±‚ä¸ç®€å•ï¼Œ<code>this</code>çš„æŒ‡å‘çœŸçš„éœ€è¦å¥½å¥½å­¦ä¹ </p>
<p><strong>åœ¨ä¼˜åŒ–è¿‡ç¨‹ä¸­é‡åˆ°çš„é—®é¢˜</strong></p>
<ol>
<li>ç»„ä»¶ä¸­çš„ render æ–¹æ³•ä¸­çš„ this ä¸ºç»„ä»¶å®ä¾‹å¯¹è±¡</li>
<li>ç»„ä»¶è‡ªå®šä¹‰æ–¹æ³•ä¸­ç”±äºå¼€å¯äº†ä¸¥æ ¼æ¨¡å¼ï¼Œthis æŒ‡å‘ <code>undefined</code> å¦‚ä½•è§£å†³<ol>
<li>é€šè¿‡ bind æ”¹å˜ this æŒ‡å‘</li>
<li>æ¨èé‡‡ç”¨ç®­å¤´å‡½æ•°ï¼Œç®­å¤´å‡½æ•°çš„ <code>this</code> æŒ‡å‘</li>
</ol>
</li>
<li>state æ•°æ®ä¸èƒ½ç›´æ¥ä¿®æ”¹æˆ–è€…æ›´æ–°</li>
</ol>
<h3 id="3-å…¶ä»–çŸ¥è¯†"><a href="#3-å…¶ä»–çŸ¥è¯†" class="headerlink" title="3. å…¶ä»–çŸ¥è¯†"></a>3. å…¶ä»–çŸ¥è¯†</h3><p>åŒ…å«è¡¨å•å…ƒç´ çš„ç»„ä»¶åˆ†ä¸ºéå—æ§ç§Ÿä»·ä¸å—æ§ç»„ä»¶</p>
<ul>
<li><strong>å—æ§ç»„ä»¶</strong>ï¼šè¡¨å•ç»„ä»¶çš„è¾“å…¥ç»„ä»¶éšç€è¾“å…¥å¹¶å°†å†…å®¹å­˜å‚¨åˆ°çŠ¶æ€ä¸­ï¼ˆéšæ—¶æ›´æ–°ï¼‰</li>
<li><strong>éå—æ§ç»„ä»¶</strong>ï¼šè¡¨å•ç»„ä»¶çš„è¾“å…¥ç»„ä»¶çš„å†…å®¹åœ¨æœ‰éœ€æ±‚çš„æ—¶å€™æ‰å­˜å‚¨åˆ°çŠ¶æ€ä¸­ï¼ˆå³ç”¨å³å–ï¼‰</li>
</ul>
<h2 id="äºŒã€ç»„ä»¶å®ä¾‹ä¸‰å¤§å±æ€§"><a href="#äºŒã€ç»„ä»¶å®ä¾‹ä¸‰å¤§å±æ€§" class="headerlink" title="äºŒã€ç»„ä»¶å®ä¾‹ä¸‰å¤§å±æ€§"></a>äºŒã€ç»„ä»¶å®ä¾‹ä¸‰å¤§å±æ€§</h2><h3 id="1-state"><a href="#1-state" class="headerlink" title="1. state"></a>1. state</h3><blockquote>
<p>React æŠŠç»„ä»¶çœ‹æˆæ˜¯ä¸€ä¸ªçŠ¶æ€æœºï¼ˆState Machinesï¼‰ã€‚é€šè¿‡ä¸ç”¨æˆ·çš„äº¤äº’ï¼Œå®ç°ä¸åŒçŠ¶æ€ï¼Œç„¶åæ¸²æŸ“ UIï¼Œè®©ç”¨æˆ·ç•Œé¢å’Œæ•°æ®ä¿æŒä¸€è‡´ã€‚</p>
<p>React é‡Œï¼Œåªéœ€æ›´æ–°ç»„ä»¶çš„ stateï¼Œç„¶åæ ¹æ®æ–°çš„ state é‡æ–°æ¸²æŸ“ç”¨æˆ·ç•Œé¢ï¼ˆä¸è¦æ“ä½œ DOMï¼‰ã€‚</p>
</blockquote>
<p>ç®€å•çš„è¯´å°±æ˜¯ç»„ä»¶çš„çŠ¶æ€ï¼Œä¹Ÿå°±æ˜¯è¯¥ç»„ä»¶æ‰€å­˜å‚¨çš„æ•°æ®</p>
<p><strong>ç±»å¼ç»„ä»¶ä¸­çš„ä½¿ç”¨</strong></p>
<p><img src="https://ljcimg.oss-cn-beijing.aliyuncs.com/img/image-20210720203721926.png" alt="image-20210720203721926"></p>
<p>ä½¿ç”¨çš„æ—¶å€™é€šè¿‡<code>this.state</code>è°ƒç”¨<code>state</code>é‡Œçš„å€¼</p>
<p>åœ¨ç±»å¼ç»„ä»¶ä¸­å®šä¹‰<code>state</code></p>
<ul>
<li>åœ¨æ„é€ å™¨ä¸­åˆå§‹åŒ–<code>state</code></li>
<li>åœ¨ç±»ä¸­æ·»åŠ å±æ€§<code>state</code>æ¥åˆå§‹åŒ–</li>
</ul>
<p><strong>ä¿®æ”¹ state</strong></p>
<p>åœ¨<strong>ç±»å¼ç»„ä»¶</strong>çš„å‡½æ•°ä¸­ï¼Œç›´æ¥ä¿®æ”¹<code>state</code>å€¼</p>
<pre class=" language-js"><code class="language-js"><span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>weather <span class="token operator">=</span> <span class="token string">'å‡‰çˆ½'</span>
</code></pre>
<blockquote>
<p>é¡µé¢çš„æ¸²æŸ“é çš„æ˜¯<code>render</code>å‡½æ•°</p>
</blockquote>
<p>è¿™æ—¶å€™ä¼šå‘ç°é¡µé¢å†…å®¹ä¸ä¼šæ”¹å˜ï¼ŒåŸå› æ˜¯ React ä¸­ä¸å»ºè®® <code>state</code>ä¸å…è®¸ç›´æ¥ä¿®æ”¹ï¼Œè€Œæ˜¯é€šè¿‡ç±»çš„åŸå‹å¯¹è±¡ä¸Šçš„æ–¹æ³• <code>setState()</code></p>
<p><strong>setState()</strong></p>
<pre class=" language-js"><code class="language-js"><span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setState</span><span class="token punctuation">(</span>partialState<span class="token punctuation">,</span> <span class="token punctuation">[</span>callback<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
<ul>
<li><code>partialState</code>: éœ€è¦æ›´æ–°çš„çŠ¶æ€çš„éƒ¨åˆ†å¯¹è±¡</li>
<li><code>callback</code>: æ›´æ–°å®ŒçŠ¶æ€åçš„å›è°ƒå‡½æ•°</li>
</ul>
<p>æœ‰ä¸¤ç§å†™æ³•ï¼šå†™æ³•1</p>
<pre class=" language-js"><code class="language-js"><span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setState</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>
    weather<span class="token punctuation">:</span> <span class="token string">"å‡‰çˆ½"</span>
<span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span><span class="token punctuation">)</span>
</code></pre>
<p>å†™æ³•2ï¼š</p>
<pre class=" language-js"><code class="language-js"><span class="token comment" spellcheck="true">// ä¼ å…¥ä¸€ä¸ªå‡½æ•°ï¼Œè¿”å›xéœ€è¦ä¿®æ”¹æˆçš„å¯¹è±¡ï¼Œå‚æ•°ä¸ºå½“å‰çš„ state</span>
<span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setState</span><span class="token punctuation">(</span>state <span class="token operator">=</span><span class="token operator">></span> <span class="token punctuation">(</span><span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>count<span class="token punctuation">:</span> state<span class="token punctuation">.</span>count<span class="token operator">+</span><span class="token number">1</span><span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
<p><code>setState</code>æ˜¯ä¸€ç§åˆå¹¶æ“ä½œï¼Œä¸æ˜¯æ›¿æ¢æ“ä½œ</p>
<hr>
<ul>
<li>åœ¨æ‰§è¡Œ <code>setState</code>æ“ä½œåï¼ŒReact ä¼šè‡ªåŠ¨è°ƒç”¨ä¸€æ¬¡ <code>render()</code></li>
<li><code>render()</code> çš„æ‰§è¡Œæ¬¡æ•°æ˜¯ 1+n (1 ä¸ºåˆå§‹åŒ–æ—¶çš„è‡ªåŠ¨è°ƒç”¨ï¼Œn ä¸ºçŠ¶æ€æ›´æ–°çš„æ¬¡æ•°)</li>
</ul>
<h3 id="2-props"><a href="#2-props" class="headerlink" title="2. props"></a>2. props</h3><p>ä¸<code>state</code>ä¸åŒï¼Œ<code>state</code>æ˜¯ç»„ä»¶è‡ªèº«çš„çŠ¶æ€ï¼Œè€Œ<code>props</code>åˆ™æ˜¯å¤–éƒ¨ä¼ å…¥çš„æ•°æ®</p>
<p><strong>ç±»å¼ç»„ä»¶ä¸­ä½¿ç”¨</strong></p>
<p><img src="https://ljcimg.oss-cn-beijing.aliyuncs.com/img/image-20210720211554914.png" alt="image-20210720211554914"></p>
<p>åœ¨ä½¿ç”¨çš„æ—¶å€™å¯ä»¥é€šè¿‡ <code>this.props</code>æ¥è·å–å€¼ ç±»å¼ç»„ä»¶çš„ <code>props</code>:</p>
<ol>
<li>é€šè¿‡åœ¨ç»„ä»¶æ ‡ç­¾ä¸Šä¼ é€’å€¼ï¼Œåœ¨ç»„ä»¶ä¸­å°±å¯ä»¥è·å–åˆ°æ‰€ä¼ é€’çš„å€¼</li>
<li>åœ¨æ„é€ å™¨é‡Œçš„<code>props</code>å‚æ•°é‡Œå¯ä»¥è·å–åˆ° <code>props</code></li>
<li>å¯ä»¥åˆ†åˆ«è®¾ç½® <code>propTypes</code> å’Œ <code>defaultProps</code> ä¸¤ä¸ªå±æ€§æ¥åˆ†åˆ«æ“ä½œ <code>props</code>çš„è§„èŒƒå’Œé»˜è®¤å€¼ï¼Œä¸¤è€…éƒ½æ˜¯ç›´æ¥æ·»åŠ åœ¨ç±»å¼ç»„ä»¶çš„<strong>åŸå‹å¯¹è±¡</strong>ä¸Šçš„ï¼ˆæ‰€ä»¥éœ€è¦æ·»åŠ  <code>static</code>ï¼‰</li>
<li>åŒæ—¶å¯ä»¥é€šè¿‡<code>...</code>è¿ç®—ç¬¦æ¥ç®€åŒ–</li>
</ol>
<p><img src="https://ljcimg.oss-cn-beijing.aliyuncs.com/img/image-20210720212505232.png" alt="image-20210720212505232"></p>
<p><strong>å‡½æ•°å¼ç»„ä»¶ä¸­çš„ä½¿ç”¨</strong></p>
<blockquote>
<p>å‡½æ•°åœ¨ä½¿ç”¨propsçš„æ—¶å€™ï¼Œæ˜¯ä½œä¸ºå‚æ•°è¿›è¡Œä½¿ç”¨çš„(props)</p>
</blockquote>
<p><img src="https://ljcimg.oss-cn-beijing.aliyuncs.com/img/image-20210720213304037.png" alt="image-20210720213304037"></p>
<p>å‡½æ•°ç»„ä»¶çš„ <code>props</code>å®šä¹‰:</p>
<ol>
<li>åœ¨ç»„ä»¶æ ‡ç­¾ä¸­ä¼ é€’ <code>props</code>çš„å€¼</li>
<li>ç»„ä»¶å‡½æ•°çš„å‚æ•°ä¸º <code>props</code></li>
<li>å¯¹ <code>props</code>çš„é™åˆ¶å’Œé»˜è®¤å€¼åŒæ ·è®¾ç½®åœ¨åŸå‹å¯¹è±¡ä¸Š</li>
</ol>
<h3 id="3-refs"><a href="#3-refs" class="headerlink" title="3. refs"></a>3. refs</h3><p>Refs æä¾›äº†ä¸€ç§æ–¹å¼ï¼Œå…è®¸æˆ‘ä»¬è®¿é—® DOM èŠ‚ç‚¹æˆ–åœ¨ <code>render</code> æ–¹æ³•ä¸­åˆ›å»ºçš„ React å…ƒç´ ã€‚</p>
<blockquote>
<p>åœ¨æˆ‘ä»¬æ­£å¸¸çš„æ“ä½œèŠ‚ç‚¹æ—¶ï¼Œéœ€è¦é‡‡ç”¨DOM API æ¥æŸ¥æ‰¾å…ƒç´ ï¼Œä½†æ˜¯è¿™æ ·è¿èƒŒäº† React çš„ç†å¿µï¼Œå› æ­¤æœ‰äº†<code>refs</code></p>
</blockquote>
<p>æœ‰ä¸‰ç§æ“ä½œ<code>refs</code>çš„æ–¹æ³•ï¼Œåˆ†åˆ«ä¸ºï¼š</p>
<ul>
<li>å­—ç¬¦ä¸²å½¢å¼</li>
<li>å›è°ƒå½¢å¼</li>
<li><code>createRef</code>å½¢å¼</li>
</ul>
<p><strong>å­—ç¬¦ä¸²å½¢å¼</strong><code>refs</code></p>
<p><img src="https://ljcimg.oss-cn-beijing.aliyuncs.com/img/image-20210720215332387.png" alt="image-20210720215332387"></p>
<p>è™½ç„¶è¿™ä¸ªæ–¹æ³•åºŸå¼ƒäº†ï¼Œä½†æ˜¯è¿˜èƒ½ç”¨ï¼Œè¿˜å¾ˆå¥½ç”¨hhh~</p>
<p><strong>å›è°ƒå½¢å¼çš„</strong><code>refs</code></p>
<p>ç»„ä»¶å®ä¾‹çš„<code>ref</code>å±æ€§ä¼ é€’ä¸€ä¸ªå›è°ƒå‡½æ•°<code>c =&gt; this.input1 = c </code>ï¼ˆç®­å¤´å‡½æ•°ç®€å†™ï¼‰ï¼Œè¿™æ ·ä¼šåœ¨å®ä¾‹çš„å±æ€§ä¸­å­˜å‚¨å¯¹DOMèŠ‚ç‚¹çš„å¼•ç”¨ï¼Œä½¿ç”¨æ—¶å¯é€šè¿‡<code>this.input1</code>æ¥ä½¿ç”¨</p>
<p><strong>ä½¿ç”¨æ–¹æ³•</strong></p>
<pre class=" language-js"><code class="language-js"><span class="token operator">&lt;</span>input ref<span class="token operator">=</span><span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>c <span class="token operator">=</span><span class="token operator">></span> <span class="token keyword">this</span><span class="token punctuation">.</span>input1 <span class="token operator">=</span> c <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span> type<span class="token operator">=</span><span class="token string">"text"</span> placeholder<span class="token operator">=</span><span class="token string">"ç‚¹å‡»æŒ‰é’®æç¤ºæ•°æ®"</span><span class="token operator">/</span><span class="token operator">></span>
</code></pre>
<p><strong>æˆ‘çš„ç†è§£</strong></p>
<p><code>c</code>ä¼šæ¥æ”¶åˆ°å½“å‰èŠ‚ç‚¹ä½œä¸ºå‚æ•°ï¼Œ<code>ref</code>çš„å€¼ä¸ºå‡½æ•°çš„è¿”å›å€¼ï¼Œä¹Ÿå°±æ˜¯<code>this.input1 = c</code>ï¼Œå› æ­¤æ˜¯ç»™å®ä¾‹ä¸‹çš„<code>input1</code>èµ‹å€¼</p>
<p><strong>createRef å½¢å¼</strong>ï¼ˆæ¨èå†™æ³•ï¼‰</p>
<p>React ç»™æˆ‘ä»¬æä¾›äº†ä¸€ä¸ªç›¸åº”çš„APIï¼Œå®ƒä¼šè‡ªåŠ¨çš„å°†è¯¥ DOM å…ƒç´ æ”¾å…¥å®ä¾‹å¯¹è±¡ä¸­</p>
<p>æˆ‘ä»¬å…ˆç»™DOMå…ƒç´ æ·»åŠ refå±æ€§</p>
<pre class=" language-html"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">ref</span><span class="token attr-value"><span class="token punctuation">=</span>&amp;#123;this.MyRef&amp;#125;</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>text<span class="token punctuation">"</span></span> <span class="token attr-name">placeholder</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>ç‚¹å‡»å¼¹å‡º<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">ref</span><span class="token attr-value"><span class="token punctuation">=</span>&amp;#123;this.MyRef1&amp;#125;</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>text<span class="token punctuation">"</span></span> <span class="token attr-name">placeholder</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>ç‚¹å‡»å¼¹å‡º<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span>
</code></pre>
<p>é€šè¿‡APIï¼Œåˆ›å»ºReactçš„å®¹å™¨ï¼Œä¼šå°†DOMå…ƒç´ èµ‹å€¼ç»™å®ä¾‹å¯¹è±¡çš„åç§°ä¸ºå®¹å™¨çš„å±æ€§çš„<code>current</code>ï¼Œå¥½çƒ¦..</p>
<pre class=" language-js"><code class="language-js">MyRef <span class="token operator">=</span> React<span class="token punctuation">.</span><span class="token function">createRef</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
MyRef1 <span class="token operator">=</span> React<span class="token punctuation">.</span><span class="token function">createRef</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
<p>æ³¨æ„ï¼šä¸“äººä¸“ç”¨ï¼Œå¥½çƒ¦ï¼Œä¸€ä¸ªèŠ‚ç‚¹åˆ›å»ºä¸€ä¸ªå®¹å™¨</p>
<pre class=" language-js"><code class="language-js"><span class="token comment" spellcheck="true">//è°ƒç”¨</span>
btnOnClick <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span><span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>
    <span class="token comment" spellcheck="true">//åˆ›å»ºä¹‹åï¼Œå°†è‡ªèº«èŠ‚ç‚¹ï¼Œä¼ å…¥currentä¸­</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>MyRef<span class="token punctuation">.</span>current<span class="token punctuation">.</span>value<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>
</code></pre>
<p>æ³¨æ„ï¼šæˆ‘ä»¬ä¸è¦è¿‡åº¦çš„ä½¿ç”¨ refï¼Œå¦‚æœå‘ç”Ÿæ—¶é—´çš„å…ƒç´ åˆšå¥½æ˜¯éœ€è¦æ“ä½œçš„å…ƒç´ ï¼Œå°±å¯ä»¥ä½¿ç”¨äº‹ä»¶å¯¹è±¡å»æ›¿ä»£ã€‚è¿‡åº¦ä½¿ç”¨æœ‰ä»€ä¹ˆé—®é¢˜æˆ‘ä¹Ÿä¸æ¸…æ¥šï¼Œå¯èƒ½æœ‰ bug å§</p>
<h3 id="4-äº‹ä»¶å¤„ç†"><a href="#4-äº‹ä»¶å¤„ç†" class="headerlink" title="4. äº‹ä»¶å¤„ç†"></a>4. äº‹ä»¶å¤„ç†</h3><ol>
<li><p>React ä½¿ç”¨çš„æ˜¯è‡ªå®šä¹‰äº‹ä»¶ï¼Œè€Œä¸æ˜¯åŸç”Ÿçš„ DOM äº‹ä»¶</p>
</li>
<li><p>React çš„äº‹ä»¶æ˜¯é€šè¿‡äº‹ä»¶å§”æ‰˜æ–¹å¼å¤„ç†çš„ï¼ˆä¸ºäº†æ›´åŠ çš„é«˜æ•ˆï¼‰</p>
</li>
<li><p>å¯ä»¥é€šè¿‡äº‹ä»¶çš„ <code>event.target</code>è·å–å‘ç”Ÿçš„ DOM å…ƒç´ å¯¹è±¡ï¼Œå¯ä»¥å°½é‡å‡å°‘ <code>refs</code>çš„ä½¿ç”¨</p>
</li>
</ol>
<p><img src="https://ljcimg.oss-cn-beijing.aliyuncs.com/img/image-20210720222147149.png" alt="image-20210720222147149"></p>
<h2 id="ä¸‰ã€é«˜é˜¶å‡½æ•°"><a href="#ä¸‰ã€é«˜é˜¶å‡½æ•°" class="headerlink" title="ä¸‰ã€é«˜é˜¶å‡½æ•°"></a>ä¸‰ã€é«˜é˜¶å‡½æ•°</h2><p>å…³äºè¿™éƒ¨åˆ†çš„çŸ¥è¯†ï¼Œä¹‹å‰çš„ç¬”è®°æœ‰è®°è¿‡äº†ï¼Œæˆ‘çœŸæ˜¯å¤ªæ£’äº†</p>
<p>é“¾æ¥<a target="_blank" rel="noopener" href="https://linjc.blog.csdn.net/article/details/116765732">é«˜é˜¶å‡½æ•°</a>ï¼Œå…³äºAOPï¼Œåå‡½æ•°ï¼ŒæŸ¯é‡ŒåŒ–éƒ½æœ‰ä¸é”™çš„è®°å½•ï¼Œæ„Ÿè§‰è¿˜æ˜¯ä¸é”™çš„</p>
<h2 id="React-å…¥é—¨ï¼ˆä¸‰ï¼‰-â€“-ç”Ÿå‘½å‘¨æœŸ-LifeCycle"><a href="#React-å…¥é—¨ï¼ˆä¸‰ï¼‰-â€“-ç”Ÿå‘½å‘¨æœŸ-LifeCycle" class="headerlink" title="React å…¥é—¨ï¼ˆä¸‰ï¼‰ â€“ ç”Ÿå‘½å‘¨æœŸ LifeCycle"></a>React å…¥é—¨ï¼ˆä¸‰ï¼‰ â€“ ç”Ÿå‘½å‘¨æœŸ LifeCycle</h2><h2 id="å¼•è¨€"><a href="#å¼•è¨€" class="headerlink" title="å¼•è¨€"></a>å¼•è¨€</h2><p>åœ¨ React ä¸­ä¸ºæˆ‘ä»¬æä¾›äº†ä¸€äº›ç”Ÿå‘½å‘¨æœŸé’©å­å‡½æ•°ï¼Œè®©æˆ‘ä»¬èƒ½åœ¨ React æ‰§è¡Œçš„é‡è¦é˜¶æ®µï¼Œåœ¨é’©å­å‡½æ•°ä¸­åšä¸€äº›äº‹æƒ…ã€‚é‚£ä¹ˆåœ¨ React çš„ç”Ÿå‘½å‘¨æœŸä¸­ï¼Œæœ‰å“ªäº›é’©å­å‡½æ•°å‘¢ï¼Œæˆ‘ä»¬æ¥æ€»ç»“ä¸€ä¸‹</p>
<h2 id="React-ç”Ÿå‘½å‘¨æœŸ"><a href="#React-ç”Ÿå‘½å‘¨æœŸ" class="headerlink" title="React ç”Ÿå‘½å‘¨æœŸ"></a>React ç”Ÿå‘½å‘¨æœŸ</h2><p>React ç”Ÿå‘½å‘¨æœŸä¸»è¦åŒ…æ‹¬ä¸‰ä¸ªé˜¶æ®µï¼šåˆå§‹åŒ–é˜¶æ®µï¼Œæ›´æ–°é˜¶æ®µï¼Œé”€æ¯é˜¶æ®µ</p>
<h3 id="åˆå§‹åŒ–é˜¶æ®µ"><a href="#åˆå§‹åŒ–é˜¶æ®µ" class="headerlink" title="åˆå§‹åŒ–é˜¶æ®µ"></a>åˆå§‹åŒ–é˜¶æ®µ</h3><h4 id="1-constructor-æ‰§è¡Œ"><a href="#1-constructor-æ‰§è¡Œ" class="headerlink" title="1. constructor æ‰§è¡Œ"></a>1. constructor æ‰§è¡Œ</h4><p><code>constructor</code> åœ¨ç»„ä»¶åˆå§‹åŒ–çš„æ—¶å€™åªä¼šæ‰§è¡Œä¸€æ¬¡</p>
<p>é€šå¸¸å®ƒç”¨äºåšè¿™ä¸¤ä»¶äº‹</p>
<ol>
<li>åˆå§‹åŒ–å‡½æ•°å†…éƒ¨ <code>state</code></li>
<li>ç»‘å®šå‡½æ•°</li>
</ol>
<pre class=" language-js"><code class="language-js"><span class="token function">constructor</span><span class="token punctuation">(</span>props<span class="token punctuation">)</span> <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'è¿›å…¥æ„é€ å™¨'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">super</span><span class="token punctuation">(</span>props<span class="token punctuation">)</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>state <span class="token operator">=</span> <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span> count<span class="token punctuation">:</span> <span class="token number">0</span> <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>
<span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>
</code></pre>
<p>ç°åœ¨æˆ‘ä»¬é€šå¸¸ä¸ä¼šä½¿ç”¨ <code>constructor</code> å±æ€§ï¼Œè€Œæ˜¯æ”¹ç”¨ç±»åŠ ç®­å¤´å‡½æ•°çš„æ–¹æ³•ï¼Œæ¥æ›¿ä»£ <code>constructor</code> </p>
<p>ä¾‹å¦‚ï¼Œæˆ‘ä»¬å¯ä»¥è¿™æ ·åˆå§‹åŒ– <code>state</code></p>
<pre class=" language-js"><code class="language-js">state <span class="token operator">=</span> <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>
    count<span class="token punctuation">:</span> <span class="token number">0</span>
<span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span><span class="token punctuation">;</span>
</code></pre>
<h4 id="2-static-getDerivedStateFromProps-æ‰§è¡Œ-ï¼ˆæ–°é’©å­ï¼‰"><a href="#2-static-getDerivedStateFromProps-æ‰§è¡Œ-ï¼ˆæ–°é’©å­ï¼‰" class="headerlink" title="2. static getDerivedStateFromProps æ‰§è¡Œ ï¼ˆæ–°é’©å­ï¼‰"></a>2. static getDerivedStateFromProps æ‰§è¡Œ ï¼ˆæ–°é’©å­ï¼‰</h4><p>è¿™ä¸ªæ˜¯ React æ–°ç‰ˆæœ¬ä¸­æ–°å¢çš„2ä¸ªé’©å­ä¹‹ä¸€ï¼Œæ®è¯´å¾ˆå°‘ç”¨ã€‚</p>
<p><code>getDerivedStateFromProps</code> åœ¨åˆå§‹åŒ–å’Œæ›´æ–°ä¸­éƒ½ä¼šè¢«è°ƒç”¨ï¼Œå¹¶ä¸”åœ¨ <code>render</code> æ–¹æ³•ä¹‹å‰è°ƒç”¨ï¼Œå®ƒè¿”å›ä¸€ä¸ªå¯¹è±¡ç”¨æ¥æ›´æ–° <code>state</code></p>
<p><code>getDerivedStateFromProps</code> æ˜¯ç±»ä¸Šç›´æ¥ç»‘å®šçš„é™æ€ï¼ˆ<code>static</code>ï¼‰æ–¹æ³•ï¼Œå®ƒæ¥æ”¶ä¸¤ä¸ªå‚æ•° <code>props</code> å’Œ <code>state</code></p>
<p><code>props</code> æ˜¯å³å°†è¦æ›¿ä»£ <code>state</code> çš„å€¼ï¼Œè€Œ <code>state</code> æ˜¯å½“å‰æœªæ›¿ä»£å‰çš„å€¼</p>
<blockquote>
<p>æ³¨æ„ï¼š<code>state</code> çš„å€¼åœ¨ä»»ä½•æ—¶å€™éƒ½å–å†³äºä¼ å…¥çš„ <code>props</code> ï¼Œä¸ä¼šå†æ”¹å˜</p>
</blockquote>
<p>å¦‚ä¸‹</p>
<pre class=" language-js"><code class="language-js"><span class="token keyword">static</span> <span class="token function">getDerivedStateFromProps</span><span class="token punctuation">(</span>props<span class="token punctuation">)</span> <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> props
<span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>
ReactDOM<span class="token punctuation">.</span><span class="token function">render</span><span class="token punctuation">(</span><span class="token operator">&lt;</span>Count count<span class="token operator">=</span><span class="token string">"109"</span><span class="token operator">/</span><span class="token operator">></span><span class="token punctuation">,</span>document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">'.test'</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
</code></pre>
<p><code>count</code> çš„å€¼ä¸ä¼šæ”¹å˜ï¼Œä¸€ç›´æ˜¯ 109</p>
<h4 id="2-componentWillMount-æ‰§è¡Œï¼ˆå³å°†åºŸå¼ƒï¼‰"><a href="#2-componentWillMount-æ‰§è¡Œï¼ˆå³å°†åºŸå¼ƒï¼‰" class="headerlink" title="2. componentWillMount æ‰§è¡Œï¼ˆå³å°†åºŸå¼ƒï¼‰"></a>2. componentWillMount æ‰§è¡Œï¼ˆå³å°†åºŸå¼ƒï¼‰</h4><blockquote>
<p>å¦‚æœå­˜åœ¨ <code>getDerivedStateFromProps</code> å’Œ <code>getSnapshotBeforeUpdate</code> å°±ä¸ä¼šæ‰§è¡Œç”Ÿå‘½å‘¨æœŸ<code>componentWillMount</code>ã€‚</p>
</blockquote>
<p>è¯¥æ–¹æ³•åªåœ¨æŒ‚è½½çš„æ—¶å€™è°ƒç”¨ä¸€æ¬¡ï¼Œè¡¨ç¤ºç»„ä»¶å°†è¦è¢«æŒ‚è½½ï¼Œå¹¶ä¸”åœ¨ <code>render</code> æ–¹æ³•ä¹‹å‰è°ƒç”¨ã€‚</p>
<p>è¿™ä¸ªæ–¹æ³•åœ¨ React 18ç‰ˆæœ¬ä¸­å°†è¦è¢«åºŸå¼ƒï¼Œå®˜æ–¹è§£é‡Šæ˜¯åœ¨ React å¼‚æ­¥æœºåˆ¶ä¸‹ï¼Œå¦‚æœæ»¥ç”¨è¿™ä¸ªé’©å­å¯èƒ½ä¼šæœ‰ Bug</p>
<h4 id="3-render-æ‰§è¡Œ"><a href="#3-render-æ‰§è¡Œ" class="headerlink" title="3. render æ‰§è¡Œ"></a>3. render æ‰§è¡Œ</h4><p><code>render()</code> æ–¹æ³•æ˜¯ç»„ä»¶ä¸­å¿…é¡»å®ç°çš„æ–¹æ³•ï¼Œç”¨äºæ¸²æŸ“ DOM ï¼Œä½†æ˜¯å®ƒä¸ä¼šçœŸæ­£çš„æ“ä½œ DOMï¼Œå®ƒçš„ä½œç”¨æ˜¯æŠŠéœ€è¦çš„ä¸œè¥¿è¿”å›å‡ºå»ã€‚</p>
<p>å®ç°æ¸²æŸ“ DOM æ“ä½œçš„æ˜¯ <code>ReactDOM.render()</code></p>
<blockquote>
<p>æ³¨æ„ï¼šé¿å…åœ¨ <code>render</code> ä¸­ä½¿ç”¨ <code>setState</code> ï¼Œå¦åˆ™ä¼šæ­»å¾ªç¯</p>
</blockquote>
<h4 id="4-componentDidMount-æ‰§è¡Œ"><a href="#4-componentDidMount-æ‰§è¡Œ" class="headerlink" title="4. componentDidMount æ‰§è¡Œ"></a>4. componentDidMount æ‰§è¡Œ</h4><p><code>componentDidMount</code> çš„æ‰§è¡Œæ„å‘³ç€åˆå§‹åŒ–æŒ‚è½½æ“ä½œå·²ç»åŸºæœ¬å®Œæˆï¼Œå®ƒä¸»è¦ç”¨äºç»„ä»¶æŒ‚è½½å®ŒæˆååšæŸäº›æ“ä½œ</p>
<p>è¿™ä¸ªæŒ‚è½½å®ŒæˆæŒ‡çš„æ˜¯ï¼šç»„ä»¶æ’å…¥ DOM tree </p>
<h4 id="åˆå§‹åŒ–é˜¶æ®µæ€»ç»“"><a href="#åˆå§‹åŒ–é˜¶æ®µæ€»ç»“" class="headerlink" title="åˆå§‹åŒ–é˜¶æ®µæ€»ç»“"></a>åˆå§‹åŒ–é˜¶æ®µæ€»ç»“</h4><p>æ‰§è¡Œé¡ºåº <code>constructor</code> -&gt; <code>getDerivedStateFromProps</code> æˆ–è€… <code>componentWillMount</code> -&gt; <code>render</code> -&gt; <code>componentDidMount</code></p>
<p><img src="https://ljcimg.oss-cn-beijing.aliyuncs.com/img/image-20210821102153009.png" alt="image-20210821102153009"></p>
<h3 id="æ›´æ–°é˜¶æ®µ"><a href="#æ›´æ–°é˜¶æ®µ" class="headerlink" title="æ›´æ–°é˜¶æ®µ"></a>æ›´æ–°é˜¶æ®µ</h3><p><img src="https://ljcimg.oss-cn-beijing.aliyuncs.com/img/image-20210821102622645.png" alt="image-20210821102622645"></p>
<p>è¿™é‡Œè®°å½•æ–°ç”Ÿå‘½å‘¨æœŸçš„æµç¨‹</p>
<h4 id="1-getDerivedStateFromProps-æ‰§è¡Œ"><a href="#1-getDerivedStateFromProps-æ‰§è¡Œ" class="headerlink" title="1. getDerivedStateFromProps æ‰§è¡Œ"></a>1. getDerivedStateFromProps æ‰§è¡Œ</h4><p>æ‰§è¡Œç”Ÿå‘½å‘¨æœŸ<code>getDerivedStateFromProps</code>ï¼Œ è¿”å›çš„å€¼ç”¨äºåˆå¹¶ <code>state</code>ï¼Œç”Ÿæˆæ–°çš„<code>state</code>ã€‚</p>
<h4 id="2-shouldComponentUpdat-æ‰§è¡Œ"><a href="#2-shouldComponentUpdat-æ‰§è¡Œ" class="headerlink" title="2. shouldComponentUpdat æ‰§è¡Œ"></a>2. shouldComponentUpdat æ‰§è¡Œ</h4><p><code>shouldComponentUpdate()</code> åœ¨ç»„ä»¶æ›´æ–°ä¹‹å‰è°ƒç”¨ï¼Œå¯ä»¥é€šè¿‡è¿”å›å€¼æ¥æ§åˆ¶ç»„ä»¶æ˜¯å¦æ›´æ–°ï¼Œå…è®¸æ›´æ–°è¿”å› <code>true</code> ï¼Œåä¹‹ä¸æ›´æ–°</p>
<h4 id="3-render-æ‰§è¡Œ-1"><a href="#3-render-æ‰§è¡Œ-1" class="headerlink" title="3. render æ‰§è¡Œ"></a>3. render æ‰§è¡Œ</h4><p>åœ¨æ§åˆ¶æ˜¯å¦æ›´æ–°çš„å‡½æ•°ä¸­ï¼Œå¦‚æœè¿”å› <code>true</code> æ‰ä¼šæ‰§è¡Œ <code>render</code> ,å¾—åˆ°æœ€æ–°çš„ <code>React element</code></p>
<h4 id="4-getSnapshotBeforeUpdate-æ‰§è¡Œ"><a href="#4-getSnapshotBeforeUpdate-æ‰§è¡Œ" class="headerlink" title="4. getSnapshotBeforeUpdate æ‰§è¡Œ"></a>4. getSnapshotBeforeUpdate æ‰§è¡Œ</h4><p>åœ¨æœ€è¿‘ä¸€æ¬¡çš„æ¸²æŸ“è¾“å‡ºä¹‹å‰è¢«æäº¤ä¹‹å‰è°ƒç”¨ï¼Œä¹Ÿå°±æ˜¯å³å°†æŒ‚è½½æ—¶è°ƒç”¨</p>
<p>ç›¸å½“äºæ·˜å®è´­ç‰©çš„å¿«ç…§ï¼Œä¼šä¿ç•™ä¸‹å•å‰çš„å•†å“å†…å®¹ï¼Œåœ¨ React ä¸­å°±ç›¸å½“äºæ˜¯ å³å°†æ›´æ–°å‰çš„çŠ¶æ€</p>
<blockquote>
<p>å®ƒå¯ä»¥ä½¿ç»„ä»¶åœ¨ DOM çœŸæ­£æ›´æ–°ä¹‹å‰æ•è·ä¸€äº›ä¿¡æ¯ï¼ˆä¾‹å¦‚æ»šåŠ¨ä½ç½®ï¼‰ï¼Œæ­¤ç”Ÿå‘½å‘¨æœŸè¿”å›çš„ä»»ä½•å€¼éƒ½ä¼šä½œä¸ºå‚æ•°ä¼ é€’ç»™ <code>componentDidUpdate()</code>ã€‚å¦‚ä¸éœ€è¦ä¼ é€’ä»»ä½•å€¼ï¼Œé‚£ä¹ˆè¯·è¿”å› null</p>
</blockquote>
<h4 id="5-componentDidUpdate-æ‰§è¡Œ"><a href="#5-componentDidUpdate-æ‰§è¡Œ" class="headerlink" title="5. componentDidUpdate æ‰§è¡Œ"></a>5. componentDidUpdate æ‰§è¡Œ</h4><p>ç»„ä»¶åœ¨æ›´æ–°å®Œæ¯•åä¼šç«‹å³è¢«è°ƒç”¨ï¼Œé¦–æ¬¡æ¸²æŸ“ä¸ä¼šè°ƒç”¨</p>
<hr>
<p>åˆ°æ­¤æ›´æ–°é˜¶æ®µå°±ç»“æŸäº†ï¼Œåœ¨ React æ—§ç‰ˆæœ¬ä¸­æœ‰ä¸¤ä¸ªä¸æ›´æ–°æœ‰å…³çš„é’©å­å‡½æ•° <code>componentWillReceiveProps</code> å’Œ <code>componentWillUpdate</code> éƒ½å³å°†åºŸå¼ƒ</p>
<p><code>componentWillReceiveProps</code> æˆ‘ä¸å¤ªæ‡‚</p>
<p><code>componentWillUpdate</code> åœ¨ <code>render</code> ä¹‹å‰æ‰§è¡Œï¼Œè¡¨ç¤ºç»„ä»¶å°†è¦æ›´æ–°</p>
<h3 id="é”€æ¯é˜¶æ®µ"><a href="#é”€æ¯é˜¶æ®µ" class="headerlink" title="é”€æ¯é˜¶æ®µ"></a>é”€æ¯é˜¶æ®µ</h3><h4 id="componentWillUnmount-æ‰§è¡Œ"><a href="#componentWillUnmount-æ‰§è¡Œ" class="headerlink" title="componentWillUnmount  æ‰§è¡Œ"></a>componentWillUnmount  æ‰§è¡Œ</h4><p>åœ¨ç»„ä»¶å³å°†è¢«å¸è½½æˆ–é”€æ¯æ—¶è¿›è¡Œè°ƒç”¨ã€‚</p>
<h2 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h2><p><strong>åˆå§‹åŒ–</strong></p>
<ul>
<li>constructor()</li>
<li>static getDerivedStateFromProps()</li>
<li>render()</li>
<li>componentDidMount()</li>
</ul>
<p><strong>æ›´æ–°</strong></p>
<ul>
<li>static getDerivedStateFromProps()</li>
<li>shouldComponentUpdate()</li>
<li>render()</li>
<li>getSnapshotBeforeUpdate()</li>
<li>componentDidUpdate()</li>
</ul>
<p><strong>é”€æ¯</strong></p>
<ul>
<li>componentWillUnmount()</li>
</ul>
<hr>
<blockquote>
<p>åˆå­¦ React ï¼Œå¯¹ç”Ÿå‘½å‘¨æœŸè¿˜æ²¡æœ‰æ·±å…¥çš„ç†è§£ï¼Œåªèƒ½å¤§æ¦‚çŸ¥é“åœ¨ä»€ä¹ˆæ—¶å€™è§¦å‘å“ªä¸ªé’©å­ï¼Œå¸Œæœ›å„ä½å¤§ä½¬å¤šå¤šæŒ‡æ•™ï¼Œæœ‰ä»€ä¹ˆå»ºè®®å¯ä»¥æä¸€æ ğŸ™</p>
</blockquote>
<h2 id="Reactå…¥é—¨å­¦ä¹ ï¼ˆå››ï¼‰â€“-diffing-ç®—æ³•"><a href="#Reactå…¥é—¨å­¦ä¹ ï¼ˆå››ï¼‰â€“-diffing-ç®—æ³•" class="headerlink" title="Reactå…¥é—¨å­¦ä¹ ï¼ˆå››ï¼‰â€“ diffing ç®—æ³•"></a>Reactå…¥é—¨å­¦ä¹ ï¼ˆå››ï¼‰â€“ diffing ç®—æ³•</h2><h2 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h2><p>diff ç®—æ³•æ˜¯ React æå‡æ¸²æŸ“æ€§èƒ½çš„ä¸€ç§ä¼˜åŒ–ç®—æ³•ï¼Œåœ¨ React ä¸­æœ‰ç€å¾ˆé‡è¦çš„åœ°ä½ï¼Œä¹Ÿä¸æ­¢äº React ï¼Œåœ¨ Vue ä¸­ä¹Ÿæœ‰ diff ç®—æ³•ï¼Œä¼¼ä¹æ²¡æœ‰å·®åˆ«ã€‚åœ¨æœ€è¿‘çš„ React å­¦ä¹ ä¸­ï¼Œå­¦åˆ°äº† diff ç®—æ³•ï¼Œæ„Ÿè§‰è§†é¢‘ä¸­çš„å†…å®¹æœ‰ç‚¹æµ…ï¼Œå¯¹ diff ç®—æ³•ä¸å¤Ÿæ·±å…¥ï¼Œå› æ­¤æƒ³è¦æ·±å…¥çš„äº†è§£ä»¥ä¸‹ diff ç®—æ³•ã€‚äºæ˜¯åœ¨æ˜é‡‘ï¼ŒçŸ¥ä¹ï¼ŒCSDN ç­‰å¹³å°ä¸Šï¼Œçœ‹äº†å¤§é‡çš„åšå®¢ï¼Œéƒ½éå¸¸åœ°ä¸é”™ï¼Œå¯æƒœçœ‹ä¸æ˜ç™½ï¼Œwwwwã€‚æ‰€ä»¥è¿™ç¯‡æ–‡ç« åªæ˜¯è‡ªå·±å¯¹äº diff ç®—æ³•çš„ä¸€ç‚¹ç†è§£ï¼Œæœ‰ä»€ä¹ˆé—®é¢˜æˆ–è€…é”™è¯¯çš„åœ°æ–¹ï¼Œå¤§å®¶<strong>ä¸€å®šè¦æŒ‡å‡º</strong>ï¼</p>
<h2 id="ä»€ä¹ˆæ˜¯è™šæ‹Ÿ-DOM-ï¼Ÿ"><a href="#ä»€ä¹ˆæ˜¯è™šæ‹Ÿ-DOM-ï¼Ÿ" class="headerlink" title="ä»€ä¹ˆæ˜¯è™šæ‹Ÿ DOM ï¼Ÿ"></a>ä»€ä¹ˆæ˜¯è™šæ‹Ÿ DOM ï¼Ÿ</h2><p>åœ¨è°ˆ diff ç®—æ³•ä¹‹å‰ï¼Œæˆ‘ä»¬éœ€è¦å…ˆäº†è§£è™šæ‹Ÿ DOM ã€‚å®ƒæ˜¯ä¸€ç§ç¼–ç¨‹æ¦‚å¿µï¼Œåœ¨è¿™ä¸ªæ¦‚å¿µé‡Œï¼Œä»¥ä¸€ç§è™šæ‹Ÿçš„è¡¨ç°å½¢å¼è¢«ä¿å­˜åœ¨å†…å­˜ä¸­ã€‚åœ¨ React ä¸­ï¼Œrender æ‰§è¡Œçš„ç»“æœå¾—åˆ°çš„å¹¶ä¸æ˜¯çœŸæ­£çš„ DOM èŠ‚ç‚¹ï¼Œè€Œæ˜¯ JavaScript å¯¹è±¡</p>
<blockquote>
<p>è™šæ‹Ÿ DOM åªä¿ç•™äº†çœŸå® DOM èŠ‚ç‚¹çš„ä¸€äº›<strong>åŸºæœ¬å±æ€§ï¼Œå’ŒèŠ‚ç‚¹ä¹‹é—´çš„å±‚æ¬¡å…³ç³»</strong>ï¼Œå®ƒç›¸å½“äºå»ºç«‹åœ¨ JavaScript å’Œ DOM ä¹‹é—´çš„ä¸€å±‚â€œç¼“å­˜â€</p>
</blockquote>
<pre class=" language-html"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>hello<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span><span class="token punctuation">></span></span>hello world!<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>
</code></pre>
<p>ä¸Šé¢çš„è¿™æ®µä»£ç ä¼šè½¬åŒ–å¯ä»¥è½¬åŒ–ä¸ºè™šæ‹Ÿ DOM ç»“æ„</p>
<pre class=" language-json"><code class="language-json">&amp;#<span class="token number">123</span><span class="token punctuation">;</span>
    tag<span class="token operator">:</span> <span class="token string">"div"</span><span class="token punctuation">,</span>
    props<span class="token operator">:</span> &amp;#<span class="token number">123</span><span class="token punctuation">;</span>
        class<span class="token operator">:</span> <span class="token string">"hello"</span>
    &amp;#<span class="token number">125</span><span class="token punctuation">;</span><span class="token punctuation">,</span>
    children<span class="token operator">:</span> <span class="token punctuation">[</span>&amp;#<span class="token number">123</span><span class="token punctuation">;</span>
        tag<span class="token operator">:</span> <span class="token string">"span"</span><span class="token punctuation">,</span>
        props<span class="token operator">:</span> &amp;#<span class="token number">123</span><span class="token punctuation">;</span>&amp;#<span class="token number">125</span><span class="token punctuation">;</span><span class="token punctuation">,</span>
        children<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">"hello world!"</span><span class="token punctuation">]</span>
    &amp;#<span class="token number">125</span><span class="token punctuation">;</span><span class="token punctuation">]</span>
&amp;#<span class="token number">125</span><span class="token punctuation">;</span>
</code></pre>
<p>å…¶ä¸­å¯¹äºä¸€ä¸ªèŠ‚ç‚¹å¿…å¤‡çš„ä¸‰ä¸ªå±æ€§ <code>tagï¼Œpropsï¼Œchildren</code></p>
<ul>
<li>tag æŒ‡å®šå…ƒç´ çš„<strong>æ ‡ç­¾</strong>ç±»å‹ï¼Œå¦‚â€œ<code>li</code>ï¼Œ<code>div</code>â€</li>
<li>props æŒ‡å®šå…ƒç´ èº«ä¸Šçš„å±æ€§ï¼Œå¦‚ <code>class</code> ï¼Œ<code>style</code>ï¼Œè‡ªå®šä¹‰å±æ€§</li>
<li>children æŒ‡å®šå…ƒç´ æ˜¯å¦æœ‰<strong>å­èŠ‚ç‚¹</strong>ï¼Œå‚æ•°ä»¥<strong>æ•°ç»„</strong>å½¢å¼ä¼ å…¥</li>
</ul>
<p>è€Œæˆ‘ä»¬åœ¨ render ä¸­ç¼–å†™çš„ JSX ä»£ç å°±æ˜¯ä¸€ç§è™šæ‹Ÿ DOM ç»“æ„ã€‚</p>
<h2 id="ä»€ä¹ˆæ˜¯-diff-ç®—æ³•ï¼Ÿ"><a href="#ä»€ä¹ˆæ˜¯-diff-ç®—æ³•ï¼Ÿ" class="headerlink" title="ä»€ä¹ˆæ˜¯ diff ç®—æ³•ï¼Ÿ"></a>ä»€ä¹ˆæ˜¯ diff ç®—æ³•ï¼Ÿ</h2><p>å…¶å®åˆšå¼€å§‹å­¦ä¹  React çš„æ—¶å€™ï¼Œå¾ˆå¤šäººå¯èƒ½éƒ½å¬è¯´è¿‡ React å¾ˆé«˜æ•ˆï¼Œæ€§èƒ½å¾ˆå¥½è¿™ç±»çš„è¯è¯­ï¼Œè¿™å…¶å®å°±æ˜¯å¾—ç›Šäº diff ç®—æ³•å’Œ Virturl DOM çš„å®Œç¾ç»“åˆã€‚</p>
<p>å•çº¯çš„æˆ‘åˆšå¼€å§‹ä¼šè®¤ä¸º</p>
<blockquote>
<p>React ä¹Ÿåªä¸è¿‡æ˜¯å¼•å…¥äº†åˆ«äººçš„ diff ç®—æ³•è€Œå·²ï¼Œèƒ½æœ‰å¤šå‰å®³ï¼Œåˆä¸æ˜¯åŸåˆ› ï¼Ÿ</p>
</blockquote>
<p>ä½†å½“æˆ‘æŸ¥é˜…äº†ä¼—å¤šèµ„æ–™åï¼Œå‘ç°è¢«æåŠæœ€å¤šçš„æ˜¯ä¸€ä¸ª â€œä¼ ç»Ÿ diff ç®—æ³•â€</p>
<p>å…¶å® React é’ˆå¯¹ diff  ç®—æ³•åšå‡ºçš„ä¼˜åŒ–ï¼Œæ‰æ˜¯æˆ‘ä»¬åº”å½“å­¦ä¹ çš„</p>
<p>React å°†åŸå…ˆæ—¶é—´å¤æ‚åº¦ä¸º O($n^3$) çš„ä¼ ç»Ÿç®—æ³•ï¼Œä¼˜åŒ–åˆ°äº† O(n)</p>
<p><strong>å¤§è‡´æ‰§è¡Œè¿‡ç¨‹å›¾</strong></p>
<p><img src="https://ljcimg.oss-cn-beijing.aliyuncs.com/img/image-20210824173128172.png" alt="image-20210824173128172"></p>
<p>é‚£ React æ˜¯å¦‚ä½•å®ç°çš„å‘¢ï¼Ÿ</p>
<h2 id="ä¸‰ä¸ªç­–ç•¥"><a href="#ä¸‰ä¸ªç­–ç•¥" class="headerlink" title="ä¸‰ä¸ªç­–ç•¥"></a>ä¸‰ä¸ªç­–ç•¥</h2><p>ä¸ºäº†å°†å¤æ‚åº¦é™åˆ° O(n)ï¼ŒReact åŸºäºè¿™ä¸‰ä¸ªç­–ç•¥è¿›è¡Œäº†ç®—æ³•ä¼˜åŒ–</p>
<ol>
<li>Web UI ä¸­ DOM èŠ‚ç‚¹è·¨å±‚çº§çš„<strong>ç§»åŠ¨æ“ä½œç‰¹åˆ«å°‘</strong>ï¼Œå¯ä»¥å¿½ç•¥ä¸è®¡ã€‚</li>
<li>æ‹¥æœ‰ç›¸åŒç±»çš„ä¸¤ä¸ªç»„ä»¶å°†ä¼šç”Ÿæˆ<strong>ç›¸ä¼¼</strong>çš„æ ‘å½¢ç»“æ„ï¼Œæ‹¥æœ‰ä¸åŒç±»çš„ä¸¤ä¸ªç»„ä»¶å°†ä¼šç”Ÿæˆ<strong>ä¸åŒ</strong>çš„æ ‘å½¢ç»“æ„ã€‚</li>
<li>å¯¹äºåŒä¸€å±‚çº§çš„ä¸€ç»„å­èŠ‚ç‚¹ï¼Œå®ƒä»¬å¯ä»¥é€šè¿‡å”¯ä¸€ id è¿›è¡ŒåŒºåˆ†ã€‚</li>
</ol>
<p>é’ˆå¯¹è¿™ä¸‰ä¸ªç­–ç•¥ï¼ŒReact åˆ†åˆ«å¯¹ <code>tree diff</code>ã€<code>component diff</code> ä»¥åŠ <code>element diff</code> è¿›è¡Œç®—æ³•ä¼˜åŒ–</p>
<h3 id="tree-diff-åˆ†å±‚æ±‚å¼‚"><a href="#tree-diff-åˆ†å±‚æ±‚å¼‚" class="headerlink" title="tree diff åˆ†å±‚æ±‚å¼‚"></a>tree diff åˆ†å±‚æ±‚å¼‚</h3><p>é¦–å…ˆä¼šå°†æ–°æ—§ä¸¤ä¸ª DOM æ ‘ï¼Œè¿›è¡Œæ¯”è¾ƒï¼Œè¿™ä¸ªæ¯”è¾ƒæŒ‡çš„æ˜¯åˆ†å±‚æ¯”è¾ƒã€‚åˆç”±äº DOM èŠ‚ç‚¹è·¨å±‚çº§çš„ç§»åŠ¨æ“ä½œå¾ˆå°‘ï¼Œå¿½ç•¥ä¸è®¡ã€‚React é€šè¿‡ updataDepth å¯¹ è™šæ‹Ÿ DOM æ ‘è¿›è¡Œå±‚çº§æ§åˆ¶ï¼Œåªä¼šå¯¹åŒå±‚èŠ‚ç‚¹è¿›è¡Œæ¯”è¾ƒï¼Œä¹Ÿå°±æ˜¯å›¾ä¸­åªä¼šå¯¹ç›¸åŒé¢œè‰²æ–¹æ¡†å†…çš„ DOM èŠ‚ç‚¹è¿›è¡Œæ¯”è¾ƒã€‚ä¾‹å¦‚ï¼š</p>
<p>å½“å¯¹æ¯”å‘ç°èŠ‚ç‚¹æ¶ˆå¤±æ—¶ï¼Œåˆ™è¯¥èŠ‚ç‚¹åŠå…¶å­èŠ‚ç‚¹éƒ½ä¼šè¢«å®Œå…¨åˆ é™¤ï¼Œä¸ä¼šè¿›è¡Œæ›´æ·±å±‚æ¬¡çš„æ¯”è¾ƒï¼Œè¿™æ ·åªéœ€è¦å¯¹æ ‘è¿›è¡Œä¸€æ¬¡éå†ï¼Œä¾¿èƒ½å®Œæˆæ•´é¢— DOM æ ‘çš„æ¯”è¾ƒ</p>
<p><img src="https://ljcimg.oss-cn-beijing.aliyuncs.com/img/image-20210824131810813.png" alt="image-20210824131810813"></p>
<p>è¿™é‡Œè¿˜æœ‰ä¸€ä¸ªå€¼å¾—å…³æ³¨çš„åœ°æ–¹ï¼š<strong>DOM èŠ‚ç‚¹è·¨å±‚çº§ç§»åŠ¨</strong></p>
<p>ä¸ºä»€ä¹ˆä¼šæå‡ºè¿™æ ·çš„é—®é¢˜å‘¢ï¼Œåœ¨ä¸Šé¢çš„åˆ é™¤åŸåˆ™ä¸­ï¼Œæˆ‘ä»¬å‘ç°å½“èŠ‚ç‚¹ä¸å­˜åœ¨äº†å°±ä¼šåˆ é™¤ï¼Œé‚£æˆ‘åªæ˜¯ç»™å®ƒæ¢ä½äº†ï¼Œå®ƒä¹Ÿä¼šåˆ é™¤æ•´ä¸ªèŠ‚ç‚¹åŠå…¶å­èŠ‚ç‚¹å—ï¼Ÿ</p>
<p><img src="https://ljcimg.oss-cn-beijing.aliyuncs.com/img/image-20210824155347956.png" alt="image-20210824155347956"></p>
<p>å¦‚å›¾ï¼Œæˆ‘ä»¬éœ€è¦å®ç°è¿™æ ·çš„ç§»åŠ¨ï¼Œä½ å¯èƒ½ä¼šä»¥ä¸ºå®ƒä¼šç›´æ¥è¿™æ ·ç§»åŠ¨</p>
<p><img src="https://ljcimg.oss-cn-beijing.aliyuncs.com/img/%E7%AD%96%E7%95%A51.gif" alt="ç­–ç•¥1"></p>
<p>ä½†æ˜¯å®é™…æƒ…å†µï¼Œå¹¶ä¸æ˜¯è¿™æ ·çš„ã€‚ç”±äº React åªä¼šç®€å•çš„è¿›è¡ŒåŒå±‚çº§èŠ‚ç‚¹ä½ç½®å˜åŒ–ï¼Œå¯¹äºä¸åŒå±‚çº§çš„èŠ‚ç‚¹ï¼Œåªæœ‰åˆ›å»ºå’Œåˆ é™¤æ“ä½œï¼Œå½“å‘ç° B èŠ‚ç‚¹æ¶ˆå¤±æ—¶ï¼Œå°±ä¼šé”€æ¯ Bï¼Œå½“å‘ç° C èŠ‚ç‚¹ä¸Šå¤šäº† B èŠ‚ç‚¹ï¼Œå°±ä¼šåˆ›å»º B ä»¥åŠå®ƒçš„å­èŠ‚ç‚¹ã€‚</p>
<p>å› æ­¤è¿™æ ·ä¼šéå¸¸çš„å¤æ‚ï¼Œæ‰€ä»¥ React å®˜æ–¹å¹¶ä¸å»ºè®®æˆ‘ä»¬è¿›è¡Œ DOM èŠ‚ç‚¹è·¨çº§æ“ä½œ</p>
<h3 id="component-diff"><a href="#component-diff" class="headerlink" title="component diff"></a>component diff</h3><p>åœ¨ç»„ä»¶å±‚é¢ä¸Šï¼Œä¹Ÿè¿›è¡Œäº†ä¼˜åŒ–</p>
<ul>
<li>å¦‚æœæ˜¯åŒä¸€ç±»å‹çš„ç»„ä»¶ï¼Œåˆ™æŒ‰ç…§åŸç­–ç•¥ç»§ç»­æ¯”è¾ƒ è™šæ‹Ÿ DOM tree</li>
<li>å¦‚æœä¸æ˜¯ï¼Œåˆ™å°†è¿™ä¸ªç»„ä»¶è®°ä¸º <code>dirty component</code> ï¼Œä»è€Œæ›¿æ¢æ•´ä¸ªç»„ä»¶ä¸‹çš„æ‰€æœ‰å­èŠ‚ç‚¹</li>
</ul>
<p>åŒæ—¶å¯¹äºåŒä¸€ç±»å‹çš„ç»„ä»¶ï¼Œæœ‰å¯èƒ½å…¶ <code>Virtual DOM</code> æ²¡æœ‰ä»»ä½•å˜åŒ–ï¼Œå¦‚æœèƒ½å¤Ÿç¡®åˆ‡çš„çŸ¥é“è¿™ç‚¹å°±å¯ä»¥èŠ‚çœå¤§é‡çš„ <code>diff</code> è¿ç®—çš„æ—¶é—´ï¼Œå› æ­¤ <code>React</code> å…è®¸ç”¨æˆ·é€šè¿‡ <code>shouldComponentUpdate()</code> åˆ¤æ–­è¯¥ç»„ä»¶æ˜¯å¦éœ€è¦è¿›è¡Œ <code>diff</code> ç®—æ³•åˆ†æ</p>
<p>æ€»çš„æ¥è¯´ï¼Œå¦‚æœä¸¤ä¸ªç»„ä»¶ç»“æ„ç›¸ä¼¼ï¼Œä½†è¢«è®¤å®šä¸ºäº†ä¸åŒç±»å‹çš„ç»„ä»¶ï¼Œåˆ™ä¸ä¼šæ¯”è¾ƒäºŒè€…çš„ç»“æ„ï¼Œè€Œæ˜¯ç›´æ¥åˆ é™¤</p>
<h3 id="element-diff"><a href="#element-diff" class="headerlink" title="element diff"></a>element diff</h3><p>element diff æ˜¯ä¸“é—¨é’ˆå¯¹åŒä¸€å±‚çº§çš„æ‰€æœ‰èŠ‚ç‚¹çš„ç­–ç•¥ã€‚å½“èŠ‚ç‚¹åœ¨åŒä¸€å±‚çº§æ—¶ï¼Œdiff æä¾›äº† 3ä¸ªèŠ‚ç‚¹æ“ä½œæ–¹æ³•ï¼šæ’å…¥ï¼Œç§»åŠ¨ï¼Œåˆ é™¤</p>
<p>å½“æˆ‘ä»¬è¦å®Œæˆå¦‚å›¾æ‰€ç¤ºæ“ä½œè½¬åŒ–æ—¶ï¼Œä¼šæœ‰å¾ˆå¤§çš„å›°éš¾ï¼Œå› ä¸ºåœ¨æ–°è€èŠ‚ç‚¹æ¯”è¾ƒçš„è¿‡ç¨‹ä¸­ï¼Œå‘ç°æ¯ä¸ªèŠ‚ç‚¹éƒ½è¦<strong>åˆ é™¤å†é‡æ–°åˆ›å»º</strong>ï¼Œä½†æ˜¯è¿™åªæ˜¯é‡æ–°æ’åºäº†è€Œå·²ï¼Œå¯¹æ€§èƒ½æå¤§çš„ä¸å‹å¥½ã€‚å› æ­¤ React ä¸­æå‡ºäº†ä¼˜åŒ–ç­–ç•¥ï¼š</p>
<p>å…è®¸æ·»åŠ <strong>å”¯ä¸€å€¼ key æ¥åŒºåˆ†èŠ‚ç‚¹</strong></p>
<p><img src="https://ljcimg.oss-cn-beijing.aliyuncs.com/img/image-20210824163240354.png" alt="image-20210824163240354"></p>
<p>å¼•å…¥ key çš„ä¼˜åŒ–ç­–ç•¥ï¼Œè®©æ€§èƒ½ä¸Šæœ‰äº†ç¿»å¤©è¦†åœ°çš„å˜åŒ–</p>
<p><strong>é‚£ key æœ‰ä»€ä¹ˆä½œç”¨å‘¢ï¼Ÿ</strong></p>
<p>å½“åŒä¸€å±‚çº§çš„èŠ‚ç‚¹æ·»åŠ äº† key å±æ€§åï¼Œå½“ä½ç½®å‘ç”Ÿå˜åŒ–æ—¶ã€‚react diff è¿›è¡Œæ–°æ—§èŠ‚ç‚¹æ¯”è¾ƒï¼Œå¦‚æœå‘ç°æœ‰ç›¸åŒçš„ key å°±ä¼šè¿›è¡Œç§»åŠ¨æ“ä½œï¼Œè€Œä¸ä¼šåˆ é™¤å†åˆ›å»º</p>
<p><strong>é‚£ key å…·ä½“æ˜¯å¦‚ä½•èµ·ä½œç”¨çš„å‘¢ï¼Ÿ</strong></p>
<p>é¦–å…ˆåœ¨ React ä¸­åªå…è®¸<strong>èŠ‚ç‚¹å³ç§»</strong></p>
<p>å› æ­¤å¯¹äºä¸Šå›¾ä¸­çš„è½¬åŒ–ï¼Œåªä¼šè¿›è¡Œ Aï¼ŒC çš„ç§»åŠ¨</p>
<p>åˆ™åªéœ€è¦å¯¹ç§»åŠ¨çš„èŠ‚ç‚¹è¿›è¡Œæ›´æ–°æ¸²æŸ“ï¼Œä¸ç§»åŠ¨çš„åˆ™ä¸éœ€è¦æ›´æ–°æ¸²æŸ“</p>
<p><strong>ä¸ºä»€ä¹ˆä¸èƒ½ç”¨ index ä½œä¸º key å€¼å‘¢ï¼Ÿ</strong></p>
<p><code>index</code> ä½œä¸º <code>key</code> ï¼Œå¦‚æœæˆ‘ä»¬åˆ é™¤äº†ä¸€ä¸ªèŠ‚ç‚¹ï¼Œé‚£ä¹ˆæ•°ç»„çš„åä¸€é¡¹å¯èƒ½ä¼šå‰ç§»ï¼Œè¿™ä¸ªæ—¶å€™ç§»åŠ¨çš„èŠ‚ç‚¹å’Œåˆ é™¤çš„èŠ‚ç‚¹å°±æ˜¯ç›¸åŒçš„ <code>key</code>  ï¼Œåœ¨<code>react</code>ä¸­ï¼Œå¦‚æœ <code>key</code> ç›¸åŒï¼Œå°±ä¼šè§†ä¸º<strong>ç›¸åŒçš„ç»„ä»¶</strong>ï¼Œä½†è¿™ä¸¤ä¸ªç»„ä»¶æ˜¯ä¸åŒçš„ï¼Œè¿™æ ·å°±ä¼šå‡ºç°å¾ˆéº»çƒ¦çš„äº‹æƒ…ï¼Œä¾‹å¦‚ï¼šåºå·å’Œæ–‡æœ¬ä¸å¯¹åº”ç­‰é—®é¢˜</p>
<p>æ‰€ä»¥ä¸€å®šè¦ä¿è¯ <code>key</code> çš„å”¯ä¸€æ€§</p>
<h2 id="å»ºè®®"><a href="#å»ºè®®" class="headerlink" title="å»ºè®®"></a>å»ºè®®</h2><p>React å·²ç»å¸®æˆ‘ä»¬åšäº†å¾ˆå¤šäº†ï¼Œå‰©ä¸‹çš„éœ€è¦æˆ‘ä»¬å¤šåŠ æ³¨æ„ï¼Œæ‰èƒ½æœ‰æ›´å¥½çš„æ€§èƒ½</p>
<p>åŸºäºä¸‰ä¸ªç­–ç•¥æˆ‘ä»¬éœ€è¦æ³¨æ„</p>
<p><strong>tree diff å»ºè®®</strong>ï¼šå¼€å‘ç»„ä»¶æ—¶ï¼Œéœ€è¦æ³¨æ„ä¿æŒ DOM ç»“æ„ç¨³å®š</p>
<p><strong>component diff å»ºè®®</strong>ï¼šä½¿ç”¨ <code>shouldComponentUpdate()</code> æ¥å‡å°‘ä¸è¦çš„æ›´æ–°</p>
<p><strong>element diff å»ºè®®</strong>ï¼šå‡å°‘æœ€åä¸€ä¸ªèŠ‚ç‚¹ç§»åŠ¨åˆ°å¤´éƒ¨çš„æ“ä½œï¼Œè¿™æ ·å‰é¢çš„èŠ‚ç‚¹éƒ½éœ€è¦ç§»åŠ¨</p>
<h2 id="å‚è€ƒèµ„æ–™"><a href="#å‚è€ƒèµ„æ–™" class="headerlink" title="å‚è€ƒèµ„æ–™"></a>å‚è€ƒèµ„æ–™</h2><p><a target="_blank" rel="noopener" href="https://segmentfault.com/a/1190000016539430">è°ˆè°ˆReactä¸­Diffç®—æ³•çš„ç­–ç•¥åŠå®ç°</a></p>
<p><a target="_blank" rel="noopener" href="https://segmentfault.com/a/1190000011492275">React diffç®—æ³•</a></p>
<p><a target="_blank" rel="noopener" href="https://juejin.cn/post/6967626390380216334#heading-1">æµ…è°ˆreact è™šæ‹Ÿdomï¼Œdiffç®—æ³•ä¸keyæœºåˆ¶</a></p>
<hr>
<p>å…³äºæ‰‹å†™å®ç° diff ç®—æ³•ï¼Œè¿˜æœ‰ç‚¹éš¾åº¦ï¼Œè¿™äº‹ç­‰å­¦å®Œ React åå†è¯´å§</p>
<blockquote>
<p>éå¸¸æ„Ÿè°¢æ‚¨çš„é˜…è¯»ï¼Œæ¬¢è¿æå‡ºä½ çš„æ„è§ï¼Œæœ‰ä»€ä¹ˆé—®é¢˜æ¬¢è¿æŒ‡å‡ºï¼Œè°¢è°¢ï¼ğŸˆ</p>
</blockquote>
<h2 id="React-å…¥é—¨å­¦ä¹ ï¼ˆäº”ï¼‰â€“-è®¤è¯†è„šæ‰‹æ¶"><a href="#React-å…¥é—¨å­¦ä¹ ï¼ˆäº”ï¼‰â€“-è®¤è¯†è„šæ‰‹æ¶" class="headerlink" title="React å…¥é—¨å­¦ä¹ ï¼ˆäº”ï¼‰â€“ è®¤è¯†è„šæ‰‹æ¶"></a>React å…¥é—¨å­¦ä¹ ï¼ˆäº”ï¼‰â€“ è®¤è¯†è„šæ‰‹æ¶</h2><h2 id="ç®€ä»‹"><a href="#ç®€ä»‹" class="headerlink" title="ç®€ä»‹"></a>ç®€ä»‹</h2><p>è¿™ç¯‡æ–‡ç« ä¸»è¦å›´ç»• React ä¸­çš„è„šæ‰‹æ¶ï¼Œæ¥è§£å†³ä¸€ä¸‹å‡ ä¸ªé—®é¢˜</p>
<p><strong>çµé­‚ä¸‰é—®ï¼šæ˜¯ä»€ä¹ˆï¼Ÿä¸ºä»€ä¹ˆï¼Ÿæ€ä¹ˆåŠï¼Ÿ</strong></p>
<ol>
<li>ä»€ä¹ˆæ˜¯è„šæ‰‹æ¶ï¼Ÿ</li>
<li>ä¸ºä»€ä¹ˆè¦ç”¨è„šæ‰‹æ¶ï¼Ÿ</li>
<li>æ€ä¹ˆç”¨è„šæ‰‹æ¶ï¼Ÿ</li>
</ol>
<h2 id="ğŸ•-1-ä»€ä¹ˆæ˜¯-React-è„šæ‰‹æ¶ï¼Ÿ"><a href="#ğŸ•-1-ä»€ä¹ˆæ˜¯-React-è„šæ‰‹æ¶ï¼Ÿ" class="headerlink" title="ğŸ• 1. ä»€ä¹ˆæ˜¯ React è„šæ‰‹æ¶ï¼Ÿ"></a>ğŸ• 1. ä»€ä¹ˆæ˜¯ React è„šæ‰‹æ¶ï¼Ÿ</h2><p>åœ¨æˆ‘ä»¬çš„ç°å®ç”Ÿæ´»ä¸­ï¼Œè„šæ‰‹æ¶æœ€å¸¸ç”¨çš„ä½¿ç”¨åœºæ™¯æ˜¯åœ¨å·¥åœ°ï¼Œå®ƒæ˜¯ä¸ºäº†ä¿è¯æ–½å·¥é¡ºåˆ©çš„ã€æ–¹ä¾¿çš„è¿›è¡Œè€Œæ­å»ºçš„ï¼Œåœ¨å·¥åœ°ä¸Šæ­å»ºçš„è„šæ‰‹æ¶å¯ä»¥å¸®åŠ©å·¥äººä»¬é«˜æ ¡çš„å»å®Œæˆå·¥ä½œï¼ŒåŒæ—¶åœ¨å¤§æ¥¼å»ºè®¾å®Œæˆåï¼Œæ‹†é™¤è„šæ‰‹æ¶å¹¶ä¸ä¼šæœ‰ä»»ä½•çš„å½±å“ã€‚</p>
<p>åœ¨æˆ‘ä»¬çš„ React é¡¹ç›®ä¸­ï¼Œè„šæ‰‹æ¶çš„ä½œç”¨ä¸ä¹‹æœ‰å¼‚æ›²åŒå·¥ä¹‹å¦™</p>
<p>React è„šæ‰‹æ¶å…¶å®æ˜¯ä¸€ä¸ªå·¥å…·å¸®æˆ‘ä»¬å¿«é€Ÿçš„ç”Ÿæˆé¡¹ç›®çš„å·¥ç¨‹åŒ–ç»“æ„ï¼Œæ¯ä¸ªé¡¹ç›®çš„ç»“æ„å…¶å®å¤§è‡´éƒ½æ˜¯ç›¸åŒçš„ï¼Œæ‰€ä»¥ React ç»™æˆ‘æå‰çš„æ­å»ºå¥½äº†ï¼Œè¿™ä¹Ÿæ˜¯è„šæ‰‹æ¶å¼ºå¤§ä¹‹å¤„ä¹‹ä¸€ï¼Œä¹Ÿæ˜¯ç”¨ React åˆ›å»º SPA åº”ç”¨çš„æœ€ä½³æ–¹å¼</p>
<h2 id="ğŸ”-2-ä¸ºä»€ä¹ˆè¦ç”¨è„šæ‰‹æ¶ï¼Ÿ"><a href="#ğŸ”-2-ä¸ºä»€ä¹ˆè¦ç”¨è„šæ‰‹æ¶ï¼Ÿ" class="headerlink" title="ğŸ” 2. ä¸ºä»€ä¹ˆè¦ç”¨è„šæ‰‹æ¶ï¼Ÿ"></a>ğŸ” 2. ä¸ºä»€ä¹ˆè¦ç”¨è„šæ‰‹æ¶ï¼Ÿ</h2><p>åœ¨å‰é¢çš„ä»‹ç»ä¸­ï¼Œæˆ‘ä»¬ä¹Ÿæœ‰äº†ä¸€å®šçš„è®¤çŸ¥ï¼Œè„šæ‰‹æ¶å¯ä»¥å¸®åŠ©æˆ‘ä»¬å¿«é€Ÿçš„æ­å»ºä¸€ä¸ªé¡¹ç›®ç»“æ„</p>
<p>åœ¨æˆ‘ä¹‹å‰å­¦ä¹  <code>webpack</code> çš„è¿‡ç¨‹ä¸­ï¼Œæ¯æ¬¡éƒ½éœ€è¦é…ç½® <code>webpack.config.js</code> æ–‡ä»¶ï¼Œç”¨äºé…ç½®æˆ‘ä»¬é¡¹ç›®çš„ç›¸å…³ <code>loader</code> ã€<code>plugin</code>ï¼Œè¿™äº›æ“ä½œæ¯”è¾ƒå¤æ‚ï¼Œä½†æ˜¯å®ƒçš„é‡å¤æ€§å¾ˆé«˜ï¼Œè€Œä¸”åœ¨é¡¹ç›®æ‰“åŒ…æ—¶åˆå¾ˆæœ‰å¿…è¦ï¼Œé‚£ React è„šæ‰‹æ¶å°±å¸®åŠ©æˆ‘ä»¬åšäº†è¿™äº›ï¼Œå®ƒä¸éœ€è¦æˆ‘ä»¬äººä¸ºçš„å»ç¼–å†™ <code>webpack</code> é…ç½®æ–‡ä»¶ï¼Œå®ƒå°†è¿™äº›é…ç½®æ–‡ä»¶å…¨éƒ¨éƒ½å·²ç»æå‰çš„é…ç½®å¥½äº†ã€‚</p>
<p>æ®æˆ‘çŒœæµ‹æ˜¯ç›´æ¥è¾“å…¥ä¸€è¡Œå‘½ä»¤å°±èƒ½æ‰“åŒ…å®Œæˆã€‚</p>
<blockquote>
<p>ç›®å‰è¿˜æ²¡æœ‰å­¦ä¹ åˆ°å“ªï¼Œæœ¬æ–‡ä¸»è¦è®²<strong>è„šæ‰‹æ¶çš„é¡¹ç›®ç›®å½•ç»“æ„ä»¥åŠå®‰è£…</strong></p>
</blockquote>
<h2 id="ğŸŸ-3-æ€ä¹ˆç”¨-React-è„šæ‰‹æ¶ï¼Ÿ"><a href="#ğŸŸ-3-æ€ä¹ˆç”¨-React-è„šæ‰‹æ¶ï¼Ÿ" class="headerlink" title="ğŸŸ 3. æ€ä¹ˆç”¨ React è„šæ‰‹æ¶ï¼Ÿ"></a>ğŸŸ 3. æ€ä¹ˆç”¨ React è„šæ‰‹æ¶ï¼Ÿ</h2><p>è¿™ä¹Ÿæ˜¯è¿™ç¯‡æ–‡ç« çš„é‡ç‚¹ï¼Œå¦‚ä½•å»å®‰è£… React è„šæ‰‹æ¶ï¼Œå¹¶ä¸”ç†è§£å®ƒå…¶ä¸­çš„ç›¸å…³æ–‡ä»¶ä½œç”¨</p>
<p>é¦–å…ˆä»‹ç»å¦‚ä½•å®‰è£…è„šæ‰‹æ¶</p>
<h3 id="1-å®‰è£…-React-è„šæ‰‹æ¶"><a href="#1-å®‰è£…-React-è„šæ‰‹æ¶" class="headerlink" title="1. å®‰è£… React è„šæ‰‹æ¶"></a>1. å®‰è£… React è„šæ‰‹æ¶</h3><p>é¦–å…ˆç¡®ä¿å®‰è£…äº† <code>npm</code> å’Œ<code>Node</code>ï¼Œç‰ˆæœ¬ä¸è¦å¤ªå¤è€ï¼Œå…·ä½“æ˜¯å¤šå°‘ä¸å¤§æ¸…æ¥šï¼Œå»ºè®®è¿˜æ˜¯ç”¨  <code>npm update</code> æ›´æ–°ä¸€ä¸‹</p>
<p>ç„¶åæ‰“å¼€ cmd å‘½ä»¤è¡Œå·¥å…·ï¼Œå…¨å±€å®‰è£… <code>create-react-app</code></p>
<pre class=" language-shell"><code class="language-shell">npm i create-react-app -g
</code></pre>
<p>ç„¶åå¯ä»¥<strong>æ–°å»º</strong>ä¸€ä¸ªæ–‡ä»¶å¤¹ç”¨äºå­˜æ”¾é¡¹ç›®</p>
<p>åœ¨å½“å‰çš„æ–‡ä»¶å¤¹ä¸‹æ‰§è¡Œ</p>
<pre class=" language-shell"><code class="language-shell">create-react-app hello-react
</code></pre>
<p><strong>å¿«é€Ÿæ­å»ºé¡¹ç›®</strong></p>
<p>å†åœ¨ç”Ÿæˆå¥½çš„ <code>hello-react</code> æ–‡ä»¶å¤¹ä¸­æ‰§è¡Œ</p>
<pre class=" language-shell"><code class="language-shell">npm start
</code></pre>
<p><strong>å¯åŠ¨é¡¹ç›®</strong></p>
<p>æ¥ä¸‹æ¥æˆ‘ä»¬çœ‹çœ‹è¿™äº›æ–‡ä»¶éƒ½æœ‰ä»€ä¹ˆä½œç”¨</p>
<h3 id="2-è„šæ‰‹æ¶é¡¹ç›®ç»“æ„"><a href="#2-è„šæ‰‹æ¶é¡¹ç›®ç»“æ„" class="headerlink" title="2. è„šæ‰‹æ¶é¡¹ç›®ç»“æ„"></a>2. è„šæ‰‹æ¶é¡¹ç›®ç»“æ„</h3><pre><code>hello-react
â”œâ”€ .gitignore               // è‡ªåŠ¨åˆ›å»ºæœ¬åœ°ä»“åº“
â”œâ”€ package.json             // ç›¸å…³é…ç½®æ–‡ä»¶
â”œâ”€ public                   // å…¬å…±èµ„æº
â”‚  â”œâ”€ favicon.ico           // æµè§ˆå™¨é¡¶éƒ¨çš„iconå›¾æ ‡
â”‚  â”œâ”€ index.html            // åº”ç”¨çš„ index.htmlå…¥å£
â”‚  â”œâ”€ logo192.png           // åœ¨ manifest ä¸­ä½¿ç”¨çš„logoå›¾
â”‚  â”œâ”€ logo512.png           // åŒä¸Š
â”‚  â”œâ”€ manifest.json         // åº”ç”¨åŠ å£³çš„é…ç½®æ–‡ä»¶
â”‚  â””â”€ robots.txt            // çˆ¬è™«ç»™åè®®æ–‡ä»¶
â”œâ”€ src                      // æºç æ–‡ä»¶å¤¹
â”‚  â”œâ”€ App.css               // Appç»„ä»¶çš„æ ·å¼
â”‚  â”œâ”€ App.js                // Appç»„ä»¶
â”‚  â”œâ”€ App.test.js           // ç”¨äºç»™APPåšæµ‹è¯•
â”‚  â”œâ”€ index.css             // æ ·å¼
â”‚  â”œâ”€ index.js              // å…¥å£æ–‡ä»¶
â”‚  â”œâ”€ logo.svg              // logoå›¾
â”‚  â”œâ”€ reportWebVitals.js    // é¡µé¢æ€§èƒ½åˆ†ææ–‡ä»¶
â”‚  â””â”€ setupTests.js         // ç»„ä»¶å•å…ƒæµ‹è¯•æ–‡ä»¶
â””â”€ yarn.lock
</code></pre>
<p>å†ä»‹ç»ä¸€ä¸‹publicç›®å½•ä¸‹çš„ <code>index.html</code> æ–‡ä»¶ä¸­çš„ä»£ç æ„æ€</p>
<pre class=" language-html"><code class="language-html"><span class="token doctype">&lt;!DOCTYPE html></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>html</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>en<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>head</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">charset</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>utf-8<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>link</span> <span class="token attr-name">rel</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>icon<span class="token punctuation">"</span></span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>%PUBLIC_URL%/favicon.ico<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>viewport<span class="token punctuation">"</span></span> <span class="token attr-name">content</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>width<span class="token punctuation">=</span>device-width, initial-scale<span class="token punctuation">=</span>1<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>theme-color<span class="token punctuation">"</span></span> <span class="token attr-name">content</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>#000000<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span>
      <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>description<span class="token punctuation">"</span></span>
      <span class="token attr-name">content</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>Web site created using create-react-app<span class="token punctuation">"</span></span>
    <span class="token punctuation">/></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>link</span> <span class="token attr-name">rel</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>apple-touch-icon<span class="token punctuation">"</span></span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>%PUBLIC_URL%/logo192.png<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>link</span> <span class="token attr-name">rel</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>manifest<span class="token punctuation">"</span></span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>%PUBLIC_URL%/manifest.json<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>title</span><span class="token punctuation">></span></span>React App<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>title</span><span class="token punctuation">></span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>head</span><span class="token punctuation">></span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>noscript</span><span class="token punctuation">></span></span>You need to enable JavaScript to run this app.<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>noscript</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>root<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>html</span><span class="token punctuation">></span></span>
</code></pre>
<p>ä»¥ä¸Šæ˜¯åˆ é™¤ä»£ç æ³¨é‡Šåçš„å…¨éƒ¨ä»£ç </p>
<p><strong>ç¬¬5è¡Œ</strong></p>
<p>æŒ‡å®šæµè§ˆå™¨å›¾æ ‡çš„è·¯å¾„ï¼Œè¿™é‡Œç›´æ¥é‡‡ç”¨ <code>%PUBLIC_URL%</code> åŸå› æ˜¯ <code>webpack</code> é…ç½®å¥½äº†ï¼Œå®ƒä»£è¡¨çš„æ„æ€å°±æ˜¯ <code>public</code> æ–‡ä»¶å¤¹</p>
<pre class=" language-html"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>link</span> <span class="token attr-name">rel</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>icon<span class="token punctuation">"</span></span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>%PUBLIC_URL%/favicon.ico<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span>
</code></pre>
<p><strong>ç¬¬6è¡Œ</strong></p>
<p>ç”¨äºåšç§»åŠ¨ç«¯ç½‘é¡µé€‚é…</p>
<pre class=" language-html"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>viewport<span class="token punctuation">"</span></span> <span class="token attr-name">content</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>width<span class="token punctuation">=</span>device-width, initial-scale<span class="token punctuation">=</span>1<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span>
</code></pre>
<p><strong>ç¬¬ä¸ƒè¡Œ</strong></p>
<p>ç”¨äºé…ç½®å®‰å“æ‰‹æœºæµè§ˆå™¨é¡¶éƒ¨é¢œè‰²ï¼Œå…¼å®¹æ€§ä¸å¤§å¥½</p>
<pre class=" language-html"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>theme-color<span class="token punctuation">"</span></span> <span class="token attr-name">content</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>#000000<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span>
</code></pre>
<p><strong>8åˆ°11è¡Œ</strong></p>
<p>ç”¨äºæè¿°ç½‘ç«™ä¿¡æ¯</p>
<pre class=" language-html"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span>
    <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>description<span class="token punctuation">"</span></span>
    <span class="token attr-name">content</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>Web site created using create-react-app<span class="token punctuation">"</span></span>
<span class="token punctuation">/></span></span>
</code></pre>
<p><strong>ç¬¬12è¡Œ</strong></p>
<p>è‹¹æœæ‰‹æœºè§¦æ‘¸ç‰ˆåº”ç”¨å›¾æ ‡</p>
<pre class=" language-html"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>link</span> <span class="token attr-name">rel</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>apple-touch-icon<span class="token punctuation">"</span></span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>%PUBLIC_URL%/logo192.png<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span>
</code></pre>
<p><strong>ç¬¬13è¡Œ</strong></p>
<p>åº”ç”¨åŠ å£³æ—¶çš„é…ç½®æ–‡ä»¶</p>
<pre class=" language-html"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>link</span> <span class="token attr-name">rel</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>manifest<span class="token punctuation">"</span></span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>%PUBLIC_URL%/manifest.json<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span>
</code></pre>
<blockquote>
<p>ä»¥ä¸Šå°±æ˜¯å…³äº React è„šæ‰‹æ¶çš„å…¨éƒ¨å†…å®¹äº†ï¼Œéå¸¸æ„Ÿè°¢ä½ çš„é˜…è¯»ğŸ’•</p>
</blockquote>
<h2 id="React-å…¥é—¨å­¦ä¹ ï¼ˆå…­ï¼‰â€“-TodoList-æ¡ˆä¾‹"><a href="#React-å…¥é—¨å­¦ä¹ ï¼ˆå…­ï¼‰â€“-TodoList-æ¡ˆä¾‹" class="headerlink" title="React å…¥é—¨å­¦ä¹ ï¼ˆå…­ï¼‰â€“ TodoList æ¡ˆä¾‹"></a>React å…¥é—¨å­¦ä¹ ï¼ˆå…­ï¼‰â€“ TodoList æ¡ˆä¾‹</h2><h2 id="å¼•è¨€-1"><a href="#å¼•è¨€-1" class="headerlink" title="å¼•è¨€"></a>å¼•è¨€</h2><p>TodoList æ¡ˆä¾‹åœ¨å‰ç«¯å­¦ä¹ ä¸­æŒºé‡è¦çš„ï¼Œä»åŸç”Ÿ JavaScript çš„å¢åˆ æŸ¥æ”¹ï¼Œåˆ°ç°åœ¨ React çš„ç»„ä»¶é€šä¿¡ï¼Œéƒ½æ˜¯ä¸€ä¸ªä¸é”™çš„æ¡ˆä¾‹ï¼Œè¿™ç¯‡æ–‡ç« ä¸»è¦è®°å½•ï¼Œè¿˜åŸä¸€ä¸‹é€šè¿‡ React å®ç° TodoList çš„å…¨è¿‡ç¨‹</p>
<p><img src="https://ljcimg.oss-cn-beijing.aliyuncs.com/img/image-20210826091013929.png" alt="image-20210826091013929"></p>
<h2 id="ä¸€ã€æ‹†åˆ†ç»„ä»¶"><a href="#ä¸€ã€æ‹†åˆ†ç»„ä»¶" class="headerlink" title="ä¸€ã€æ‹†åˆ†ç»„ä»¶"></a>ä¸€ã€æ‹†åˆ†ç»„ä»¶</h2><p>é¦–å…ˆç¬¬ä¸€æ­¥éœ€è¦åšçš„æ˜¯å°†è¿™ä¸ªé¡µé¢æ‹†åˆ†æˆå‡ ä¸ªç»„ä»¶</p>
<p>é¦–å…ˆé¡¶éƒ¨çš„è¾“å…¥æ¡†ï¼Œå¯ä»¥å®Œæˆæ·»åŠ é¡¹ç›®çš„åŠŸèƒ½ï¼Œå¯ä»¥æ‹†åˆ†æˆä¸€ä¸ª <strong>Header ç»„ä»¶</strong></p>
<p>ä¸­é—´éƒ¨åˆ†å¯ä»¥å®ç°ä¸€ä¸ªæ¸²æŸ“åˆ—è¡¨çš„åŠŸèƒ½ï¼Œå¯ä»¥æ‹†åˆ†æˆä¸€ä¸ª <strong>List ç»„ä»¶</strong></p>
<p>åœ¨è¿™éƒ¨åˆ†é‡Œé¢ï¼Œæ¯ä¸€ä¸ªå¾…åŠäº‹é¡¹éƒ½å¯ä»¥æ‹†åˆ†æˆä¸€ä¸ª <strong>Item ç»„ä»¶</strong></p>
<p>æœ€ååº•éƒ¨æ˜¾ç¤ºå½“å‰å®ŒæˆçŠ¶æ€çš„éƒ¨åˆ†ï¼Œå¯ä»¥æ‹†åˆ†æˆä¸€ä¸ª <strong>Footer ç»„ä»¶</strong></p>
<p><img src="https://ljcimg.oss-cn-beijing.aliyuncs.com/img/image-20210826092737826.png" alt="image-20210826092737826"></p>
<p>åœ¨æ‹†åˆ†å®Œç»„ä»¶åï¼Œæˆ‘ä»¬ä¸‹ä¸€æ­¥è¦åšçš„å°±æ˜¯å»å®ç°è¿™äº›ç»„ä»¶çš„é™æ€æ•ˆæœ</p>
<h2 id="äºŒã€å®ç°é™æ€ç»„ä»¶"><a href="#äºŒã€å®ç°é™æ€ç»„ä»¶" class="headerlink" title="äºŒã€å®ç°é™æ€ç»„ä»¶"></a>äºŒã€å®ç°é™æ€ç»„ä»¶</h2><p>é¦–å…ˆï¼Œæˆ‘ä»¬å¯ä»¥å…ˆå†™å¥½è¿™ä¸ªé¡µé¢çš„é™æ€é¡µé¢ï¼Œç„¶åå†åˆ†ç¦»ç»„ä»¶ï¼Œæ‰€ä»¥è¿™å°±è¦æ±‚æˆ‘ä»¬</p>
<p>ä»¥åå†™é™æ€é¡µé¢çš„æ—¶å€™ï¼Œä¸€å®šè¦æœ‰æ˜ç¡®çš„è§„èŒƒ</p>
<ol>
<li>æ‰“å¥½æ³¨é‡Š</li>
<li>æ¯ä¸ªéƒ¨åˆ†çš„ CSS è¦å†™åœ¨ä¸€ä¸ªåœ°æ–¹ï¼Œä¸è¦éšæ„å†™</li>
<li>å‘½åä¸€å®šè¦è§„èŒƒ</li>
<li>CSS é€‰æ‹©å™¨ä¸è¦å…³è”å¤ªå¤šå±‚çº§</li>
<li>åœ¨å†™ HTML æ—¶å°±è¦åˆ’åˆ†å¥½å¸ƒå±€</li>
</ol>
<p>è¿™æ ·æœ‰åˆ©äºæˆ‘ä»¬åˆ†ç¦»ç»„ä»¶</p>
<p>é¦–å…ˆï¼Œæˆ‘ä»¬åœ¨ <code>src</code> ç›®å½•ä¸‹ï¼Œæ–°å»ºä¸€ä¸ª <code>Components</code> æ–‡ä»¶å¤¹ï¼Œç”¨äºå­˜æ”¾æˆ‘ä»¬çš„ç»„ä»¶ï¼Œç„¶ååœ¨æ–‡ä»¶å¤¹ä¸‹ï¼Œæ–°å»º <code>Header</code> ã€<code>Item</code>ã€<code>List</code> ã€<code>Footer</code> ç»„ä»¶æ–‡ä»¶å¤¹ï¼Œå†åˆ›å»ºå…¶ä¸‹çš„ <code>index.jsx</code>ï¼Œ<code>index.css</code> æ–‡ä»¶ï¼Œç”¨äºåˆ›å»ºå¯¹åº”ç»„ä»¶åŠå…¶æ ·å¼æ–‡ä»¶</p>
<pre class=" language-markdown"><code class="language-markdown">todolist
â”œâ”€ package.json
â”œâ”€ public
â”‚  â”œâ”€ favicon.ico
â”‚  â””â”€ index.html
â”œâ”€ src
â”‚  â”œâ”€ App.css
â”‚  â”œâ”€ App.jsx
â”‚  â”œâ”€ Components
â”‚  â”‚  â”œâ”€ Footer
â”‚  â”‚  â”‚  â”œâ”€ index.css
â”‚  â”‚  â”‚  â””â”€ index.jsx
â”‚  â”‚  â”œâ”€ Header
â”‚  â”‚  â”‚  â”œâ”€ index.css
â”‚  â”‚  â”‚  â””â”€ index.jsx
â”‚  â”‚  â”œâ”€ item
â”‚  â”‚  â”‚  â”œâ”€ index.css
â”‚  â”‚  â”‚  â””â”€ index.jsx
â”‚  â”‚  â””â”€ List
â”‚  â”‚     â”œâ”€ index.css
â”‚  â”‚     â””â”€ index.jsx
â”‚  â””â”€ index.js
â””â”€ yarn.lock
</code></pre>
<p>æœ€ç»ˆç›®å½•ç»“æ„å¦‚ä¸Š</p>
<p>ç„¶åæˆ‘ä»¬å°†æ¯ä¸ªç»„ä»¶ï¼Œå¯¹åº”çš„ HTML ç»“æ„ CV åˆ°å¯¹åº”ç»„ä»¶çš„ <code>index.jsx</code> æ–‡ä»¶ä¸­ <code>return</code> å‡ºæ¥ï¼Œå†å°† CSS æ ·å¼æ·»åŠ åˆ° <code>index.css</code> æ–‡ä»¶ä¸­</p>
<p><strong>è®°å¾—</strong>ï¼Œåœ¨ <code>index.jsx</code> ä¸­ä¸€å®šè¦å¼•å…¥ <code>index.css</code> æ–‡ä»¶</p>
<p>å®ç°äº†é™æ€ç»„ä»¶åï¼Œæˆ‘ä»¬éœ€è¦æ·»åŠ äº‹ä»¶ç­‰ï¼Œæ¥å®ç°åŠ¨æ€ç»„ä»¶</p>
<h2 id="ä¸‰ã€å®ç°åŠ¨æ€ç»„ä»¶"><a href="#ä¸‰ã€å®ç°åŠ¨æ€ç»„ä»¶" class="headerlink" title="ä¸‰ã€å®ç°åŠ¨æ€ç»„ä»¶"></a>ä¸‰ã€å®ç°åŠ¨æ€ç»„ä»¶</h2><h3 id="ğŸ-1-åŠ¨æ€å±•ç¤ºåˆ—è¡¨"><a href="#ğŸ-1-åŠ¨æ€å±•ç¤ºåˆ—è¡¨" class="headerlink" title="ğŸ 1. åŠ¨æ€å±•ç¤ºåˆ—è¡¨"></a>ğŸ 1. åŠ¨æ€å±•ç¤ºåˆ—è¡¨</h3><p>æˆ‘ä»¬ç›®å‰å®ç°çš„åˆ—è¡¨é¡¹æ˜¯å›ºå®šçš„ï¼Œæˆ‘ä»¬éœ€è¦å®ƒé€šè¿‡<strong>çŠ¶æ€</strong>æ¥ç»´æŠ¤ï¼Œè€Œä¸æ˜¯é€šè¿‡<strong>ç»„ä»¶æ ‡ç­¾</strong>æ¥ç»´æŠ¤</p>
<p>é¦–å…ˆæˆ‘ä»¬çŸ¥é“ï¼Œçˆ¶å­ä¹‹é—´ä¼ é€’å‚æ•°ï¼Œå¯ä»¥é€šè¿‡ <code>state</code> å’Œ <code>props</code> å®ç°</p>
<p>æˆ‘ä»¬é€šè¿‡åœ¨çˆ¶ç»„ä»¶ä¹Ÿå°±æ˜¯ <code>App.jsx</code> ä¸­è®¾ç½®çŠ¶æ€</p>
<p><img src="https://ljcimg.oss-cn-beijing.aliyuncs.com/img/image-20210826103418053.png" alt="image-20210826103418053"></p>
<p>å†å°†å®ƒä¼ é€’ç»™å¯¹åº”çš„æ¸²æŸ“ç»„ä»¶ <code>List</code> </p>
<pre class=" language-jsx"><code class="language-jsx"><span class="token keyword">const</span> <span class="token entity" title="&#123;">&amp;#123;</span> todos <span class="token entity" title="&#125;">&amp;#125;</span> <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>state
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>List</span> <span class="token attr-name">todos</span><span class="token attr-value"><span class="token punctuation">=</span>&amp;#123;todos&amp;#125;/</span><span class="token punctuation">></span></span>
</code></pre>
<p>è¿™æ ·åœ¨ <code>List</code> ç»„ä»¶ä¸­å°±èƒ½é€šè¿‡ <code>props</code> æ¥è·å–åˆ° <code>todos</code> </p>
<p>æˆ‘ä»¬é€šè¿‡è§£æ„å–å‡º <code>todos</code></p>
<pre class=" language-jsx"><code class="language-jsx"><span class="token keyword">const</span> <span class="token entity" title="&#123;">&amp;#123;</span> todos<span class="token punctuation">,</span> updateTodo <span class="token entity" title="&#125;">&amp;#125;</span> <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>props
</code></pre>
<p>å†é€šè¿‡ <code>map</code> éå†æ¸²æŸ“ <code>Item</code> æ•°é‡</p>
<pre class=" language-js"><code class="language-js"><span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>
  todos<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span>todo <span class="token operator">=</span><span class="token operator">></span> <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> <span class="token operator">&lt;</span>Item key<span class="token operator">=</span><span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>todo<span class="token punctuation">.</span>id<span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span> <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span><span class="token operator">...</span>todo<span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span><span class="token operator">/</span><span class="token operator">></span>
  <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span><span class="token punctuation">)</span>
<span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>
</code></pre>
<p>åŒæ—¶ç”±äºæˆ‘ä»¬çš„æ•°æ®æ¸²æŸ“æœ€ç»ˆæ˜¯åœ¨ <code>Item</code> ç»„ä»¶ä¸­å®Œæˆçš„ï¼Œæ‰€ä»¥æˆ‘ä»¬éœ€è¦å°†æ•°æ®ä¼ é€’ç»™ <code>Item</code> ç»„ä»¶</p>
<p>è¿™é‡Œæœ‰ä¸¤ä¸ªæ³¨æ„ç‚¹</p>
<ol>
<li>å…³äº <code>key</code> çš„ä½œç”¨åœ¨ diff ç®—æ³•çš„æ–‡ç« ä¸­å·²ç»æœ‰è®²è¿‡äº†ï¼Œéœ€è¦æ»¡è¶³<strong>å”¯ä¸€æ€§</strong></li>
<li>è¿™é‡Œé‡‡ç”¨äº†ç®€å†™å½¢å¼ <code>&#123;...todo&#125;</code> ï¼Œè¿™ä½¿å¾—ä»£ç æ›´åŠ ç®€æ´ï¼Œå®ƒä»£è¡¨çš„æ„æ€æ˜¯</li>
</ol>
<pre class=" language-js"><code class="language-js">id <span class="token operator">=</span> <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>todo<span class="token punctuation">.</span>id<span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span> name <span class="token operator">=</span> <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>todo<span class="token punctuation">.</span>name<span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span> done <span class="token operator">=</span> <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>todo<span class="token punctuation">.</span>done<span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>
</code></pre>
<p>åœ¨ <code>Item</code> ç»„ä»¶ä¸­å–å‡º <code>props</code> å³å¯ä½¿ç”¨</p>
<pre class=" language-js"><code class="language-js"><span class="token keyword">const</span> <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span> id<span class="token punctuation">,</span> name<span class="token punctuation">,</span> done <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span> <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>props
</code></pre>
<p>è¿™æ ·æˆ‘ä»¬æ›´æ”¹ <code>APP.jsx</code> æ–‡ä»¶ä¸­çš„ <code>state</code> å°±èƒ½é©±åŠ¨ç€ <code>Item</code> ç»„ä»¶çš„æ›´æ–°ï¼Œå¦‚å›¾</p>
<p><img src="https://ljcimg.oss-cn-beijing.aliyuncs.com/img/react-todolist-1.gif" alt="react-todolist-1"></p>
<p>åŒæ—¶è¿™é‡Œéœ€è¦æ³¨æ„çš„æ˜¯</p>
<p>å¯¹äºå¤é€‰æ¡†çš„é€‰ä¸­çŠ¶æ€ï¼Œè¿™é‡Œé‡‡ç”¨çš„æ˜¯ <code>defaultChecked = &#123;done&#125;</code>ï¼Œç›¸æ¯”äº <code>checked</code> å±æ€§ï¼Œè¿™ä¸ªè®¾å®šçš„æ˜¯é»˜è®¤å€¼ï¼Œèƒ½å¤Ÿæ›´æ”¹</p>
<h3 id="ğŸ-2-æ·»åŠ äº‹é¡¹åŠŸèƒ½"><a href="#ğŸ-2-æ·»åŠ äº‹é¡¹åŠŸèƒ½" class="headerlink" title="ğŸ 2. æ·»åŠ äº‹é¡¹åŠŸèƒ½"></a>ğŸ 2. æ·»åŠ äº‹é¡¹åŠŸèƒ½</h3><p>é¦–å…ˆæˆ‘ä»¬éœ€è¦åœ¨ Header ç»„ä»¶ä¸­ï¼Œç»‘å®šé”®ç›˜äº‹ä»¶ï¼Œåˆ¤æ–­æŒ‰ä¸‹çš„æ˜¯å¦ä¸ºå›è½¦ï¼Œå¦‚æœä¸ºå›è½¦ï¼Œåˆ™å°†å½“å‰è¾“å…¥æ¡†ä¸­çš„å†…å®¹ä¼ é€’ç»™ APP ç»„ä»¶</p>
<blockquote>
<p>å› ä¸ºï¼Œåœ¨ç›®å‰çš„å­¦ä¹ çŸ¥è¯†ä¸­ï¼ŒHeader ç»„ä»¶å’Œæ¸²æŸ“ç»„ä»¶ List å±äºå…„å¼Ÿç»„ä»¶ï¼Œæ²¡æœ‰åŠæ³•è¿›è¡Œç›´æ¥çš„æ•°æ®ä¼ é€’ï¼Œå› æ­¤å¯ä»¥å°†æ•°æ®ä¼ é€’ç»™ APP å†ç”± APP è½¬å‘ç»™ Listã€‚</p>
</blockquote>
<pre class=" language-jsx"><code class="language-jsx"><span class="token comment" spellcheck="true">// Header/index.jsx</span>
handleKeyUp <span class="token operator">=</span> <span class="token punctuation">(</span>event<span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token entity" title="&#123;">&amp;#123;</span>
  <span class="token comment" spellcheck="true">// ç»“æ„èµ‹å€¼è·å– keyCode,target</span>
  <span class="token keyword">const</span> <span class="token entity" title="&#123;">&amp;#123;</span> keyCode<span class="token punctuation">,</span> target <span class="token entity" title="&#125;">&amp;#125;</span> <span class="token operator">=</span> event
  <span class="token comment" spellcheck="true">// åˆ¤æ–­æ˜¯ä¸æ˜¯å›è½¦</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>keyCode <span class="token operator">!==</span> <span class="token number">13</span><span class="token punctuation">)</span> <span class="token keyword">return</span>
  <span class="token keyword">if</span><span class="token punctuation">(</span>target<span class="token punctuation">.</span>value<span class="token punctuation">.</span><span class="token function">trim</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">===</span> <span class="token string">''</span><span class="token punctuation">)</span> <span class="token entity" title="&#123;">&amp;#123;</span>
    <span class="token function">alert</span><span class="token punctuation">(</span><span class="token string">'è¾“å…¥ä¸èƒ½ä¸ºç©º'</span><span class="token punctuation">)</span>
  <span class="token entity" title="&#125;">&amp;#125;</span>
  <span class="token comment" spellcheck="true">// å‡†å¤‡ä¸€ä¸ªtodoå¯¹è±¡</span>
  <span class="token keyword">const</span> todoObj <span class="token operator">=</span> <span class="token entity" title="&#123;">&amp;#123;</span> id<span class="token punctuation">:</span> <span class="token function">nanoid</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> name<span class="token punctuation">:</span> target<span class="token punctuation">.</span>value<span class="token punctuation">,</span> done<span class="token punctuation">:</span> <span class="token boolean">false</span> <span class="token entity" title="&#125;">&amp;#125;</span>
  <span class="token comment" spellcheck="true">// ä¼ é€’ç»™app</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span>props<span class="token punctuation">.</span><span class="token function">addTodo</span><span class="token punctuation">(</span>todoObj<span class="token punctuation">)</span>
  <span class="token comment" spellcheck="true">// æ¸…ç©º</span>
  target<span class="token punctuation">.</span>value <span class="token operator">=</span> <span class="token string">''</span>
<span class="token entity" title="&#125;">&amp;#125;</span>
</code></pre>
<p>æˆ‘ä»¬åœ¨ <code>App.jsx</code> ä¸­æ·»åŠ äº†äº‹ä»¶ <code>addTodo</code> ï¼Œè¿™æ ·å¯ä»¥å°† Header ç»„ä»¶ä¼ é€’çš„å‚æ•°ï¼Œç»´æŠ¤åˆ° <code>App</code> çš„çŠ¶æ€ä¸­</p>
<pre class=" language-jsx"><code class="language-jsx"><span class="token comment" spellcheck="true">// App.jsx</span>
addTodo <span class="token operator">=</span> <span class="token punctuation">(</span>todoObj<span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token entity" title="&#123;">&amp;#123;</span>
  <span class="token keyword">const</span> <span class="token entity" title="&#123;">&amp;#123;</span> todos <span class="token entity" title="&#125;">&amp;#125;</span> <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>state
  <span class="token comment" spellcheck="true">// è¿½åŠ ä¸€ä¸ª todo</span>
  <span class="token keyword">const</span> newTodos <span class="token operator">=</span> <span class="token punctuation">[</span>todoObj<span class="token punctuation">,</span> <span class="token operator">...</span>todos<span class="token punctuation">]</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setState</span><span class="token punctuation">(</span><span class="token entity" title="&#123;">&amp;#123;</span> todos<span class="token punctuation">:</span> newTodos <span class="token entity" title="&#125;">&amp;#125;</span><span class="token punctuation">)</span>
<span class="token entity" title="&#125;">&amp;#125;</span>
</code></pre>
<p>åœ¨è¿™å°éƒ¨åˆ†ä¸­ï¼Œéœ€è¦æˆ‘ä»¬æ³¨æ„çš„æ˜¯ï¼Œæˆ‘ä»¬æ–°å»ºçš„ <code>todo</code>  å¯¹è±¡ï¼Œä¸€å®šè¦ä¿è¯å®ƒçš„ <code>id</code> çš„å”¯ä¸€æ€§</p>
<p>è¿™é‡Œé‡‡ç”¨çš„ <code>nanoid</code> åº“ï¼Œè¿™ä¸ªåº“çš„æ¯ä¸€æ¬¡è°ƒç”¨éƒ½ä¼šè¿”å›ä¸€ä¸ªå”¯ä¸€çš„å€¼</p>
<pre class=" language-shell"><code class="language-shell">npm i nanoid
</code></pre>
<p>å®‰è£…è¿™ä¸ªåº“ï¼Œç„¶åå¼•å…¥</p>
<p>é€šè¿‡ <code>nanoid()</code> å³å¯ç”Ÿæˆå”¯ä¸€å€¼</p>
<p><img src="https://ljcimg.oss-cn-beijing.aliyuncs.com/img/react-todolist-addtodo.gif" alt="react-todolist-addtodo"></p>
<h3 id="ğŸ‹-3-å®ç°é¼ æ ‡æ‚¬æµ®æ•ˆæœ"><a href="#ğŸ‹-3-å®ç°é¼ æ ‡æ‚¬æµ®æ•ˆæœ" class="headerlink" title="ğŸ‹ 3. å®ç°é¼ æ ‡æ‚¬æµ®æ•ˆæœ"></a>ğŸ‹ 3. å®ç°é¼ æ ‡æ‚¬æµ®æ•ˆæœ</h3><p>æ¥ä¸‹æ¥æˆ‘ä»¬éœ€è¦å®ç°æ¯ä¸ª <code>Item</code> ä¸­çš„å°åŠŸèƒ½</p>
<p>é¦–å…ˆæ˜¯é¼ æ ‡ç§»å…¥æ—¶çš„å˜è‰²æ•ˆæœ</p>
<p>æˆ‘çš„é€»è¾‘æ˜¯ï¼Œé€šè¿‡ä¸€ä¸ªçŠ¶æ€æ¥ç»´æŠ¤æ˜¯å¦é¼ æ ‡ç§»å…¥ï¼Œæ¯”å¦‚ç”¨ä¸€ä¸ª <code>mouse</code> å˜é‡ï¼Œå€¼ç»™ <code>false</code> å½“é¼ æ ‡ç§»å…¥æ—¶ï¼Œé‡æ–°è®¾å®šçŠ¶æ€ä¸º <code>true</code> å½“é¼ æ ‡ç§»å‡ºæ—¶è®¾ä¸º <code>false</code> ï¼Œç„¶åæˆ‘ä»¬åªéœ€è¦åœ¨ <code>style</code> ä¸­ç”¨<code>mouse</code> å»è®¾å®šæ ·å¼å³å¯</p>
<p>ä¸‹é¢æˆ‘ä»¬æ¥ä»£ç å®ç°</p>
<p>åœ¨ <code>Item</code> ç»„ä»¶ä¸­ï¼Œå…ˆè®¾å®šçŠ¶æ€</p>
<pre class=" language-jsx"><code class="language-jsx">state <span class="token operator">=</span> <span class="token entity" title="&#123;">&amp;#123;</span> mouse<span class="token punctuation">:</span> <span class="token boolean">false</span> <span class="token entity" title="&#125;">&amp;#125;</span> <span class="token comment" spellcheck="true">// æ ‡è¯†é¼ æ ‡ç§»å…¥ï¼Œç§»å‡º</span>
</code></pre>
<p>ç»™å…ƒç´ ç»‘å®šä¸Šé¼ æ ‡ç§»å…¥ï¼Œç§»å‡ºäº‹ä»¶</p>
<pre class=" language-js"><code class="language-js"><span class="token operator">&lt;</span>li onMouseEnter<span class="token operator">=</span><span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span><span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">handleMouse</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span> onMouseLeave<span class="token operator">=</span><span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span><span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">handleMouse</span><span class="token punctuation">(</span><span class="token boolean">false</span><span class="token punctuation">)</span><span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span> <span class="token operator">></span><span class="token operator">&lt;</span>li<span class="token operator">/</span><span class="token operator">></span>
</code></pre>
<p>å½“é¼ æ ‡ç§»å…¥æ—¶ï¼Œä¼šè§¦å‘ <code>onMouseEnter</code> äº‹ä»¶ï¼Œè°ƒç”¨ <code>handleMouse</code> äº‹ä»¶ä¼ å…¥å‚æ•° <code>true</code> è¡¨ç¤ºé¼ æ ‡è¿›å…¥ï¼Œæ›´æ–°ç»„ä»¶çŠ¶æ€</p>
<pre class=" language-js"><code class="language-js">handleMouse <span class="token operator">=</span> flag <span class="token operator">=</span><span class="token operator">></span> <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setState</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span> mouse<span class="token punctuation">:</span> flag <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span><span class="token punctuation">)</span>
    <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>
<span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>
</code></pre>
<p>å†åœ¨ <code>li</code> èº«ä¸Šæ·»åŠ ç”± <code>mouse</code> æ§åˆ¶çš„èƒŒæ™¯é¢œè‰²</p>
<pre class=" language-js"><code class="language-js">style<span class="token operator">=</span><span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span><span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span> backgroundColor<span class="token punctuation">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>mouse <span class="token operator">?</span> <span class="token string">'#ddd'</span> <span class="token punctuation">:</span> <span class="token string">'white'</span> <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span><span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>
</code></pre>
<p>åŒæ—¶é€šè¿‡ <code>mouse</code> æ¥æ§åˆ¶åˆ é™¤æŒ‰é’®çš„æ˜¾ç¤ºå’Œéšè—ï¼Œåšæ³•å’Œä¸Šé¢ä¸€æ ·</p>
<p><img src="https://ljcimg.oss-cn-beijing.aliyuncs.com/img/react-todolist-mouse.gif" alt="react-todolist-mouse"></p>
<p>è§‚å¯Ÿ mouse çš„å˜åŒ–</p>
<h3 id="ğŸ‰-4-å¤é€‰æ¡†çŠ¶æ€ç»´æŠ¤"><a href="#ğŸ‰-4-å¤é€‰æ¡†çŠ¶æ€ç»´æŠ¤" class="headerlink" title="ğŸ‰ 4. å¤é€‰æ¡†çŠ¶æ€ç»´æŠ¤"></a>ğŸ‰ 4. å¤é€‰æ¡†çŠ¶æ€ç»´æŠ¤</h3><p>æˆ‘ä»¬éœ€è¦å°†å½“å‰å¤é€‰æ¡†çš„çŠ¶æ€ï¼Œç»´æŠ¤åˆ° <code>state</code>  å½“ä¸­</p>
<p>æˆ‘ä»¬çš„æ€è·¯æ˜¯</p>
<p>åœ¨å¤é€‰æ¡†ä¸­æ·»åŠ ä¸€ä¸ª <code>onChange</code>  äº‹ä»¶æ¥è¿›è¡Œæ•°æ®çš„ä¼ é€’ï¼Œå½“äº‹ä»¶è§¦å‘æ—¶æˆ‘ä»¬æ‰§è¡Œ <code>handleCheck</code> å‡½æ•°ï¼Œè¿™ä¸ªå‡½æ•°å¯ä»¥å‘ App ç»„ä»¶ä¸­ä¼ é€’å‚æ•°ï¼Œè¿™æ ·å†åœ¨ App ä¸­æ”¹å˜çŠ¶æ€å³å¯</p>
<p>é¦–å…ˆç»‘å®šäº‹ä»¶</p>
<pre class=" language-js"><code class="language-js"><span class="token comment" spellcheck="true">// Item/index.jsx</span>
<span class="token operator">&lt;</span>input type<span class="token operator">=</span><span class="token string">"checkbox"</span> defaultChecked<span class="token operator">=</span><span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>done<span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span> onChange<span class="token operator">=</span><span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span><span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">handleCheck</span><span class="token punctuation">(</span>id<span class="token punctuation">)</span><span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span> <span class="token operator">/</span><span class="token operator">></span>
</code></pre>
<p>äº‹ä»¶å›è°ƒ</p>
<pre class=" language-jsx"><code class="language-jsx">handleCheck <span class="token operator">=</span> <span class="token punctuation">(</span>id<span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token entity" title="&#123;">&amp;#123;</span>
    <span class="token keyword">return</span> <span class="token punctuation">(</span>event<span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token entity" title="&#123;">&amp;#123;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>props<span class="token punctuation">.</span><span class="token function">updateTodo</span><span class="token punctuation">(</span>id<span class="token punctuation">,</span> event<span class="token punctuation">.</span>target<span class="token punctuation">.</span>checked<span class="token punctuation">)</span>
    <span class="token entity" title="&#125;">&amp;#125;</span>
<span class="token entity" title="&#125;">&amp;#125;</span>
</code></pre>
<p>ç”±äºæˆ‘ä»¬éœ€è¦ä¼ é€’ <code>id</code> æ¥è®°å½•çŠ¶æ€æ›´æ–°çš„å¯¹è±¡ï¼Œå› æ­¤æˆ‘ä»¬éœ€è¦é‡‡ç”¨é«˜é˜¶å‡½æ•°çš„å†™æ³•ï¼Œä¸ç„¶å‡½æ•°ä¼šç›´æ¥æ‰§è¡Œè€ŒæŠ¥é”™ï¼Œå¤é€‰æ¡†çš„çŠ¶æ€æˆ‘ä»¬å¯ä»¥é€šè¿‡ <code>event.target.checked</code> æ¥è·å–</p>
<p>è¿™æ ·æˆ‘ä»¬å°†æˆ‘ä»¬éœ€è¦æ”¹å˜çŠ¶æ€çš„ <code>Item</code> çš„ <code>id</code> å’Œæ”¹å˜åçš„çŠ¶æ€ï¼Œä¼ é€’ç»™äº† App</p>
<p>å†…å®šä¹‰çš„<code>updateTodo</code> äº‹ä»¶ï¼Œè¿™æ ·æˆ‘ä»¬å¯ä»¥åœ¨ App ç»„ä»¶ä¸­æ“ä½œæ”¹å˜çŠ¶æ€</p>
<p>æˆ‘ä»¬ä¼ é€’äº†ä¸¤ä¸ªå‚æ•° <code>id</code> å’Œ <code>done</code></p>
<p>é€šè¿‡éå†æ‰¾å‡ºè¯¥ <code>id</code> å¯¹åº”çš„ <code>todo</code> å¯¹è±¡ï¼Œæ›´æ”¹å®ƒçš„ <code>done</code> å³å¯</p>
<pre class=" language-js"><code class="language-js"><span class="token comment" spellcheck="true">// App.jsx</span>
updateTodo <span class="token operator">=</span> <span class="token punctuation">(</span>id<span class="token punctuation">,</span> done<span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>
  <span class="token keyword">const</span> <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span> todos <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span> <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>state
  <span class="token comment" spellcheck="true">// å¤„ç†</span>
  <span class="token keyword">const</span> newTodos <span class="token operator">=</span> todos<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span>todoObj <span class="token operator">=</span><span class="token operator">></span> <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>todoObj<span class="token punctuation">.</span>id <span class="token operator">===</span> id<span class="token punctuation">)</span> <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>
      <span class="token keyword">return</span> <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span> <span class="token operator">...</span>todoObj<span class="token punctuation">,</span> done <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>
    <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span> <span class="token keyword">else</span> <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>
      <span class="token keyword">return</span> todoObj
    <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>
  <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span><span class="token punctuation">)</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setState</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span> todos<span class="token punctuation">:</span> newTodos <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span><span class="token punctuation">)</span>
<span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>
</code></pre>
<p>è¿™é‡Œæ›´æ”¹çš„æ–¹å¼æ˜¯ <code>&#123; ...todoObj, done &#125;</code>ï¼Œé¦–å…ˆä¼šå±•å¼€ <code>todoObj</code> çš„æ¯ä¸€é¡¹ï¼Œå†å¯¹ <code>done</code> å±æ€§åšè¦†ç›–</p>
<p><img src="https://ljcimg.oss-cn-beijing.aliyuncs.com/img/react-todolist-update.gif" alt="react-todolist-update"></p>
<h3 id="ğŸ-5-é™åˆ¶å‚æ•°ç±»å‹"><a href="#ğŸ-5-é™åˆ¶å‚æ•°ç±»å‹" class="headerlink" title="ğŸ 5. é™åˆ¶å‚æ•°ç±»å‹"></a>ğŸ 5. é™åˆ¶å‚æ•°ç±»å‹</h3><p>åœ¨æˆ‘ä»¬å‰é¢å†™çš„ä¸œè¥¿ä¸­ï¼Œæˆ‘ä»¬å¹¶æ²¡æœ‰å¯¹å‚æ•°çš„<strong>ç±»å‹ä»¥åŠå¿…è¦æ€§</strong>è¿›è¡Œé™åˆ¶</p>
<p>åœ¨å‰é¢æˆ‘ä»¬ä¹Ÿå­¦è¿‡è¿™ä¸ªï¼Œæˆ‘ä»¬éœ€è¦å€ŸåŠ© <code>propTypes</code> è¿™ä¸ªåº“</p>
<p>é¦–å…ˆæˆ‘ä»¬éœ€è¦å¼•å…¥è¿™ä¸ªåº“ï¼Œç„¶åå¯¹ <code>props</code> è¿›è¡Œé™åˆ¶</p>
<pre class=" language-js"><code class="language-js"><span class="token comment" spellcheck="true">// Header</span>
<span class="token keyword">static</span> propTypes <span class="token operator">=</span> <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>
  addTodo<span class="token punctuation">:</span> PropTypes<span class="token punctuation">.</span>func<span class="token punctuation">.</span>isRequired
<span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>
</code></pre>
<p>åœ¨Header ç»„ä»¶ä¸­éœ€è¦æ¥æ”¶ä¸€ä¸ª <code>addTodo</code> å‡½æ•°ï¼Œæ‰€ä»¥æˆ‘ä»¬è¿›è¡Œä¸€ä¸‹é™åˆ¶</p>
<p>åŒæ—¶åœ¨ List ç»„ä»¶ä¸­ä¹Ÿéœ€è¦è¿›è¡Œå¯¹ <code>todos</code> ä»¥åŠ <code>updateTodo</code> çš„é™åˆ¶</p>
<p>å¦‚æœä¼ å…¥çš„å‚æ•°ä¸ç¬¦åˆé™åˆ¶ï¼Œåˆ™ä¼šæŠ¥ <strong>warning</strong></p>
<h3 id="ğŸ’-6-åˆ é™¤æŒ‰é’®"><a href="#ğŸ’-6-åˆ é™¤æŒ‰é’®" class="headerlink" title="ğŸ’ 6. åˆ é™¤æŒ‰é’®"></a>ğŸ’ 6. åˆ é™¤æŒ‰é’®</h3><p>ç°åœ¨æˆ‘ä»¬éœ€è¦å®ç°åˆ é™¤æŒ‰é’®çš„æ•ˆæœ</p>
<p>è¿™ä¸ªå’Œå‰é¢çš„æŒºåƒçš„ï¼Œé¦–å…ˆæˆ‘ä»¬åˆ†æä¸€ä¸‹ï¼Œæˆ‘ä»¬éœ€è¦åœ¨ <code>Item</code> ç»„ä»¶ä¸Šçš„æŒ‰é’®ç»‘å®šç‚¹å‡»äº‹ä»¶ï¼Œç„¶åä¼ å…¥è¢«ç‚¹å‡»äº‹é¡¹çš„ <code>id</code> å€¼ï¼Œé€šè¿‡ <code>props</code> å°†å®ƒä¼ é€’ç»™çˆ¶å…ƒç´  <code>List</code> ï¼Œå†é€šè¿‡åœ¨ <code>List</code> ä¸­ç»‘å®šä¸€ä¸ª <code>App</code> ç»„ä»¶ä¸­çš„åˆ é™¤å›è°ƒï¼Œå°† <code>id</code> ä¼ é€’ç»™ <code>App</code> æ¥æ”¹å˜ <code>state</code></p>
<p>é¦–å…ˆæˆ‘ä»¬å…ˆç¼–å†™ ç‚¹å‡»äº‹ä»¶</p>
<pre class=" language-js"><code class="language-js"><span class="token comment" spellcheck="true">// Item/index.jsx</span>
handleDelete <span class="token operator">=</span> <span class="token punctuation">(</span>id<span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>props<span class="token punctuation">.</span><span class="token function">deleteTodo</span><span class="token punctuation">(</span>id<span class="token punctuation">)</span>
<span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>
</code></pre>
<p>ç»‘å®šåœ¨ç‚¹å‡»äº‹ä»¶çš„å›è°ƒä¸Š</p>
<p>å­ç»„ä»¶æƒ³å½±å“çˆ¶ç»„ä»¶çš„çŠ¶æ€ï¼Œéœ€è¦çˆ¶ç»„ä»¶ä¼ é€’ä¸€ä¸ªå‡½æ•°ï¼Œå› æ­¤æˆ‘ä»¬åœ¨ <code>App</code> ä¸­æ·»åŠ ä¸€ä¸ª <code>deleteTodo</code> å‡½æ•°</p>
<pre class=" language-js"><code class="language-js"><span class="token comment" spellcheck="true">// app.jsx</span>
deleteTodo <span class="token operator">=</span> <span class="token punctuation">(</span>id<span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>
  <span class="token keyword">const</span> <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span> todos <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span> <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>state
  <span class="token keyword">const</span> newTodos <span class="token operator">=</span> todos<span class="token punctuation">.</span><span class="token function">filter</span><span class="token punctuation">(</span>todoObj <span class="token operator">=</span><span class="token operator">></span> <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> todoObj<span class="token punctuation">.</span>id <span class="token operator">!==</span> id
  <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span><span class="token punctuation">)</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setState</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span> todos<span class="token punctuation">:</span> newTodos <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span><span class="token punctuation">)</span>
<span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>
</code></pre>
<p>ç„¶åå°†è¿™ä¸ªå‡½æ•°ä¼ é€’ç»™ List ç»„ä»¶ï¼Œå†ä¼ é€’ç»™ Item</p>
<p>å¢åŠ ä¸€ä¸ªåˆ¤æ–­</p>
<pre class=" language-js"><code class="language-js"><span class="token keyword">if</span><span class="token punctuation">(</span>window<span class="token punctuation">.</span><span class="token function">confirm</span><span class="token punctuation">(</span><span class="token string">'ç¡®è®¤åˆ é™¤'</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>props<span class="token punctuation">.</span><span class="token function">deleteTodo</span><span class="token punctuation">(</span>id<span class="token punctuation">)</span>
<span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>
</code></pre>
<p><img src="https://ljcimg.oss-cn-beijing.aliyuncs.com/img/react-todolist-detele.gif" alt="react-todolist-detele"></p>
<h3 id="ğŸ“-7-è·å–å®Œæˆæ•°é‡"><a href="#ğŸ“-7-è·å–å®Œæˆæ•°é‡" class="headerlink" title="ğŸ“ 7. è·å–å®Œæˆæ•°é‡"></a>ğŸ“ 7. è·å–å®Œæˆæ•°é‡</h3><p>æˆ‘ä»¬åœ¨ App ä¸­å‘ <code>Footer</code> ç»„ä»¶ä¼ é€’ <code>todos</code> æ•°æ®ï¼Œå†å»ç»Ÿè®¡æ•°æ®</p>
<p>ç»Ÿè®¡ <code>done </code>ä¸º <code>true</code> çš„ä¸ªæ•°</p>
<pre class=" language-js"><code class="language-js"><span class="token keyword">const</span> doneCount <span class="token operator">=</span> todos<span class="token punctuation">.</span><span class="token function">reduce</span><span class="token punctuation">(</span><span class="token punctuation">(</span>pre<span class="token punctuation">,</span> todo<span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> pre <span class="token operator">+</span> <span class="token punctuation">(</span>todo<span class="token punctuation">.</span>done <span class="token operator">?</span> <span class="token number">1</span> <span class="token punctuation">:</span> <span class="token number">0</span><span class="token punctuation">)</span>
<span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span>
</code></pre>
<p>å†æ¸²æŸ“æ•°æ®å³å¯</p>
<p><img src="https://ljcimg.oss-cn-beijing.aliyuncs.com/img/image-20210826160505813.png" alt="image-20210826160505813"></p>
<h3 id="ğŸŠ-8-å…¨é€‰æŒ‰é’®"><a href="#ğŸŠ-8-å…¨é€‰æŒ‰é’®" class="headerlink" title="ğŸŠ 8. å…¨é€‰æŒ‰é’®"></a>ğŸŠ 8. å…¨é€‰æŒ‰é’®</h3><p>é¦–å…ˆæˆ‘ä»¬éœ€è¦åœ¨æŒ‰é’®ä¸Šç»‘å®šäº‹ä»¶ï¼Œç”±äºå­ç»„ä»¶éœ€è¦æ”¹å˜çˆ¶ç»„ä»¶çš„çŠ¶æ€ï¼Œæ‰€ä»¥æˆ‘ä»¬çš„æ“ä½œå’Œä¹‹å‰çš„ä¸€æ ·ï¼Œå…ˆç»‘å®šäº‹ä»¶ï¼Œå†åœ¨ App ä¸­ä¼ ä¸€ä¸ªå‡½æ•°ä¸ª Footer ï¼Œå†åœ¨ Footer ä¸­è°ƒç”¨è¿™ä¸ªå‡½æ•°å¹¶ä¼ å…¥å‚æ•°å³å¯</p>
<p>è¿™é‡Œéœ€è¦ç‰¹åˆ«æ³¨æ„çš„æ˜¯</p>
<p><code>defaulChecked</code> åªæœ‰ç¬¬ä¸€æ¬¡ä¼šèµ·ä½œç”¨ï¼Œæ‰€ä»¥æˆ‘ä»¬éœ€è¦å°†å‰é¢å†™çš„æ”¹æˆ <code>checked</code> æ·»åŠ  <code>onChange</code> äº‹ä»¶å³å¯</p>
<p>é¦–å…ˆæˆ‘ä»¬å…ˆåœ¨ App ä¸­ç»™ Footer ä¼ å…¥ä¸€ä¸ªå‡½æ•° <code>checkAllTodo</code> </p>
<pre class=" language-js"><code class="language-js"><span class="token comment" spellcheck="true">// App.jsx</span>
checkAllTodo <span class="token operator">=</span> <span class="token punctuation">(</span>done<span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>
  <span class="token keyword">const</span> <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span> todos <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span> <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>state
  <span class="token keyword">const</span> newTodos <span class="token operator">=</span> todos<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token punctuation">(</span>todoObj <span class="token operator">=</span><span class="token operator">></span> <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span> <span class="token operator">...</span>todoObj<span class="token punctuation">,</span> done<span class="token punctuation">:</span> done <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>
  <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setState</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span> todos<span class="token punctuation">:</span> newTodos <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span><span class="token punctuation">)</span>
<span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>
<span class="token comment" spellcheck="true">// render</span>
 <span class="token operator">&lt;</span>Footer todos<span class="token operator">=</span><span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>todos<span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span> checkAllTodo<span class="token operator">=</span><span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span><span class="token keyword">this</span><span class="token punctuation">.</span>checkAllTodo<span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span><span class="token operator">/</span><span class="token operator">></span>
</code></pre>
<p>ç„¶åæˆ‘ä»¬éœ€è¦åœ¨ Footer ä¸­è°ƒç”¨ä¸€ä¸‹</p>
<pre class=" language-js"><code class="language-js">handleCheckAll <span class="token operator">=</span> <span class="token punctuation">(</span>event<span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>props<span class="token punctuation">.</span><span class="token function">checkAllTodo</span><span class="token punctuation">(</span>event<span class="token punctuation">.</span>target<span class="token punctuation">.</span>checked<span class="token punctuation">)</span>
<span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>
</code></pre>
<p>è¿™é‡Œæˆ‘ä»¬ä¼ å…¥äº†ä¸€ä¸ªå‚æ•°ï¼šå½“å‰æŒ‰é’®çš„çŠ¶æ€ï¼Œç”¨äºå…¨é€‰å’Œå–æ¶ˆå…¨é€‰</p>
<p>åŒæ—¶æˆ‘ä»¬éœ€è¦æ’é™¤æ€»æ•°ä¸º0 æ—¶çš„å¹²æ‰°</p>
<pre class=" language-js"><code class="language-js"><span class="token operator">&lt;</span>input type<span class="token operator">=</span><span class="token string">"checkbox"</span> checked<span class="token operator">=</span><span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>doneCount <span class="token operator">===</span> total <span class="token operator">&amp;&amp;</span> total <span class="token operator">!==</span> <span class="token number">0</span><span class="token operator">?</span> <span class="token boolean">true</span> <span class="token punctuation">:</span> <span class="token boolean">false</span><span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span> onChange<span class="token operator">=</span><span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span><span class="token keyword">this</span><span class="token punctuation">.</span>handleCheckAll<span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span> <span class="token operator">/</span><span class="token operator">></span>
</code></pre>
<p><img src="https://ljcimg.oss-cn-beijing.aliyuncs.com/img/react-todolist-all.gif" alt="react-todolist-all"></p>
<h3 id="ğŸ¥­-9-åˆ é™¤å·²å®Œæˆ"><a href="#ğŸ¥­-9-åˆ é™¤å·²å®Œæˆ" class="headerlink" title="ğŸ¥­ 9. åˆ é™¤å·²å®Œæˆ"></a>ğŸ¥­ 9. åˆ é™¤å·²å®Œæˆ</h3><p>ç»™åˆ é™¤æŒ‰é’®æ·»åŠ ä¸€ä¸ªç‚¹å‡»äº‹ä»¶ï¼Œå›è°ƒä¸­è°ƒç”¨ App ä¸­æ·»åŠ çš„åˆ é™¤å·²å®Œæˆçš„å‡½æ•°ï¼Œå…¨éƒ½ä¸€ä¸ªå¥—è·¯</p>
<p><strong>å¼ºçƒˆå»ºè®®è¿™ä¸ªè‡ªå·±æ‰“</strong></p>
<p>é¦–å…ˆåœ¨ Footer ç»„ä»¶ä¸­è°ƒç”¨ä¼ æ¥çš„å‡½æ•°ï¼Œåœ¨ App ä¸­å®šä¹‰å‡½æ•°ï¼Œè¿‡æ»¤æ‰  <code>done</code> ä¸º <code>true</code> çš„ï¼Œå†æ›´æ–°çŠ¶æ€å³å¯</p>
<pre class=" language-js"><code class="language-js"><span class="token comment" spellcheck="true">// App.jsx</span>
clearAllDone <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>
  <span class="token keyword">const</span> <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span> todos <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span> <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>state
  <span class="token keyword">const</span> newTodos <span class="token operator">=</span> todos<span class="token punctuation">.</span><span class="token function">filter</span><span class="token punctuation">(</span><span class="token punctuation">(</span>todoObj<span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> todoObj<span class="token punctuation">.</span>done <span class="token operator">!==</span> <span class="token boolean">true</span>
  <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span><span class="token punctuation">)</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setState</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span> todos<span class="token punctuation">:</span> newTodos <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span><span class="token punctuation">)</span>
<span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>
</code></pre>
<p><img src="https://ljcimg.oss-cn-beijing.aliyuncs.com/img/react-todolist-clear.gif" alt="react-todolist-clear"></p>
<h2 id="æ€»ç»“-1"><a href="#æ€»ç»“-1" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h2><ol>
<li>æ³¨æ„ï¼šclassNameã€style å†™æ³•</li>
<li>çˆ¶ç»„ä»¶ç»™å­ç»„ä»¶ä¼ é€’æ•°æ®ï¼Œé‡‡ç”¨ <code>props</code></li>
<li>å­ç»„ä»¶ç»™çˆ¶ç»„ä»¶ä¼ é€’æ•°æ®ï¼Œé€šè¿‡ <code>props</code>ï¼ŒåŒæ—¶æå‰ç»™å­ç»„ä»¶ä¼ é€’ä¸€ä¸ªå‡½æ•°</li>
<li>æ³¨æ„ <code>defaultChecked</code> å’Œ <code>checked</code> çš„åŒºåˆ«</li>
<li>ä¸€å®šè¦è‡ªå·±æ•²ä¸€ä¸‹ï¼Œå¥½å¥½ç†è§£æ•°æ®ä¼ é€’</li>
</ol>
<blockquote>
<p>éå¸¸æ„Ÿè°¢æ‚¨çš„é˜…è¯»ï¼Œæ¬¢è¿æå‡ºä½ çš„æ„è§ï¼Œæœ‰ä»€ä¹ˆé—®é¢˜æ¬¢è¿æŒ‡å‡ºï¼Œè°¢è°¢ï¼ğŸˆ</p>
</blockquote>
<h2 id="React-å…¥é—¨å­¦ä¹ ï¼ˆä¸ƒï¼‰â€“-è„šæ‰‹æ¶é…ç½®ä»£ç†"><a href="#React-å…¥é—¨å­¦ä¹ ï¼ˆä¸ƒï¼‰â€“-è„šæ‰‹æ¶é…ç½®ä»£ç†" class="headerlink" title="React å…¥é—¨å­¦ä¹ ï¼ˆä¸ƒï¼‰â€“ è„šæ‰‹æ¶é…ç½®ä»£ç†"></a>React å…¥é—¨å­¦ä¹ ï¼ˆä¸ƒï¼‰â€“ è„šæ‰‹æ¶é…ç½®ä»£ç†</h2><h1 id="å¼•è¨€-2"><a href="#å¼•è¨€-2" class="headerlink" title="å¼•è¨€"></a>å¼•è¨€</h1><p>React æœ¬èº«åªå…³æ³¨äºé¡µé¢ï¼Œå¹¶ä¸åŒ…å«å‘é€ Ajax è¯·æ±‚çš„ä»£ç ï¼Œæ‰€ä»¥ä¸€èˆ¬éƒ½æ˜¯é›†æˆç¬¬ä¸‰æ–¹çš„åŒ…ï¼Œæˆ–è€…è‡ªå·±å°è£…çš„</p>
<p>è‡ªå·±å°è£…çš„è¯ï¼Œæ¯”è¾ƒéº»çƒ¦ï¼Œè€Œä¸”ä¹Ÿå¯èƒ½è€ƒè™‘ä¸å…¨</p>
<p>å¸¸ç”¨çš„æœ‰ä¸¤ä¸ªåº“ï¼Œä¸€ä¸ªæ˜¯JQueryï¼Œä¸€ä¸ªæ˜¯ axios</p>
<ol>
<li>JQuery è¿™ä¸ªæ¯”è¾ƒé‡ï¼Œå› ä¸º Ajax æœåŠ¡ä¹Ÿåªæ˜¯å®ƒè¿™ä¸ªåº“é‡Œçš„ä¸€å°å—åŠŸèƒ½ï¼Œå®ƒä¸»è¦åšçš„è¿˜æ˜¯ DOM æ“ä½œï¼Œè€Œè¿™ä¸åˆ©äº React ï¼Œä¸æ¨èä½¿ç”¨</li>
<li>axios è¿™ä¸ªå°±æ¯”è¾ƒè½»ï¼Œè€Œä¸”é‡‡ç”¨ Promise é£æ ¼ï¼Œä»£ç çš„é€»è¾‘ä¼šç›¸å¯¹æ¸…æ™°ï¼Œ<strong>æ¨èä½¿ç”¨</strong></li>
</ol>
<p>å› æ­¤æˆ‘ä»¬è¿™é‡Œé‡‡ç”¨ axios æ¥å‘é€å®¢æˆ·ç«¯è¯·æ±‚</p>
<p>ä»¥å‰ï¼Œæˆ‘ä»¬åœ¨å‘é€è¯·æ±‚çš„æ—¶å€™ï¼Œç»å¸¸ä¼šé‡åˆ°ä¸€ä¸ªå¾ˆé‡è¦çš„é—®é¢˜ï¼šè·¨åŸŸï¼</p>
<p><img src="https://ljcimg.oss-cn-beijing.aliyuncs.com/img/image-20210827091119837.png" alt="image-20210827091119837"></p>
<p>åœ¨æˆ‘ä»¥å‰çš„å­¦ä¹ ä¸­ï¼ŒåŸºæœ¬ä¸Šéƒ½éœ€è¦æ“ä½œåç«¯æœåŠ¡å™¨ä»£ç æ‰èƒ½è§£å†³è·¨åŸŸçš„é—®é¢˜ï¼Œé…ç½®è¯·æ±‚å¤´ï¼Œåˆ©ç”¨ scriptï¼Œè¿™äº›éƒ½éœ€è¦åç«¯æœåŠ¡å™¨çš„é…åˆï¼Œå› æ­¤æˆ‘ä»¬å‰ç«¯éœ€è¦è‡ªå·±è§£å†³è¿™ä¸ªé—®é¢˜çš„è¯ï¼Œå°±éœ€è¦è¿™ä¸ªæŠ€æœ¯äº†ï¼š<strong>ä»£ç†</strong>ã€‚</p>
<p>åœ¨è¯´ä»£ç†ä¹‹å‰ï¼Œå…ˆè°ˆè°ˆä¸ºä»€ä¹ˆä¼šå‡ºç°è·¨åŸŸï¼Ÿ</p>
<p>è¿™ä¸ªåº”è¯¥æ˜¯æºäºæµè§ˆå™¨çš„åŒæºç­–ç•¥ã€‚æ‰€è°“åŒæºï¼ˆå³æŒ‡åœ¨åŒä¸€ä¸ªåŸŸï¼‰å°±æ˜¯ä¸¤ä¸ªé¡µé¢å…·æœ‰ç›¸åŒçš„åè®®ï¼Œä¸»æœºå’Œç«¯å£å·ï¼Œ å½“ä¸€ä¸ªè¯·æ±‚ URL çš„<strong>åè®®ã€åŸŸåã€ç«¯å£</strong>ä¸‰è€…ä¹‹é—´ä»»æ„ä¸€ä¸ªä¸å½“å‰é¡µé¢ URL ä¸åŒå³ä¸ºè·¨åŸŸ ã€‚</p>
<p>ä¹Ÿå°±æ˜¯è¯´ <code>xxx:3000</code>å’Œ <code>xxx:4000</code> ä¼šæœ‰è·¨åŸŸé—®é¢˜ï¼Œ<code>xxx:3000</code> ä¸ <code>abc:3000</code> æœ‰è·¨åŸŸé—®é¢˜</p>
<p>é‚£æ¥ä¸‹æ¥æˆ‘ä»¬é‡‡ç”¨<strong>é…ç½®ä»£ç†</strong>çš„æ–¹å¼å»è§£å†³è¿™ä¸ªé—®é¢˜</p>
<blockquote>
<p>å…³äºè·¨åŸŸçš„é—®é¢˜è§£å†³æ–¹æ¡ˆï¼Œåœ¨ä¹‹åçš„æ–‡ç« ä¼šæœ‰æ€»ç»“ ~</p>
</blockquote>
<h2 id="1-å…¨å±€ä»£ç†"><a href="#1-å…¨å±€ä»£ç†" class="headerlink" title="1. å…¨å±€ä»£ç†"></a>1. å…¨å±€ä»£ç†</h2><p>ç¬¬ä¸€ç§æ–¹æ³•ï¼Œæˆ‘æŠŠå®ƒå«åšå…¨å±€ä»£ç†ï¼Œå› ä¸ºå®ƒç›´æ¥å°†ä»£ç†é…ç½®åœ¨äº†é…ç½®æ–‡ä»¶ <code>package.json</code> ä¸­</p>
<pre class=" language-json"><code class="language-json"><span class="token property">"proxy"</span><span class="token operator">:</span><span class="token string">"http://localhost:5000"</span>  
// <span class="token property">"proxy"</span><span class="token operator">:</span><span class="token string">"è¯·æ±‚çš„åœ°å€"</span>
</code></pre>
<p>è¿™æ ·é…ç½®ä»£ç†æ—¶ï¼Œé¦–å…ˆä¼šåœ¨æŠ“åŸè¯·æ±‚åœ°å€ä¸Šè®¿é—®ï¼Œå¦‚æœè®¿é—®ä¸åˆ°æ–‡ä»¶ï¼Œå°±ä¼šè½¬å‘åˆ°è¿™é‡Œé…ç½®çš„åœ°å€ä¸Šå»è¯·æ±‚</p>
<p><img src="https://ljcimg.oss-cn-beijing.aliyuncs.com/img/%E8%BD%AC%E5%8F%91.png" alt="è½¬å‘"></p>
<p>æˆ‘ä»¬éœ€è¦åšçš„å°±æ˜¯åœ¨æˆ‘ä»¬çš„è¯·æ±‚ä»£ç ä¸­ï¼Œå°†è¯·æ±‚çš„åœ°å€æ”¹åˆ°è½¬å‘çš„åœ°å€ï¼Œå³å¯</p>
<p>ä½†æ˜¯è¿™æ ·ä¼šæœ‰ä¸€äº›é—®é¢˜ï¼Œå®ƒä¼šå…ˆå‘æˆ‘ä»¬è¯·æ±‚çš„åœ°å€ï¼Œä¹Ÿå°±æ˜¯è¿™é‡Œçš„ <code>3000</code> ç«¯å£ä¸‹è¯·æ±‚æ•°æ®ï¼Œå¦‚æœåœ¨ <code>3000</code> ç«¯å£ä¸­å­˜åœ¨æˆ‘ä»¬éœ€è¦è®¿é—®çš„æ–‡ä»¶ï¼Œä¼šç›´æ¥è¿”å›ï¼Œ<strong>ä¸ä¼šå†å»è½¬å‘</strong></p>
<p>å› æ­¤è¿™å°±ä¼šå‡ºç°é—®é¢˜ï¼ŒåŒæ—¶å› ä¸ºè¿™ç§æ–¹å¼é‡‡ç”¨çš„æ˜¯å…¨å±€é…ç½®çš„å…³ç³»ï¼Œå¯¼è‡´<strong>åªèƒ½è½¬å‘åˆ°ä¸€ä¸ªåœ°å€</strong>ï¼Œä¸èƒ½é…ç½®å¤šä¸ªä»£ç†</p>
<h2 id="2-å•ç‹¬é…ç½®"><a href="#2-å•ç‹¬é…ç½®" class="headerlink" title="2. å•ç‹¬é…ç½®"></a>2. å•ç‹¬é…ç½®</h2><p>è¿™ä¹Ÿæ˜¯æˆ‘è‡ªå·±èµ·çš„åå­—ï¼Œè¿™ç§é…ç½®æ–¹å¼ï¼Œå¯ä»¥ç»™å¤šä¸ªè¯·æ±‚é…ç½®ä»£ç†ï¼Œéå¸¸ä¸é”™</p>
<p>å®ƒçš„å·¥ä½œåŸç†å’Œå…¨å±€é…ç½®æ˜¯ä¸€æ ·çš„ï¼Œä½†æ˜¯å†™æ³•ä¸åŒ</p>
<p><strong>é¦–å…ˆ</strong>æˆ‘ä»¬éœ€è¦åœ¨ <code>src</code> ç›®å½•ä¸‹ï¼Œåˆ›å»ºä»£ç†é…ç½®æ–‡ä»¶ <code>setupProxy.js</code> </p>
<p>æ³¨æ„ï¼šè¿™ä¸ªæ–‡ä»¶åªèƒ½å«è¿™ä¸ªåå­—ï¼Œè„šæ‰‹æ¶åœ¨å¯åŠ¨çš„æ—¶å€™ï¼Œä¼šè‡ªåŠ¨æ‰§è¡Œè¿™äº›æ–‡ä»¶</p>
<p><strong>ç¬¬äºŒæ­¥</strong></p>
<p>é…ç½®å…·ä½“çš„ä»£ç†è§„åˆ™ï¼Œæˆ‘ä»¬å¤§è‡´è®²è®²è¿™äº›æ˜¯ä»€ä¹ˆæ„æ€</p>
<ol>
<li><p>é¦–å…ˆæˆ‘ä»¬éœ€è¦å¼•å…¥è¿™ä¸ª <code>http-proxy-middleware</code> ä¸­é—´ä»¶ï¼Œç„¶åéœ€è¦å¯¼å‡ºä¸€ä¸ªå¯¹è±¡ï¼Œè¿™é‡Œå»ºè®®ä½¿ç”¨å‡½æ•°ï¼Œä½¿ç”¨å¯¹è±¡çš„è¯å…¼å®¹æ€§ä¸å¤§å¥½</p>
</li>
<li><p>ç„¶åæˆ‘ä»¬éœ€è¦åœ¨ <code>app.use</code> ä¸­é…ç½®ï¼Œæˆ‘ä»¬çš„ä»£ç†è§„åˆ™ï¼Œé¦–å…ˆ <code>proxy</code>  æ¥æ”¶çš„ç¬¬ä¸€ä¸ªå‚æ•°æ˜¯éœ€è¦è½¬å‘çš„è¯·æ±‚ï¼Œæˆ‘çš„ç†è§£æ˜¯ä¸€ä¸ªæ ‡å¿—çš„ä½œç”¨ï¼Œå½“æœ‰è¿™ä¸ªæ ‡å¿—çš„æ—¶å€™ï¼Œé¢„ç¤ºç€æˆ‘ä»¬éœ€è¦é‡‡ç”¨ä»£ç†ï¼Œä¾‹å¦‚ <code>/api1</code> ï¼Œæˆ‘ä»¬å°±éœ€è¦åœ¨æˆ‘ä»¬ <code>axios</code> çš„è¯·æ±‚è·¯å¾„ä¸­ï¼ŒåŠ ä¸Š <code>/api1</code> ï¼Œè¿™æ ·æ‰€æœ‰æ·»åŠ äº† <code>/api1</code> å‰ç¼€çš„è¯·æ±‚éƒ½ä¼šè½¬å‘åˆ°è¿™</p>
</li>
<li><p>ç¬¬äºŒä¸ªå‚æ•°æ¥å—çš„æ˜¯ä¸€ä¸ªå¯¹è±¡ï¼Œç”¨äºé…ç½®ä»£ç†ã€‚</p>
<ul>
<li><code>target</code> å±æ€§ç”¨äºé…ç½®è½¬å‘ç›®æ ‡åœ°å€ï¼Œä¹Ÿå°±æ˜¯æˆ‘ä»¬æ•°æ®çš„åœ°å€</li>
<li><code>changeOrigin</code> å±æ€§ç”¨äºæ§åˆ¶æœåŠ¡å™¨æ”¶åˆ°çš„è¯·æ±‚å¤´ä¸­ <code>host</code> å­—æ®µï¼Œå¯ä»¥ç†è§£ä¸ºä¸€ä¸ªä¼ªè£…æ•ˆæœï¼Œä¸º <code>true</code> æ—¶ï¼Œæ”¶åˆ°çš„ <code>host</code> å°±ä¸ºè¯·æ±‚æ•°æ®çš„åœ°å€</li>
<li><code>pathRewrite</code> å±æ€§ç”¨äºå»é™¤è¯·æ±‚å‰ç¼€ï¼Œå› ä¸ºæˆ‘ä»¬é€šè¿‡ä»£ç†è¯·æ±‚æ—¶ï¼Œéœ€è¦åœ¨è¯·æ±‚åœ°å€å‰æ·»åŠ ä¸€ä¸ªæ ‡å¿—ï¼Œä½†æ˜¯å®é™…çš„åœ°å€æ˜¯ä¸å­˜åœ¨è¿™ä¸ªæ ‡å¿—çš„ï¼Œæ‰€ä»¥æˆ‘ä»¬<strong>ä¸€å®šè¦å»é™¤</strong>è¿™ä¸ªå‰ç¼€ï¼Œè¿™é‡Œé‡‡ç”¨çš„æœ‰ç‚¹ç±»ä¼¼äºæ­£åˆ™æ›¿æ¢çš„æ–¹å¼</li>
</ul>
</li>
</ol>
<p>é…ç½®ä¸€ä¸ªä»£ç†çš„å®Œæ•´ä»£ç å¦‚ä¸‹</p>
<pre class=" language-js"><code class="language-js"><span class="token keyword">const</span> proxy <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'http-proxy-middleware'</span><span class="token punctuation">)</span>
module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span>app<span class="token punctuation">)</span> <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>
  app<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span>
    <span class="token function">proxy</span><span class="token punctuation">(</span><span class="token string">'/api1'</span><span class="token punctuation">,</span> <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span> 
      target<span class="token punctuation">:</span> <span class="token string">'http://localhost:5000'</span><span class="token punctuation">,</span> <span class="token comment" spellcheck="true">//é…ç½®è½¬å‘ç›®æ ‡åœ°å€</span>
      changeOrigin<span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token comment" spellcheck="true">//æ§åˆ¶æœåŠ¡å™¨æ¥æ”¶åˆ°çš„è¯·æ±‚å¤´ä¸­hostå­—æ®µçš„å€¼</span>
      pathRewrite<span class="token punctuation">:</span> <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span><span class="token string">'^/api1'</span><span class="token punctuation">:</span> <span class="token string">''</span><span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span> <span class="token comment" spellcheck="true">//å»é™¤è¯·æ±‚å‰ç¼€å€(å¿…é¡»é…ç½®)</span>
    <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token punctuation">)</span>
<span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>
</code></pre>
<hr>
<p>å…³äºè„šæ‰‹æ¶é…ç½®ä»£ç†çš„å†…å®¹å°±åˆ°è¿™é‡Œå•¦ï¼</p>
<blockquote>
<p>éå¸¸æ„Ÿè°¢æ‚¨çš„é˜…è¯»ï¼Œæ¬¢è¿æå‡ºä½ çš„æ„è§ï¼Œæœ‰ä»€ä¹ˆé—®é¢˜æ¬¢è¿æŒ‡å‡ºï¼Œè°¢è°¢ï¼ğŸˆ</p>
</blockquote>
<h2 id="React-å…¥é—¨å­¦ä¹ ï¼ˆå…«ï¼‰â€“-GitHub-æœç´¢æ¡ˆä¾‹"><a href="#React-å…¥é—¨å­¦ä¹ ï¼ˆå…«ï¼‰â€“-GitHub-æœç´¢æ¡ˆä¾‹" class="headerlink" title="React å…¥é—¨å­¦ä¹ ï¼ˆå…«ï¼‰â€“ GitHub æœç´¢æ¡ˆä¾‹"></a>React å…¥é—¨å­¦ä¹ ï¼ˆå…«ï¼‰â€“ GitHub æœç´¢æ¡ˆä¾‹</h2><h2 id="å¼•è¨€-3"><a href="#å¼•è¨€-3" class="headerlink" title="å¼•è¨€"></a>å¼•è¨€</h2><p>æœ¬æ–‡ä¸»è¦ä»‹ç» React å­¦ä¹ ä¸­ Github æœç´¢æ¡ˆä¾‹ï¼Œè¿™ä¸ªæ¡ˆä¾‹ä¸»è¦æ¶‰åŠåˆ°äº† Axios å‘é€è¯·æ±‚ï¼Œæ•°æ®æ¸²æŸ“ä»¥åŠä¸€äº›ä¸­é—´äº¤æ›¿æ•ˆæœçš„å®ç°</p>
<p>ä¸ªäººæ„Ÿè§‰åœ¨åšå®Œ TodoList æ¡ˆä¾‹ä¹‹åï¼Œè¿™ä¸ªæ¡ˆä¾‹ä¼šå¾ˆè½»æ¾ï¼Œåªæ˜¯å¤šåŠ äº†ä¸€ä¸ª Loading æ•ˆæœçš„å®ç°æ€è·¯ï¼Œä»¥åŠä¸€äº›å°ç»†èŠ‚çš„å®Œå–„ï¼Œæ„Ÿè§‰ç»ƒç»ƒæ‰‹è¿˜æ˜¯å¾ˆä¸é”™çš„</p>
<h2 id="ä¸€ã€å®ç°é™æ€ç»„ä»¶"><a href="#ä¸€ã€å®ç°é™æ€ç»„ä»¶" class="headerlink" title="ä¸€ã€å®ç°é™æ€ç»„ä»¶"></a>ä¸€ã€å®ç°é™æ€ç»„ä»¶</h2><p>å’Œä¹‹å‰çš„ TodoList æ¡ˆä¾‹ä¸€æ ·ï¼Œæˆ‘ä»¬éœ€è¦å…ˆå®ç°é™æ€ç»„ä»¶ï¼Œåœ¨å®ç°é™æ€ç»„ä»¶ä¹‹å‰ï¼Œæˆ‘ä»¬è¿˜éœ€è¦æ‹†åˆ†ç»„ä»¶ï¼Œè¿™ä¸ªé¡µé¢çš„ç»„ä»¶ï¼Œæˆ‘ä»¬å¯ä»¥å°†å®ƒæ‹†æˆä»¥ä¸‹ä¸¤ä¸ªç»„ä»¶ï¼Œç¬¬ä¸€ä¸ªç»„ä»¶æ˜¯ <code>Search</code>ï¼Œç¬¬äºŒä¸ªæ˜¯ <code>List</code> </p>
<p><img src="https://ljcimg.oss-cn-beijing.aliyuncs.com/img/image-20210828065604542.png" alt="image-20210828065604542"></p>
<p>æ¥ä¸‹æ¥æˆ‘ä»¬éœ€è¦å°†æå‰å†™å¥½çš„é™æ€é¡µé¢ï¼Œå¯¹åº”æ‹†åˆ†åˆ°ç»„ä»¶å½“ä¸­</p>
<p>æ³¨æ„ï¼š</p>
<ol>
<li>class éœ€è¦æ”¹æˆ className</li>
<li>style çš„å€¼éœ€è¦ä½¿ç”¨åŒèŠ±æ‹¬å·çš„å½¢å¼</li>
</ol>
<p>æœ€é‡è¦çš„ä¸€ç‚¹å°±æ˜¯ï¼Œ<code>img</code> æ ‡ç­¾ï¼Œä¸€å®šè¦<strong>æ·»åŠ </strong> <code>alt</code> å±æ€§è¡¨ç¤ºå›¾ç‰‡åŠ è½½å¤±è´¥æ—¶çš„æç¤ºã€‚</p>
<p>åŒæ—¶ï¼Œ<code>a</code> æ ‡ç­¾è¦æ·»åŠ  <code>rel=&quot;noreferrer&quot;</code>å±æ€§ï¼Œä¸ç„¶ä¼šæœ‰å¤§é‡çš„è­¦å‘Šå‡ºç°</p>
<p><img src="https://ljcimg.oss-cn-beijing.aliyuncs.com/img/image-20210828070148865.png" alt="image-20210828070148865"></p>
<h2 id="äºŒã€axios-å‘é€è¯·æ±‚"><a href="#äºŒã€axios-å‘é€è¯·æ±‚" class="headerlink" title="äºŒã€axios å‘é€è¯·æ±‚"></a>äºŒã€axios å‘é€è¯·æ±‚</h2><p>åœ¨å®ç°é™æ€ç»„ä»¶ä¹‹åï¼Œæˆ‘ä»¬éœ€è¦é€šè¿‡å‘ <code>github</code> å‘é€è¯·æ±‚ï¼Œæ¥è·å–ç›¸åº”çš„ç”¨æˆ·ä¿¡æ¯</p>
<p>ä½†æ˜¯ç”±äºçŸ­æ—¶é—´å†…å¤šæ¬¡è¯·æ±‚ï¼Œå¯èƒ½ä¼šå¯¼è‡´è¯·æ±‚ä¸è¿”å›ç»“æœç­‰æƒ…å†µå‘ç”Ÿï¼Œå› æ­¤æˆ‘ä»¬é‡‡ç”¨äº†ä¸€ä¸ªäº‹å…ˆæ­å»ºå¥½çš„æœ¬åœ°æœåŠ¡å™¨</p>
<p>æˆ‘ä»¬å¯åŠ¨æœåŠ¡å™¨ï¼Œå‘è¿™ä¸ªåœ°å€å‘é€è¯·æ±‚å³å¯</p>
<p><img src="https://ljcimg.oss-cn-beijing.aliyuncs.com/img/image-20210828071053508.png" alt="image-20210828071053508"></p>
<p>è¿™ä¸ªè¯·æ±‚ç±»å‹æ˜¯ GET è¯·æ±‚ï¼Œæˆ‘ä»¬éœ€è¦ä¼ é€’ä¸€ä¸ªæœç´¢çš„å…³é”®å­—ï¼Œå»è¯·æ±‚æ•°æ®</p>
<p>æˆ‘ä»¬é¦–å…ˆè¦è·å–åˆ°ç”¨æˆ·ç‚¹å‡»æœç´¢æŒ‰é’®å<strong>è¾“å…¥æ¡†ä¸­çš„å€¼</strong></p>
<p>åœ¨éœ€è¦è§¦å‘äº‹ä»¶çš„ <code>input</code> æ ‡ç­¾ä¸­ï¼Œæ·»åŠ  <code>ref</code> å±æ€§</p>
<pre class=" language-js"><code class="language-js"> <span class="token operator">&lt;</span>input ref<span class="token operator">=</span><span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>c <span class="token operator">=</span><span class="token operator">></span> <span class="token keyword">this</span><span class="token punctuation">.</span>keyWordElement <span class="token operator">=</span> c<span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span> type<span class="token operator">=</span><span class="token string">"text"</span> placeholder<span class="token operator">=</span><span class="token string">"è¾“å…¥å…³é”®è¯ç‚¹å‡»æœç´¢"</span> <span class="token operator">/</span><span class="token operator">></span>
</code></pre>
<p>æˆ‘ä»¬å¯ä»¥é€šè¿‡ <code>this.keyWordElement</code> å±æ€§æ¥è·å–åˆ°è¿™ä¸ªå½“å‰èŠ‚ç‚¹ï¼Œä¹Ÿå°±æ˜¯è¿™ä¸ª <code>input</code> æ¡†</p>
<p>æˆ‘ä»¬å†é€šè¿‡ <code>value</code> å€¼ï¼Œå³å¯è·å–åˆ°å½“å‰ <code>input</code> æ¡†ä¸­çš„å€¼</p>
<pre class=" language-js"><code class="language-js"><span class="token comment" spellcheck="true">// search å›è°ƒ</span>
<span class="token keyword">const</span> <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span> keyWordElement<span class="token punctuation">:</span> <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span> value<span class="token punctuation">:</span> keyWord <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span> <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span> <span class="token operator">=</span> <span class="token keyword">this</span>
</code></pre>
<p>è¿™é‡Œé‡‡ç”¨çš„æ˜¯è¿ç»­çš„è§£æ„èµ‹å€¼ï¼Œæœ€åå°† <code>value</code> æ”¹ä¸º <code>keyWord</code> ï¼Œè¿™æ ·å¥½è¾¨åˆ«</p>
<p>è·å–åˆ°äº† <code>keyWord</code> å€¼ï¼Œæ¥ä¸‹æ¥æˆ‘ä»¬å°±éœ€è¦å‘é€è¯·æ±‚äº†</p>
<pre class=" language-js"><code class="language-js">axios<span class="token punctuation">.</span><span class="token keyword">get</span><span class="token punctuation">(</span><span class="token template-string"><span class="token string">`http://localhost:3000/api1/search/users?q=$&amp;#123;keyWord&amp;#125;`</span></span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span>
    response <span class="token operator">=</span><span class="token operator">></span> <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>props<span class="token punctuation">.</span><span class="token function">updateAppState</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span> isLoading<span class="token punctuation">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span> users<span class="token punctuation">:</span> response<span class="token punctuation">.</span>data<span class="token punctuation">.</span>items <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span><span class="token punctuation">)</span>
    <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span><span class="token punctuation">,</span>
    error <span class="token operator">=</span><span class="token operator">></span> <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>props<span class="token punctuation">.</span><span class="token function">updateAppState</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span> isLoading<span class="token punctuation">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span> err<span class="token punctuation">:</span> error<span class="token punctuation">.</span>message <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span><span class="token punctuation">)</span>
    <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>
<span class="token punctuation">)</span>
</code></pre>
<p> æˆ‘ä»¬å°† <code>keyWord</code> æ¥åœ¨è¯·æ±‚åœ°å€çš„åé¢ï¼Œæ¥ä¼ é€’å‚æ•°ï¼Œä»¥è·å¾—ç›¸å…³æ•°æ®</p>
<p>è¿™é‡Œä¼šå­˜åœ¨è·¨åŸŸçš„é—®é¢˜ï¼Œå› æˆ‘æˆ‘ä»¬æ˜¯ç«™åœ¨ 3000 ç«¯å£å‘ 5000 ç«¯å£å‘é€è¯·æ±‚çš„</p>
<p>å› æ­¤æˆ‘ä»¬éœ€è¦é…ç½®ä»£ç†æ¥è§£å†³è·¨åŸŸçš„é—®é¢˜ï¼Œæˆ‘ä»¬éœ€è¦åœ¨è¯·æ±‚åœ°å€å‰ï¼ŒåŠ ä¸Šå¯ç”¨ä»£ç†çš„æ ‡å¿— <code>/api1</code></p>
<pre class=" language-js"><code class="language-js"><span class="token comment" spellcheck="true">// setupProxy.js</span>
<span class="token keyword">const</span> proxy <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'http-proxy-middleware'</span><span class="token punctuation">)</span>
module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span>app<span class="token punctuation">)</span> <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>
    app<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span>
        <span class="token function">proxy</span><span class="token punctuation">(</span><span class="token string">'/api1'</span><span class="token punctuation">,</span> <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>
            target<span class="token punctuation">:</span> <span class="token string">'http://localhost:5000'</span><span class="token punctuation">,</span>
            changeOrigin<span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
            pathRewrite<span class="token punctuation">:</span> <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>
                <span class="token string">'^/api1'</span><span class="token punctuation">:</span> <span class="token string">''</span>
            <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>
        <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span><span class="token punctuation">)</span>
    <span class="token punctuation">)</span>
<span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>
</code></pre>
<p>è¿™æ ·æˆ‘ä»¬å°±èƒ½æˆåŠŸçš„è·å–åˆ°äº†æ•°æ®</p>
<p><img src="https://ljcimg.oss-cn-beijing.aliyuncs.com/img/image-20210828072705747.png" alt="image-20210828072705747"></p>
<h2 id="ä¸‰ã€æ¸²æŸ“æ•°æ®"><a href="#ä¸‰ã€æ¸²æŸ“æ•°æ®" class="headerlink" title="ä¸‰ã€æ¸²æŸ“æ•°æ®"></a>ä¸‰ã€æ¸²æŸ“æ•°æ®</h2><p>åœ¨è·å–åˆ°äº†æ•°æ®ä¹‹åï¼Œæˆ‘ä»¬éœ€è¦å¯¹æ•°æ®è¿›è¡Œåˆ†æï¼Œå¹¶å°†è¿™äº›æ•°æ®æ¸²æŸ“åˆ°é¡µé¢ä¸Š</p>
<p>æ¯”è¾ƒé‡è¦çš„ä¸€ç‚¹æ˜¯ï¼Œæˆ‘ä»¬è·å–åˆ°çš„ç”¨æˆ·ä¸ªæ•°æ˜¯åŠ¨æ€çš„ï¼Œå› æ­¤æˆ‘ä»¬éœ€è¦é€šè¿‡éå†çš„æ–¹å¼å»å®ç°</p>
<p>åŒæ—¶æˆ‘ä»¬çš„æ•°æ®å½“å‰å­˜åœ¨äº <code>Search</code> ç»„ä»¶å½“ä¸­ï¼Œæˆ‘ä»¬éœ€è¦åœ¨ <code>List</code> ç»„ä»¶ä¸­ä½¿ç”¨ï¼Œæ‰€ä»¥æˆ‘ä»¬éœ€è¦ä¸ª <code>Search</code> ç»„ä»¶ä¼ é€’ä¸€ä¸ªå‡½æ•°ï¼Œæ¥å®ç°å­å‘çˆ¶ä¼ é€’æ•°æ®ï¼Œå†é€šè¿‡ <code>App</code> ç»„ä»¶ï¼Œå‘<code>List</code> ç»„ä»¶ä¼ é€’æ•°æ®å³å¯å¾—åˆ° <code>data</code></p>
<pre class=" language-js"><code class="language-js">users<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token punctuation">(</span>userObj<span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>
  <span class="token keyword">return</span> <span class="token punctuation">(</span>
    <span class="token operator">&lt;</span>div key<span class="token operator">=</span><span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>userObj<span class="token punctuation">.</span>id<span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span> className<span class="token operator">=</span><span class="token string">"card"</span><span class="token operator">></span>
      <span class="token operator">&lt;</span>a rel<span class="token operator">=</span><span class="token string">"noreferrer"</span> href<span class="token operator">=</span><span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>userObj<span class="token punctuation">.</span>html_url<span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span> target<span class="token operator">=</span><span class="token string">"_blank"</span><span class="token operator">></span>
        <span class="token operator">&lt;</span>img alt<span class="token operator">=</span><span class="token string">"avatar"</span> src<span class="token operator">=</span><span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>userObj<span class="token punctuation">.</span>avatar_url<span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span> style<span class="token operator">=</span><span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span><span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span> width<span class="token punctuation">:</span> <span class="token string">'100px'</span> <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span><span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span> <span class="token operator">/</span><span class="token operator">></span>
      <span class="token operator">&lt;</span><span class="token operator">/</span>a<span class="token operator">></span>
      <span class="token operator">&lt;</span>p className<span class="token operator">=</span><span class="token string">"card-text"</span><span class="token operator">></span><span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>userObj<span class="token punctuation">.</span>login<span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span><span class="token operator">&lt;</span><span class="token operator">/</span>p<span class="token operator">></span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">></span>
  <span class="token punctuation">)</span>
<span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span><span class="token punctuation">)</span>
</code></pre>
<p>è¿™é‡Œæˆ‘ä»¬é€šè¿‡ <code>map</code> éå†æ•´ä¸ªè¿”å›çš„æ•°æ®ï¼Œæ¥å¾ªç¯çš„æ·»åŠ  <code>card</code> çš„ä¸ªæ•°</p>
<p>åŒæ—¶å°†ä¸€äº›ç”¨æˆ·ä¿¡æ¯æ·»åŠ åˆ°å…¶ä¸­</p>
<h2 id="å››ã€å¢åŠ äº¤äº’"><a href="#å››ã€å¢åŠ äº¤äº’" class="headerlink" title="å››ã€å¢åŠ äº¤äº’"></a>å››ã€å¢åŠ äº¤äº’</h2><p>åšåˆ°è¿™é‡Œå…¶å®å·²ç»å®Œæˆäº†ä¸€å¤§åŠäº†ï¼Œä½†æ˜¯ä¼¼ä¹å°‘äº†ç‚¹äº¤äº’</p>
<ul>
<li>åŠ è½½æ—¶çš„ loading æ•ˆæœ</li>
<li>ç¬¬ä¸€æ¬¡è¿›å…¥é¡µé¢æ—¶ List ç»„ä»¶ä¸­çš„<strong>æ¬¢è¿ä½¿ç”¨å­—æ ·</strong></li>
<li>åœ¨æŠ¥é”™æ—¶åº”è¯¥æç¤ºé”™è¯¯ä¿¡æ¯</li>
</ul>
<p>è¿™ä¸€äº›éƒ½é¢„ç¤ºç€æˆ‘ä»¬ä¸èƒ½å•çº¯çš„å°†ç”¨æˆ·æ•°æ®ç›´æ¥æ¸²æŸ“ï¼Œæˆ‘ä»¬éœ€è¦æ·»åŠ ä¸€äº›åˆ¤æ–­ï¼Œä»€ä¹ˆæ—¶å€™è¯¥æ¸²æŸ“æ•°æ®ï¼Œä»€ä¹ˆæ—¶å€™æ¸²æŸ“ loadingï¼Œä»€ä¹ˆæ—¶å€™æ¸²æŸ“ err </p>
<p>é¦–å…ˆæˆ‘ä»¬éœ€è¦å¢åŠ ä¸€äº›çŠ¶æ€ï¼Œæ¥æŒ‡ç¤ºæˆ‘ä»¬è¯¥æ¸²æŸ“ä»€ä¹ˆï¼Œæ¯”å¦‚</p>
<ul>
<li>é‡‡ç”¨ <code>isFrist</code> æ¥åˆ¤æ–­é¡µé¢æ˜¯å¦ç¬¬ä¸€æ¬¡å¯åŠ¨ï¼Œåˆå§‹å€¼ç»™ <code>true</code>ï¼Œç‚¹å‡»æœç´¢åæ”¹ä¸º <code>false</code></li>
<li>é‡‡ç”¨ <code>isLoading</code> æ¥åˆ¤æ–­æ˜¯å¦åº”è¯¥æ˜¾ç¤º Loading åŠ¨ç”»ï¼Œåˆå§‹å€¼ç»™ <code>false</code>ï¼Œåœ¨ç‚¹å‡»æœç´¢åæ”¹ä¸º <code>true</code>ï¼Œåœ¨æ‹¿åˆ°æ•°æ®åæ”¹ä¸º <code>false</code></li>
<li>é‡‡ç”¨ <code>err</code> æ¥åˆ¤æ–­æ˜¯å¦æ¸²æŸ“é”™è¯¯ä¿¡æ¯ï¼Œå½“æŠ¥é”™æ—¶å¡«å…¥æŠ¥é”™ä¿¡æ¯ï¼Œåˆå§‹å€¼<strong>ç»™ç©º</strong></li>
</ul>
<pre class=" language-js"><code class="language-js">state <span class="token operator">=</span> <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span> users<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span> isFirst<span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> isLoading<span class="token punctuation">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span> err<span class="token punctuation">:</span> <span class="token string">''</span> <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>
</code></pre>
<p>è¿™æ ·æˆ‘ä»¬å°±éœ€è¦æ”¹å˜æˆ‘å…ˆå‰é‡‡ç”¨çš„æ•°æ®ä¼ é€’æ–¹å¼ï¼Œé‡‡ç”¨æ›´æ–°çŠ¶æ€çš„æ–¹å¼ï¼Œæ¥æ”¶ä¸€ä¸ªçŠ¶æ€å¯¹è±¡æ¥<strong>æ›´æ–°æ•°æ®</strong>ï¼Œè¿™æ ·å°±ä¸ç”¨å»æŒ‡å®šä»€ä¹ˆæ—¶å€™æ›´æ–°ä»€ä¹ˆï¼Œå°±å¯ä»¥å‡å°‘å¾ˆå¤š<strong>ä¸å¿…è¦</strong>çš„å‡½æ•°å£°æ˜</p>
<p>åŒæ—¶åœ¨ App ç»„ä»¶ç»™ List ç»„ä»¶ä¼ é€’æ•°æ®æ—¶ï¼Œæˆ‘ä»¬å¯ä»¥é‡‡ç”¨è§£æ„èµ‹å€¼çš„æ–¹å¼ï¼Œè¿™æ ·å¯ä»¥å‡å°‘ä»£ç é‡</p>
<pre class=" language-js"><code class="language-js"><span class="token comment" spellcheck="true">// App.jsx</span>
<span class="token comment" spellcheck="true">// æ¥æ”¶ä¸€ä¸ªçŠ¶æ€å¯¹è±¡</span>
updateAppState <span class="token operator">=</span> <span class="token punctuation">(</span>stateObj<span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setState</span><span class="token punctuation">(</span>stateObj<span class="token punctuation">)</span>
<span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>
<span class="token operator">&lt;</span>Search updateAppState<span class="token operator">=</span><span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span><span class="token keyword">this</span><span class="token punctuation">.</span>updateAppState<span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span> <span class="token operator">/</span><span class="token operator">></span>
<span class="token operator">&lt;</span>List <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span><span class="token operator">...</span><span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span> <span class="token operator">/</span><span class="token operator">></span>
</code></pre>
<p>è¿™æ ·æˆ‘ä»¬åªéœ€è¦åœ¨ List ç»„ä»¶ä¸­ï¼Œåˆ¤æ–­è¿™äº›çŠ¶æ€çš„å€¼ï¼Œæ¥æ˜¾ç¤ºå³å¯</p>
<pre class=" language-js"><code class="language-js"><span class="token comment" spellcheck="true">// List/index.jsx</span>
<span class="token comment" spellcheck="true">// å¯¹è±¡è§£æ„</span>
<span class="token keyword">const</span> <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span> users<span class="token punctuation">,</span> isFirst<span class="token punctuation">,</span> isLoading<span class="token punctuation">,</span> err <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span> <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>props
<span class="token comment" spellcheck="true">// åˆ¤æ–­</span>
<span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>
  isFirst <span class="token operator">?</span> <span class="token operator">&lt;</span>h2<span class="token operator">></span>æ¬¢è¿ä½¿ç”¨ï¼Œè¾“å…¥å…³é”®å­—ï¼Œç‚¹å‡»æœç´¢<span class="token operator">&lt;</span><span class="token operator">/</span>h2<span class="token operator">></span> <span class="token punctuation">:</span>
    isLoading <span class="token operator">?</span> <span class="token operator">&lt;</span>h2<span class="token operator">></span>Loading<span class="token operator">...</span><span class="token operator">&lt;</span><span class="token operator">/</span>h2<span class="token operator">></span> <span class="token punctuation">:</span>
      err <span class="token operator">?</span> <span class="token operator">&lt;</span>h2 style<span class="token operator">=</span><span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span><span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span> color<span class="token punctuation">:</span> <span class="token string">'red'</span> <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span><span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span><span class="token operator">></span><span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>err<span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span><span class="token operator">&lt;</span><span class="token operator">/</span>h2<span class="token operator">></span> <span class="token punctuation">:</span>
        users<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token punctuation">(</span>userObj<span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>
          <span class="token keyword">return</span> <span class="token punctuation">(</span>
           <span class="token comment" spellcheck="true">// æ¸²æŸ“æ•°æ®å—</span>
           <span class="token comment" spellcheck="true">//ä¸ºäº†å‡å°‘ä»£ç é‡ï¼Œå°±ä¸è´´äº†</span>
          <span class="token punctuation">)</span>
        <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span><span class="token punctuation">)</span>
<span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>
</code></pre>
<p>æˆ‘ä»¬éœ€è¦å…ˆåˆ¤æ–­æ˜¯å¦ç¬¬ä¸€æ¬¡ï¼Œå†åˆ¤æ–­æ˜¯ä¸æ˜¯æ­£åœ¨åŠ è½½ï¼Œå†åˆ¤æ–­æœ‰æ²¡æœ‰æŠ¥é”™ï¼Œæœ€åå†æ¸²æŸ“æ•°æ®</p>
<p>æˆ‘ä»¬çš„çŠ¶æ€æ›´æ–°æ˜¯åœ¨ Search ç»„ä»¶ä¸­å®ç°çš„ï¼Œåœ¨ç‚¹å‡»æœç´¢ä¹‹åæ•°æ®è¿”å›ä¹‹å‰ï¼Œæˆ‘ä»¬éœ€è¦å°† <code>isFirst</code> æ”¹ä¸º <code>false</code> ï¼Œ<code>isLoading</code> æ”¹ä¸º <code>true</code> </p>
<p>æ¥æ”¶åˆ°æ•°æ®åæˆ‘ä»¬å†å°† <code>isLoading</code> æ”¹ä¸º <code>false</code> å³å¯</p>
<p>ä»¥ä¸Šå°±æ˜¯ Github æœç´¢æ¡ˆä¾‹çš„å®ç°è¿‡ç¨‹</p>
<p><img src="https://ljcimg.oss-cn-beijing.aliyuncs.com/img/react-github.gif" alt="react-github"></p>
<p>æœ€ç»ˆæ•ˆæœå›¾</p>
<hr>
<blockquote>
<p>å‰ç«¯è·¯è¿˜æœ‰å¾ˆé•¿ï¼Œä»Šå¤©æˆ‘å°±å¤§äºŒå•¦ï¼åŠ æ²¹å§ï¼ï¼ï¼</p>
</blockquote>
<blockquote>
<p>éå¸¸æ„Ÿè°¢æ‚¨çš„é˜…è¯»ï¼Œæ¬¢è¿æå‡ºä½ çš„æ„è§ï¼Œæœ‰ä»€ä¹ˆé—®é¢˜æ¬¢è¿æŒ‡å‡ºï¼Œè°¢è°¢ï¼ğŸˆ</p>
</blockquote>
<h2 id="React-å…¥é—¨å­¦ä¹ ï¼ˆä¹ï¼‰â€“-æ¶ˆæ¯è®¢é˜…å‘å¸ƒ"><a href="#React-å…¥é—¨å­¦ä¹ ï¼ˆä¹ï¼‰â€“-æ¶ˆæ¯è®¢é˜…å‘å¸ƒ" class="headerlink" title="React å…¥é—¨å­¦ä¹ ï¼ˆä¹ï¼‰â€“ æ¶ˆæ¯è®¢é˜…å‘å¸ƒ"></a>React å…¥é—¨å­¦ä¹ ï¼ˆä¹ï¼‰â€“ æ¶ˆæ¯è®¢é˜…å‘å¸ƒ</h2><h2 id="å¼•è¨€-4"><a href="#å¼•è¨€-4" class="headerlink" title="å¼•è¨€"></a>å¼•è¨€</h2><p>åœ¨æ˜¨å¤©å†™çš„ <code>Github</code> æ¡ˆä¾‹ä¸­ï¼Œæˆ‘ä»¬é‡‡ç”¨çš„æ˜¯ <code>axios</code> å‘é€è¯·æ±‚æ¥è·å–æ•°æ®ï¼ŒåŒæ—¶æˆ‘ä»¬éœ€è¦å°†æ•°æ®ä» <code>Search</code> ä¸­ä¼ å…¥ç»™ <code>App</code>ï¼Œå†ç”± <code>App</code> ç»„ä»¶å†å°†æ•°æ®ä¼ é€’ç»™ <code>List</code> ç»„ä»¶ï¼Œè¿™ä¸ªè¿‡ç¨‹ä¼šæ˜¾å¾—å¤šæ­¤ä¸€ä¸¾ã€‚åŒæ—¶æˆ‘ä»¬è¦å°† <code>state</code> çŠ¶æ€å­˜æ”¾åœ¨ <code>App</code> ç»„ä»¶å½“ä¸­ï¼Œä½†æ˜¯è¿™äº› <code>state</code> çŠ¶æ€éƒ½æ˜¯åœ¨ <code>List</code> ç»„ä»¶ä¸­ä½¿ç”¨çš„ï¼Œåœ¨ <code>Search</code> ç»„ä»¶ä¸­åšçš„ï¼Œåªæ˜¯æ›´æ–°è¿™äº›æ•°æ®ï¼Œé‚£è¿™æ ·ä¹Ÿä¼šæ˜¾å¾—å¾ˆæ²¡æœ‰å¿…è¦ï¼Œæˆ‘ä»¬å®Œå…¨å¯ä»¥å°† <code>state</code> çŠ¶æ€å­˜æ”¾åœ¨ <code>List</code> ç»„ä»¶ä¸­ï¼Œä½†æ˜¯è¿™æ ·æˆ‘ä»¬åˆä¼šé‡åˆ°æŠ€æœ¯éš¾é¢˜ï¼Œå…„å¼Ÿç»„ä»¶é—´çš„æ•°æ®é€šä¿¡ã€‚é‚£è¿™é‡Œæˆ‘ä»¬å°±å­¦ä¹ ä¸€ä¸‹å¦‚ä½•åˆ©ç”¨æ¶ˆæ¯è®¢é˜…å‘å¸ƒæ¥è§£å†³<strong>å…„å¼Ÿç»„ä»¶é—´çš„é€šä¿¡</strong></p>
<h2 id="æ¶ˆæ¯å‘å¸ƒè®¢é˜…"><a href="#æ¶ˆæ¯å‘å¸ƒè®¢é˜…" class="headerlink" title="æ¶ˆæ¯å‘å¸ƒè®¢é˜…"></a>æ¶ˆæ¯å‘å¸ƒè®¢é˜…</h2><p>è¦è§£å†³ä¸Šé¢çš„é—®é¢˜ï¼Œæˆ‘ä»¬å¯ä»¥å€ŸåŠ©å‘å¸ƒè®¢é˜…çš„æœºåˆ¶ï¼Œæˆ‘ä»¬å¯ä»¥å°† App æ–‡ä»¶ä¸­çš„æ‰€æœ‰çŠ¶æ€å’Œæ–¹æ³•å…¨éƒ¨å»é™¤ï¼Œå› ä¸ºæœ¬æ¥å°±ä¸æ˜¯åœ¨ App ç»„ä»¶ä¸­ç›´æ¥ä½¿ç”¨è¿™äº›æ–¹æ³•çš„ï¼ŒApp ç»„ä»¶åªæ˜¯ä¸€ä¸ªä¸­é—´åª’ä»‹è€Œå·²</p>
<p>æˆ‘ä»¬å…ˆç®€å•çš„è¯´ä¸€ä¸‹<strong>æ¶ˆæ¯è®¢é˜…å’Œå‘å¸ƒçš„æœºåˆ¶</strong></p>
<p>å°±æ‹¿æˆ‘ä»¬å¹³å¸¸è®¢æ‚å¿—æ¥è¯´ï¼Œæˆ‘ä»¬å’Œå‡ºç‰ˆç¤¾è¯´æˆ‘ä»¬è¦è®¢ä¸€å¹´çš„è¶³çƒå‘¨åˆŠï¼Œé‚£æ¯æ¬¡æœ‰æ–°çš„è¶³çƒå‘¨åˆŠï¼Œå®ƒéƒ½ä¼šå¯„æ¥ç»™ä½ ã€‚</p>
<p>æ¢åˆ°ä»£ç å±‚é¢ä¸Šï¼Œæˆ‘ä»¬è®¢é˜…äº†ä¸€ä¸ªæ¶ˆæ¯å‡è®¾ä¸º Aï¼Œå½“å¦ä¸€ä¸ªäººå‘å¸ƒäº† A æ¶ˆæ¯æ—¶ï¼Œå› ä¸ºæˆ‘ä»¬è®¢é˜…äº†æ¶ˆæ¯ A ï¼Œé‚£ä¹ˆæˆ‘ä»¬å°±å¯ä»¥æ‹¿åˆ° A æ¶ˆæ¯ï¼Œå¹¶è·å–æ•°æ®</p>
<p>é‚£æˆ‘ä»¬è¦æ€ä¹ˆå®ç°å‘¢ï¼Ÿ</p>
<p>é¦–å…ˆå¼•å…¥ <code>pubsub-js</code></p>
<p>æˆ‘ä»¬éœ€è¦å…ˆå®‰è£…è¿™ä¸ªåº“</p>
<pre class=" language-js"><code class="language-js">yarn add pubsub<span class="token operator">-</span>js
</code></pre>
<p>å¼•å…¥è¿™ä¸ªåº“ </p>
<pre class=" language-js"><code class="language-js"><span class="token keyword">import</span> PubSub <span class="token keyword">from</span> <span class="token string">'pubsub-js'</span>
</code></pre>
<p>è®¢é˜…æ¶ˆæ¯</p>
<p>æˆ‘ä»¬é€šè¿‡ <code>subscribe</code> æ¥è®¢é˜…æ¶ˆæ¯ï¼Œå®ƒæ¥æ”¶ä¸¤ä¸ªå‚æ•°ï¼Œç¬¬ä¸€ä¸ªå‚æ•°æ˜¯æ¶ˆæ¯çš„åç§°ï¼Œç¬¬äºŒä¸ªæ˜¯æ¶ˆæ¯æˆåŠŸçš„å›è°ƒï¼Œå›è°ƒä¸­ä¹Ÿæ¥å—ä¸¤ä¸ªå‚æ•°ï¼Œä¸€ä¸ªæ˜¯æ¶ˆæ¯åç§°ï¼Œä¸€ä¸ªæ˜¯è¿”å›çš„æ•°æ®</p>
<pre class=" language-js"><code class="language-js">PubSub<span class="token punctuation">.</span><span class="token function">subscribe</span><span class="token punctuation">(</span><span class="token string">'search'</span><span class="token punctuation">,</span><span class="token punctuation">(</span>msg<span class="token punctuation">,</span>data<span class="token punctuation">)</span><span class="token operator">=</span><span class="token operator">></span><span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>msg<span class="token punctuation">,</span>data<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span><span class="token punctuation">)</span>
</code></pre>
<p>å‘å¸ƒæ¶ˆæ¯</p>
<p>æˆ‘ä»¬é‡‡ç”¨ <code>publish</code> æ¥å‘å¸ƒæ¶ˆæ¯ï¼Œç”¨æ³•å¦‚ä¸‹</p>
<pre class=" language-js"><code class="language-js">PubSub<span class="token punctuation">.</span><span class="token function">publish</span><span class="token punctuation">(</span><span class="token string">'search'</span><span class="token punctuation">,</span><span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>name<span class="token punctuation">:</span><span class="token string">'tom'</span><span class="token punctuation">,</span>age<span class="token punctuation">:</span><span class="token number">18</span><span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span><span class="token punctuation">)</span>
</code></pre>
<p>æœ‰äº†è¿™äº›åŸºç¡€ï¼Œæˆ‘ä»¬å¯ä»¥å®Œå–„æˆ‘ä»¬æ˜¨å¤©å†™çš„ GitHub æ¡ˆä¾‹</p>
<p>å°†æ•°æ®çš„æ›´æ–°é€šè¿‡ <code>publish</code> æ¥ä¼ é€’ï¼Œä¾‹å¦‚åœ¨å‘é€è¯·æ±‚ä¹‹å‰ï¼Œæˆ‘ä»¬éœ€è¦å‡ºç° loading å­—æ ·</p>
<pre class=" language-js"><code class="language-js"><span class="token comment" spellcheck="true">// ä¹‹å‰çš„å†™æ³•</span>
<span class="token keyword">this</span><span class="token punctuation">.</span>props<span class="token punctuation">.</span><span class="token function">updateAppState</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span> isFirst<span class="token punctuation">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span> isLoading<span class="token punctuation">:</span> <span class="token boolean">true</span> <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span><span class="token punctuation">)</span>
<span class="token comment" spellcheck="true">// æ”¹ä¸ºå‘å¸ƒè®¢é˜…æ–¹å¼</span>
PubSub<span class="token punctuation">.</span><span class="token function">publish</span><span class="token punctuation">(</span><span class="token string">'search'</span><span class="token punctuation">,</span><span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span> isFirst<span class="token punctuation">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span> isLoading<span class="token punctuation">:</span> <span class="token boolean">true</span> <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span><span class="token punctuation">)</span>
</code></pre>
<p>è¿™æ ·æˆ‘ä»¬å°±èƒ½æˆåŠŸçš„åœ¨è¯·æ±‚ä¹‹å‰å‘é€æ¶ˆæ¯ï¼Œæˆ‘ä»¬åªéœ€è¦åœ¨ List ç»„ä»¶ä¸­è®¢é˜…ä¸€ä¸‹è¿™ä¸ªæ¶ˆæ¯å³å¯ï¼Œå¹¶å°†è¿”å›çš„æ•°æ®ç”¨äºæ›´æ–°çŠ¶æ€å³å¯</p>
<pre class=" language-js"><code class="language-js">PubSub<span class="token punctuation">.</span><span class="token function">subscribe</span><span class="token punctuation">(</span><span class="token string">'search'</span><span class="token punctuation">,</span><span class="token punctuation">(</span>msg<span class="token punctuation">,</span>stateObj<span class="token punctuation">)</span><span class="token operator">=</span><span class="token operator">></span><span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setState</span><span class="token punctuation">(</span>stateObj<span class="token punctuation">)</span>
<span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span><span class="token punctuation">)</span>
</code></pre>
<p>åŒæ—¶ä¸Šé¢çš„ä»£ç ä¼šè¿”å›ä¸€ä¸ª <code>token</code> ï¼Œè¿™ä¸ªå°±ç±»ä¼¼äºå®šæ—¶å™¨çš„ç¼–å·çš„å­˜åœ¨ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡è¿™ä¸ª <code>token</code> å€¼ï¼Œæ¥å–æ¶ˆå¯¹åº”çš„è®¢é˜…</p>
<p>é€šè¿‡ <code>unsubscribe</code> æ¥å–æ¶ˆæŒ‡å®šçš„è®¢é˜…</p>
<pre class=" language-js"><code class="language-js">PubSub<span class="token punctuation">.</span><span class="token function">unsubscribe</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>token<span class="token punctuation">)</span>
</code></pre>
<h2 id="æ‰©å±•-â€“-Fetch"><a href="#æ‰©å±•-â€“-Fetch" class="headerlink" title="æ‰©å±• â€“ Fetch"></a>æ‰©å±• â€“ Fetch</h2><p>é¦–å…ˆ fetch ä¹Ÿæ˜¯ä¸€ç§å‘é€è¯·æ±‚çš„æ–¹å¼ï¼Œå®ƒæ˜¯åœ¨ xhr ä¹‹å¤–çš„ä¸€ç§ï¼Œæˆ‘ä»¬å¹³å¸¸ç”¨çš„ Jquery å’Œ axios éƒ½æ˜¯å°è£…äº† xhr çš„ç¬¬ä¸‰æ–¹åº“ï¼Œè€Œ fetch æ˜¯å®˜æ–¹è‡ªå¸¦çš„åº“ï¼ŒåŒæ—¶å®ƒä¹Ÿé‡‡ç”¨çš„æ˜¯ Promise çš„æ–¹å¼ï¼Œå¤§å¤§ç®€åŒ–äº†å†™æ³•</p>
<p>å¦‚ä½•ä½¿ç”¨å‘¢ï¼Ÿ</p>
<pre class=" language-js"><code class="language-js"><span class="token function">fetch</span><span class="token punctuation">(</span><span class="token string">'http://xxx'</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span>response <span class="token operator">=</span><span class="token operator">></span> response<span class="token punctuation">.</span><span class="token function">json</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span>json <span class="token operator">=</span><span class="token operator">></span> console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>json<span class="token punctuation">)</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token keyword">catch</span><span class="token punctuation">(</span>err <span class="token operator">=</span><span class="token operator">></span> console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'Request Failed'</span><span class="token punctuation">,</span> err<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> 
</code></pre>
<p>å®ƒçš„ä½¿ç”¨æ–¹æ³•å’Œ axios éå¸¸çš„ç±»ä¼¼ï¼Œéƒ½æ˜¯è¿”å› Promise å¯¹è±¡ï¼Œä½†æ˜¯ä¸åŒçš„æ˜¯ï¼Œ fetch å…³æ³¨åˆ†ç¦»ï¼Œå®ƒåœ¨ç¬¬ä¸€æ¬¡è¯·æ±‚æ—¶ï¼Œä¸ä¼šç›´æ¥è¿”å›æ•°æ®ï¼Œä¼šå…ˆè¿”å›è”ç³»æœåŠ¡å™¨çš„çŠ¶æ€ï¼Œåœ¨ç¬¬äºŒæ­¥ä¸­æ‰èƒ½å¤Ÿè·å–åˆ°æ•°æ®</p>
<p>æˆ‘ä»¬éœ€è¦åœ¨ç¬¬ä¸€æ¬¡ <code>then</code> ä¸­è¿”å› <code>response.json()</code> å› ä¸ºè¿™ä¸ªæ˜¯åŒ…å«æ•°æ®çš„ promise å¯¹è±¡ï¼Œå†è°ƒç”¨ä¸€æ¬¡ <code>then</code> æ–¹æ³•å³å¯å®ç°</p>
<p>ä½†æ˜¯è¿™ä¹ˆå¤šæ¬¡çš„è°ƒç”¨ <code>then</code> å¹¶ä¸æ˜¯æˆ‘ä»¬æ‰€æœŸæœ›çš„ï¼Œç›¸ä¿¡çœ‹è¿‡ä¹‹å‰ç”Ÿæˆå™¨çš„æ–‡ç« çš„ä¼™ä¼´ï¼Œå·²ç»æœ‰äº†æƒ³æ³•ã€‚</p>
<p>æˆ‘ä»¬å¯ä»¥åˆ©ç”¨ <code>async</code> å’Œ <code>await</code> é…åˆä½¿ç”¨ï¼Œæ¥ç®€åŒ–ä»£ç </p>
<p>å¯ä»¥å°† <code>await</code> ç†è§£æˆä¸€ä¸ªè‡ªåŠ¨æ‰§è¡Œçš„ <code>then</code> æ–¹æ³•ï¼Œè¿™æ ·æ¸…æ™°å¤šäº†</p>
<pre class=" language-js"><code class="language-js"><span class="token keyword">async</span> <span class="token keyword">function</span> <span class="token function">getJSON</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>
  <span class="token keyword">let</span> url <span class="token operator">=</span> <span class="token string">'https://xxx'</span><span class="token punctuation">;</span>
  <span class="token keyword">try</span> <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>
    <span class="token keyword">let</span> response <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">fetch</span><span class="token punctuation">(</span>url<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> <span class="token keyword">await</span> reasponse<span class="token punctuation">.</span><span class="token function">json</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">error</span><span class="token punctuation">)</span> <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'Request Failed'</span><span class="token punctuation">,</span> error<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>
<span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>
</code></pre>
<p>æœ€åå…³äºé”™è¯¯å¯¹è±¡çš„è·å–å¯ä»¥é‡‡ç”¨ <code>try...catch</code> æ¥å®ç°</p>
<p>å…³äº fetch çš„æ›´å¤šå†…å®¹</p>
<p>å¼ºçƒˆæ¨èé˜®ä¸€å³°è€å¸ˆçš„åšæ–‡ï¼š<a target="_blank" rel="noopener" href="http://www.ruanyifeng.com/blog/2020/12/fetch-tutorial.html">fetch</a></p>
<hr>
<blockquote>
<p> éå¸¸æ„Ÿè°¢æ‚¨çš„é˜…è¯»ï¼Œæ¬¢è¿æå‡ºä½ çš„æ„è§ï¼Œæœ‰ä»€ä¹ˆé—®é¢˜æ¬¢è¿æŒ‡å‡ºï¼Œè°¢è°¢ï¼ğŸˆ</p>
</blockquote>
<h2 id="ğŸŒ®-React-å…¥é—¨å­¦ä¹ ï¼ˆåï¼‰â€“-React-è·¯ç”±"><a href="#ğŸŒ®-React-å…¥é—¨å­¦ä¹ ï¼ˆåï¼‰â€“-React-è·¯ç”±" class="headerlink" title="ğŸŒ® React å…¥é—¨å­¦ä¹ ï¼ˆåï¼‰â€“ React è·¯ç”±"></a>ğŸŒ® React å…¥é—¨å­¦ä¹ ï¼ˆåï¼‰â€“ React è·¯ç”±</h2><h2 id="å¼•è¨€-5"><a href="#å¼•è¨€-5" class="headerlink" title="å¼•è¨€"></a>å¼•è¨€</h2><p>åœ¨æˆ‘ä»¬ä¹‹å‰å†™çš„é¡µé¢å½“ä¸­ï¼Œç”¨æˆ‘ä»¬çš„æƒ¯ç”¨æ€ç»´å»æ€è€ƒçš„è¯ï¼Œå¯èƒ½ä¼šéœ€è¦å†™å¾ˆå¤šçš„é¡µé¢ï¼Œä¾‹å¦‚åšä¸€ä¸ª tab æ ï¼Œæˆ‘ä»¬å¯èƒ½ä¼šæƒ³æ¯ä¸ªé€‰é¡¹éƒ½è¦å¯¹åº”ä¸€ä¸ª HTML æ–‡ä»¶ï¼Œè¿™æ ·ä¼šå¾ˆéº»çƒ¦ï¼Œç”šè‡³ä¸å‹å¥½ï¼Œæˆ‘ä»¬æŠŠè¿™ç§ç§°ä¸º MPA ä¹Ÿå«å¤šé¡µé¢åº”ç”¨ã€‚</p>
<h2 id="ğŸ•-1-SPA"><a href="#ğŸ•-1-SPA" class="headerlink" title="ğŸ• 1. SPA"></a>ğŸ• 1. SPA</h2><p>è€Œä¸ºäº†å‡å°‘è¿™æ ·çš„æƒ…å†µï¼Œæˆ‘ä»¬è¿˜æœ‰å¦ä¸€ç§åº”ç”¨ï¼Œå«åš SPA ï¼Œå•é¡µåº”ç”¨ç¨‹åº</p>
<p>å®ƒæ¯”ä¼ ç»Ÿçš„ Web åº”ç”¨ç¨‹åºæ›´å¿«ï¼Œå› ä¸ºå®ƒä»¬åœ¨ Web æµè§ˆå™¨æœ¬èº«è€Œä¸æ˜¯åœ¨æœåŠ¡å™¨ä¸Šæ‰§è¡Œé€»è¾‘ã€‚åœ¨åˆå§‹é¡µé¢åŠ è½½åï¼Œ<strong>åªæœ‰æ•°æ®æ¥å›å‘é€</strong>ï¼Œè€Œä¸æ˜¯æ•´ä¸ª HTMLï¼Œè¿™ä¼šé™ä½å¸¦å®½ã€‚å®ƒä»¬å¯ä»¥ç‹¬ç«‹è¯·æ±‚æ ‡è®°å’Œæ•°æ®ï¼Œå¹¶ç›´æ¥åœ¨æµè§ˆå™¨ä¸­å‘ˆç°é¡µé¢</p>
<h2 id="ğŸ”-2-ä»€ä¹ˆæ˜¯è·¯ç”±ï¼Ÿ"><a href="#ğŸ”-2-ä»€ä¹ˆæ˜¯è·¯ç”±ï¼Ÿ" class="headerlink" title="ğŸ” 2. ä»€ä¹ˆæ˜¯è·¯ç”±ï¼Ÿ"></a>ğŸ” 2. ä»€ä¹ˆæ˜¯è·¯ç”±ï¼Ÿ</h2><p>è·¯ç”±æ˜¯æ ¹æ®ä¸åŒçš„ URL åœ°å€å±•ç¤ºä¸åŒçš„å†…å®¹æˆ–é¡µé¢</p>
<p>åœ¨ SPA åº”ç”¨ä¸­ï¼Œå¤§éƒ¨åˆ†é¡µé¢ç»“æœä¸æ”¹å˜ï¼Œåªæ”¹å˜éƒ¨åˆ†å†…å®¹çš„ä½¿ç”¨</p>
<p><strong>å‰ç«¯è·¯ç”±çš„ä¼˜ç¼ºç‚¹</strong></p>
<p><strong>ä¼˜ç‚¹</strong></p>
<p>ç”¨æˆ·ä½“éªŒå¥½ï¼Œä¸éœ€è¦æ¯æ¬¡éƒ½ä»æœåŠ¡å™¨å…¨éƒ¨è·å–æ•´ä¸ª HTMLï¼Œå¿«é€Ÿå±•ç°ç»™ç”¨æˆ·</p>
<p><strong>ç¼ºç‚¹</strong></p>
<ol>
<li>SPA æ— æ³•è®°ä½ä¹‹å‰é¡µé¢æ»šåŠ¨çš„ä½ç½®ï¼Œå†æ¬¡å›åˆ°é¡µé¢æ—¶æ— æ³•è®°ä½æ»šåŠ¨çš„ä½ç½®</li>
<li>ä½¿ç”¨æµè§ˆå™¨çš„å‰è¿›å’Œåé€€é”®ä¼šé‡æ–°è¯·æ±‚ï¼Œæ²¡æœ‰åˆç†åˆ©ç”¨ç¼“å­˜</li>
</ol>
<h2 id="ğŸŸ-3-è·¯ç”±çš„åŸç†"><a href="#ğŸŸ-3-è·¯ç”±çš„åŸç†" class="headerlink" title="ğŸŸ 3. è·¯ç”±çš„åŸç†"></a>ğŸŸ 3. è·¯ç”±çš„åŸç†</h2><p>å‰ç«¯è·¯ç”±çš„ä¸»è¦ä¾é çš„æ—¶ history ï¼Œä¹Ÿå°±æ˜¯æµè§ˆå™¨çš„å†å²è®°å½•</p>
<blockquote>
<p>history æ˜¯ BOM å¯¹è±¡ä¸‹çš„ä¸€ä¸ªå±æ€§ï¼Œåœ¨ H5 ä¸­æ–°å¢äº†ä¸€äº›æ“ä½œ history çš„ API</p>
</blockquote>
<p>æµè§ˆå™¨çš„å†å²è®°å½•å°±ç±»ä¼¼äºä¸€ä¸ªæ ˆçš„æ•°æ®ç»“æ„ï¼Œå‰è¿›å°±ç›¸å½“äºå…¥æ ˆï¼Œåé€€å°±ç›¸å½“äºå‡ºæ ˆ</p>
<p>å¹¶ä¸”å†å²è®°å½•ä¸Šå¯ä»¥é‡‡ç”¨ <code>listen</code> æ¥ç›‘å¬è¯·æ±‚è·¯ç”±çš„æ”¹å˜ï¼Œä»è€Œåˆ¤æ–­æ˜¯å¦æ”¹å˜è·¯å¾„</p>
<p>åœ¨ H5 ä¸­æ–°å¢äº† <code>createBrowserHistory</code> çš„ API ï¼Œç”¨äºåˆ›å»ºä¸€ä¸ª history æ ˆï¼Œå…è®¸æˆ‘ä»¬æ‰‹åŠ¨æ“ä½œæµè§ˆå™¨çš„å†å²è®°å½•</p>
<p>æ–°å¢ APIï¼š<code>pushState</code> ï¼Œ<code>replaceState</code>ï¼ŒåŸç†ç±»ä¼¼äº Hash å®ç°ã€‚ ç”¨ H5 å®ç°ï¼Œå•é¡µè·¯ç”±çš„ URL ä¸ä¼šå¤šå‡ºä¸€ä¸ª <code>#</code> å·ï¼Œè¿™æ ·ä¼šæ›´åŠ çš„ç¾è§‚</p>
<h2 id="ğŸŒ­-4-è·¯ç”±çš„åŸºæœ¬ä½¿ç”¨"><a href="#ğŸŒ­-4-è·¯ç”±çš„åŸºæœ¬ä½¿ç”¨" class="headerlink" title="ğŸŒ­ 4. è·¯ç”±çš„åŸºæœ¬ä½¿ç”¨"></a>ğŸŒ­ 4. è·¯ç”±çš„åŸºæœ¬ä½¿ç”¨</h2><h3 id="react-router-dom-çš„ç†è§£å’Œä½¿ç”¨"><a href="#react-router-dom-çš„ç†è§£å’Œä½¿ç”¨" class="headerlink" title="react-router-dom çš„ç†è§£å’Œä½¿ç”¨"></a>react-router-dom çš„ç†è§£å’Œä½¿ç”¨</h3><blockquote>
<p>ä¸“é—¨ç»™ web äººå‘˜ä½¿ç”¨çš„åº“</p>
</blockquote>
<ol>
<li>ä¸€ä¸ª react çš„ä»“åº“</li>
<li>å¾ˆå¸¸ç”¨ï¼ŒåŸºæœ¬æ˜¯æ¯ä¸ªåº”ç”¨éƒ½ä¼šä½¿ç”¨çš„è¿™ä¸ªåº“</li>
<li>ä¸“é—¨æ¥å®ç° SPA åº”ç”¨</li>
</ol>
<p>é¦–å…ˆæˆ‘ä»¬è¦æ˜ç¡®å¥½é¡µé¢çš„å¸ƒå±€ ï¼Œåˆ†å¥½å¯¼èˆªåŒºã€å±•ç¤ºåŒº</p>
<p>è¦å¼•å…¥ <code>react-router-dom</code> åº“ï¼Œæš´éœ²ä¸€äº›å±æ€§ <code>Linkã€BrowserRouter...</code></p>
<pre class=" language-js"><code class="language-js"><span class="token keyword">import</span> <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span> Link<span class="token punctuation">,</span> BrowserRouter<span class="token punctuation">,</span> Route <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span> <span class="token keyword">from</span> <span class="token string">'react-router-dom'</span>
</code></pre>
<p>å¯¼èˆªåŒºçš„ a æ ‡ç­¾æ”¹ä¸º Link æ ‡ç­¾</p>
<pre class=" language-js"><code class="language-js"><span class="token operator">&lt;</span>Link className<span class="token operator">=</span><span class="token string">"list-group-item"</span> to<span class="token operator">=</span><span class="token string">"/about"</span><span class="token operator">></span>About<span class="token operator">&lt;</span><span class="token operator">/</span>Link<span class="token operator">></span>
</code></pre>
<p>åŒæ—¶æˆ‘ä»¬éœ€è¦ç”¨ <code>Route</code> æ ‡ç­¾ï¼Œæ¥è¿›è¡Œè·¯å¾„çš„åŒ¹é…ï¼Œä»è€Œå®ç°ä¸åŒè·¯å¾„çš„ç»„ä»¶åˆ‡æ¢</p>
<pre class=" language-js"><code class="language-js"><span class="token operator">&lt;</span>Route path<span class="token operator">=</span><span class="token string">"/about"</span> component<span class="token operator">=</span><span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>About<span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span><span class="token operator">></span><span class="token operator">&lt;</span><span class="token operator">/</span>Route<span class="token operator">></span>
<span class="token operator">&lt;</span>Route path<span class="token operator">=</span><span class="token string">"/home"</span> component<span class="token operator">=</span><span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>Home<span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span><span class="token operator">></span><span class="token operator">&lt;</span><span class="token operator">/</span>Route<span class="token operator">></span>
</code></pre>
<p>è¿™æ ·ä¹‹åæˆ‘ä»¬è¿˜éœ€è¦ä¸€æ­¥ï¼ŒåŠ ä¸ªè·¯ç”±å™¨ï¼Œåœ¨ä¸Šé¢æˆ‘ä»¬å†™äº†ä¸¤ç»„è·¯ç”±ï¼ŒåŒæ—¶è¿˜ä¼šæŠ¥é”™æŒ‡ç¤ºæˆ‘ä»¬éœ€è¦æ·»åŠ  <code>Router</code> æ¥è§£å†³é”™è¯¯ï¼Œè¿™å°±æ˜¯éœ€è¦æˆ‘ä»¬æ·»åŠ è·¯ç”±å™¨æ¥ç®¡ç†è·¯ç”±ï¼Œå¦‚æœæˆ‘ä»¬åœ¨ Link å’Œ Route ä¸­åˆ†åˆ«ç”¨è·¯ç”±å™¨ç®¡ç†ï¼Œé‚£è¿™æ ·æ˜¯å®ç°ä¸äº†çš„ï¼Œåªæœ‰åœ¨ä¸€ä¸ªè·¯ç”±å™¨çš„ç®¡ç†ä¸‹æ‰èƒ½è¿›è¡Œé¡µé¢çš„è·³è½¬å·¥ä½œã€‚</p>
<p>å› æ­¤æˆ‘ä»¬ä¹Ÿå¯ä»¥åœ¨ Link å’Œ Route æ ‡ç­¾çš„å¤–å±‚æ ‡ç­¾é‡‡ç”¨ BrowserRouter åŒ…è£¹ï¼Œä½†æ˜¯è¿™æ ·å½“æˆ‘ä»¬çš„è·¯ç”±è¿‡å¤šæ—¶ï¼Œæˆ‘ä»¬è¦ä¸åœçš„æ›´æ”¹æ ‡ç­¾åŒ…è£¹çš„ä½ç½®ï¼Œå› æ­¤æˆ‘ä»¬å¯ä»¥è¿™ä¹ˆåš</p>
<p>æˆ‘ä»¬å›åˆ° App.jsx ç›®å½•ä¸‹çš„ index.js æ–‡ä»¶ï¼Œå°†æ•´ä¸ª App ç»„ä»¶æ ‡ç­¾é‡‡ç”¨ <code>BrowserRouter</code> æ ‡ç­¾å»åŒ…è£¹ï¼Œè¿™æ ·æ•´ä¸ª App ç»„ä»¶éƒ½åœ¨<strong>ä¸€ä¸ªè·¯ç”±å™¨</strong>çš„ç®¡ç†ä¸‹</p>
<pre class=" language-js"><code class="language-js"><span class="token comment" spellcheck="true">// index.js</span>
<span class="token operator">&lt;</span>BrowserRouter<span class="token operator">></span>
<span class="token operator">&lt;</span> App <span class="token operator">/</span><span class="token operator">></span>
<span class="token operator">&lt;</span><span class="token operator">/</span>BrowserRouter<span class="token operator">></span>
</code></pre>
<p><img src="https://ljcimg.oss-cn-beijing.aliyuncs.com/img/react-router.gif" alt="react-router"></p>
<h2 id="ğŸ¿-5-è·¯ç”±ç»„ä»¶å’Œä¸€èˆ¬ç»„ä»¶"><a href="#ğŸ¿-5-è·¯ç”±ç»„ä»¶å’Œä¸€èˆ¬ç»„ä»¶" class="headerlink" title="ğŸ¿ 5. è·¯ç”±ç»„ä»¶å’Œä¸€èˆ¬ç»„ä»¶"></a>ğŸ¿ 5. è·¯ç”±ç»„ä»¶å’Œä¸€èˆ¬ç»„ä»¶</h2><p>åœ¨æˆ‘ä»¬å‰é¢çš„å†…å®¹ä¸­ï¼Œæˆ‘ä»¬æ˜¯æŠŠç»„ä»¶ Home å’Œç»„ä»¶ About å½“æˆæ˜¯ä¸€èˆ¬ç»„ä»¶æ¥ä½¿ç”¨ï¼Œæˆ‘ä»¬å°†å®ƒä»¬å†™åœ¨äº† src ç›®å½•ä¸‹çš„ components æ–‡ä»¶å¤¹ä¸‹ï¼Œä½†æ˜¯æˆ‘ä»¬åˆä¼šå‘ç°å®ƒå’Œæ™®é€šçš„ç»„ä»¶åˆæœ‰ç‚¹ä¸åŒï¼Œå¯¹äºæ™®é€šç»„ä»¶è€Œè¨€ï¼Œæˆ‘ä»¬åœ¨å¼•å…¥å®ƒä»¬çš„æ—¶å€™æˆ‘ä»¬æ˜¯é€šè¿‡æ ‡ç­¾çš„å½¢å¼æ¥å¼•ç”¨çš„ã€‚ä½†æ˜¯åœ¨ä¸Šé¢æˆ‘ä»¬å¯ä»¥çœ‹åˆ°ï¼Œæˆ‘ä»¬æŠŠå®ƒå½“ä½œè·¯ç”±æ¥å¼•ç”¨æ—¶ï¼Œæˆ‘ä»¬æ˜¯é€šè¿‡ <code>&#123;Home&#125;</code> æ¥å¼•ç”¨çš„ã€‚</p>
<p>ä»è¿™ä¸€ç‚¹æˆ‘ä»¬å°±å¯ä»¥è®¤å®šä¸€èˆ¬ç»„ä»¶å’Œè·¯ç”±ç»„ä»¶å­˜åœ¨ç€å·®å¼‚</p>
<p>é¦–å…ˆå®ƒä»¬çš„å†™æ³•ä¸åŒ</p>
<p><strong>ä¸€èˆ¬ç»„ä»¶</strong>ï¼š<code>&lt;Demo/&gt;</code>ï¼Œ<strong>è·¯ç”±ç»„ä»¶</strong>ï¼š<code>&lt;Route path=&quot;/demo&quot; component=&#123;Demo&#125;/&gt;</code></p>
<p>åŒæ—¶ä¸ºäº†è§„èŒƒæˆ‘ä»¬çš„ä¹¦å†™ï¼Œä¸€èˆ¬å°†è·¯ç”±ç»„ä»¶æ”¾åœ¨ <code>pages</code> æ–‡ä»¶å¤¹ä¸­ï¼Œè·¯ç”±ç»„ä»¶æ”¾åœ¨ <code>components</code> </p>
<p>è€Œæœ€é‡è¦çš„ä¸€ç‚¹å°±æ˜¯å®ƒä»¬æ¥æ”¶åˆ°çš„ <code>props</code> ä¸åŒï¼Œåœ¨ä¸€èˆ¬ç»„ä»¶ä¸­ï¼Œå¦‚æœæˆ‘ä»¬ä¸è¿›è¡Œä¼ é€’ï¼Œå°±ä¸ä¼šæ”¶åˆ°å€¼ã€‚è€Œå¯¹äºè·¯ç”±ç»„ä»¶è€Œè¨€ï¼Œå®ƒä¼šæ¥æ”¶åˆ° 3 ä¸ªå›ºå®šå±æ€§ <code>history</code> ã€<code>location</code> ä»¥åŠ <code>match</code> </p>
<p><img src="https://ljcimg.oss-cn-beijing.aliyuncs.com/img/image-20210901142121047.png" alt="image-20210901142121047"></p>
<h2 id="ğŸ›-6-NavLink-æ ‡ç­¾"><a href="#ğŸ›-6-NavLink-æ ‡ç­¾" class="headerlink" title="ğŸ› 6. NavLink æ ‡ç­¾"></a>ğŸ› 6. NavLink æ ‡ç­¾</h2><p>NavLink æ ‡ç­¾æ˜¯å’Œ Link æ ‡ç­¾ä½œç”¨ç›¸åŒçš„ï¼Œä½†æ˜¯å®ƒåˆæ¯” Link æ›´åŠ å¼ºå¤§ã€‚</p>
<p>åœ¨å‰é¢çš„ demo å±•ç¤ºä¸­ï¼Œä½ å¯èƒ½ä¼šå‘ç°ç‚¹å‡»çš„æŒ‰é’®å¹¶æ²¡æœ‰å‡ºç°é«˜äº®çš„æ•ˆæœï¼Œæ­£å¸¸æƒ…å†µä¸‹æˆ‘ä»¬ç»™æ ‡ç­¾å¤šæ·»åŠ ä¸€ä¸ª <code>active</code>  çš„ç±»å°±å¯ä»¥å®ç°é«˜äº®çš„æ•ˆæœ</p>
<p>è€Œ NavLink æ ‡ç­¾æ­£å¯ä»¥å¸®åŠ©æˆ‘ä»¬å®ç°è¿™ä¸€æ­¥</p>
<p>å½“æˆ‘ä»¬é€‰ä¸­æŸä¸ª NavLink æ ‡ç­¾æ—¶ï¼Œå°±ä¼šè‡ªåŠ¨çš„åœ¨ç±»ä¸Šæ·»åŠ ä¸€ä¸ª <code>active</code> å±æ€§</p>
<pre class=" language-js"><code class="language-js"><span class="token operator">&lt;</span>NavLink className<span class="token operator">=</span><span class="token string">"list-group-item"</span> to<span class="token operator">=</span><span class="token string">"/about"</span><span class="token operator">></span>About<span class="token operator">&lt;</span><span class="token operator">/</span>NavLink<span class="token operator">></span>
</code></pre>
<p><img src="https://ljcimg.oss-cn-beijing.aliyuncs.com/img/react-router-navlink.gif" alt="react-router-navlink"></p>
<p>æˆ‘ä»¬å¯ä»¥çœ‹åˆ°å·¦ä¾§çš„å…ƒç´ ç±»ååœ¨ä¸æ–­çš„åˆ‡æ¢ï¼Œå½“ç„¶ NavLink æ ‡ç­¾æ˜¯é»˜è®¤çš„æ·»åŠ ä¸Š <code>active</code> ç±»ï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥æ”¹å˜å®ƒï¼Œåœ¨æ ‡ç­¾ä¸Šæ·»åŠ ä¸€ä¸ªå±æ€§ <code>activeClassName</code> </p>
<p>ä¾‹å¦‚ <code>activeClassName=&quot;aaa&quot;</code> åœ¨è§¦å‘è¿™ä¸ª NavLink æ—¶ï¼Œä¼šè‡ªåŠ¨æ·»åŠ ä¸€ä¸ª <code>aaa</code> ç±»</p>
<h2 id="ğŸ¥©-7-NavLink-å°è£…"><a href="#ğŸ¥©-7-NavLink-å°è£…" class="headerlink" title="ğŸ¥© 7. NavLink å°è£…"></a>ğŸ¥© 7. NavLink å°è£…</h2><p>åœ¨ä¸Šé¢çš„ NavLink æ ‡ç­¾ç§ï¼Œæˆ‘ä»¬å¯ä»¥å‘ç°æˆ‘ä»¬æ¯æ¬¡éƒ½éœ€è¦é‡å¤çš„å»å†™è¿™äº›æ ·å¼åç§°æˆ–è€…æ˜¯ <code>activeClassName</code> ï¼Œè¿™å¹¶ä¸æ˜¯ä¸€ä¸ªå¾ˆå¥½çš„æƒ…å†µï¼Œä»£ç è¿‡äºå†—ä½™ã€‚é‚£æˆ‘ä»¬æ˜¯ä¸æ˜¯å¯ä»¥æƒ³æƒ³åŠæ³•å°è£…ä¸€ä¸‹å®ƒä»¬å‘¢ï¼Ÿ</p>
<p>æˆ‘ä»¬å¯ä»¥é‡‡ç”¨ <code>MyNavLink</code> ç»„ä»¶ï¼Œå¯¹ NavLink è¿›è¡Œå°è£…</p>
<p>é¦–å…ˆæˆ‘ä»¬éœ€è¦æ–°å»ºä¸€ä¸ª MyNavLink ç»„ä»¶</p>
<p><code>return</code> ä¸€ä¸ªç»“æ„</p>
<pre class=" language-js"><code class="language-js"><span class="token operator">&lt;</span>NavLink className<span class="token operator">=</span><span class="token string">"list-group-item"</span> <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span><span class="token operator">...</span><span class="token keyword">this</span><span class="token punctuation">.</span>props<span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span> <span class="token operator">/</span><span class="token operator">></span>
</code></pre>
<p>é¦–å…ˆï¼Œæœ‰ä¸€ç‚¹éå¸¸é‡è¦çš„æ˜¯ï¼Œæˆ‘ä»¬åœ¨æ ‡ç­¾ä½“å†…å†™çš„å†…å®¹éƒ½ä¼šæˆä¸ºä¸€ä¸ª <code>children</code> å±æ€§ï¼Œå› æ­¤æˆ‘ä»¬åœ¨è°ƒç”¨ <code>MyNavLink</code> æ—¶ï¼Œåœ¨æ ‡ç­¾ä½“ä¸­å†™çš„å†…å®¹ï¼Œéƒ½ä¼šæˆä¸º <code>props</code> ä¸­çš„ä¸€éƒ¨åˆ†ï¼Œä»è€Œèƒ½å¤Ÿå®ç°</p>
<p>æ¥ä¸‹æ¥æˆ‘ä»¬åœ¨è°ƒç”¨æ—¶ï¼Œç›´æ¥å†™</p>
<pre class=" language-js"><code class="language-js"><span class="token operator">&lt;</span>MyNavLink to<span class="token operator">=</span><span class="token string">"/home"</span><span class="token operator">></span>home<span class="token operator">&lt;</span><span class="token operator">/</span>MyNavLink<span class="token operator">></span>
</code></pre>
<p>å³å¯å®ç°ç›¸åŒçš„æ•ˆæœ</p>
<hr>
<p>ä»¥ä¸Šå°±æ˜¯æœ¬èŠ‚å…³äº React è·¯ç”±çš„ç›¸å…³çŸ¥è¯†ï¼</p>
<blockquote>
<p>éå¸¸æ„Ÿè°¢æ‚¨çš„é˜…è¯»ï¼Œæ¬¢è¿æå‡ºä½ çš„æ„è§ï¼Œæœ‰ä»€ä¹ˆé—®é¢˜æ¬¢è¿æŒ‡å‡ºï¼Œè°¢è°¢ï¼ğŸˆ</p>
</blockquote>
<h2 id="ğŸŒ®-React-å…¥é—¨å­¦ä¹ ï¼ˆåä¸€ï¼‰â€“-React-è·¯ç”±ä¼ å‚"><a href="#ğŸŒ®-React-å…¥é—¨å­¦ä¹ ï¼ˆåä¸€ï¼‰â€“-React-è·¯ç”±ä¼ å‚" class="headerlink" title="ğŸŒ® React å…¥é—¨å­¦ä¹ ï¼ˆåä¸€ï¼‰â€“ React è·¯ç”±ä¼ å‚"></a>ğŸŒ® React å…¥é—¨å­¦ä¹ ï¼ˆåä¸€ï¼‰â€“ React è·¯ç”±ä¼ å‚</h2><h2 id="å¼•è¨€-6"><a href="#å¼•è¨€-6" class="headerlink" title="å¼•è¨€"></a>å¼•è¨€</h2><p>åœ¨ä¸Šä¸€ç¯‡ä¸­ï¼Œæˆ‘ä»¬å­¦ä¹ äº† React ä¸­ä½¿ç”¨è·¯ç”±æŠ€æœ¯ï¼Œä»¥åŠå¦‚ä½•ä½¿ç”¨ <code>MyNavLink</code> å»ä¼˜åŒ–ä½¿ç”¨è·¯ç”±æ—¶çš„ä»£ç å†—ä½™çš„æƒ…å†µã€‚</p>
<p>è¿™ä¸€èŠ‚æˆ‘ä»¬ç»§ç»­ä¸Šä¸€ç¯‡ React è·¯ç”±è¿›è¡Œä¸€äº›è¡¥å……</p>
<h2 id="ğŸˆ-1-Switch-è§£å†³ç›¸åŒè·¯å¾„é—®é¢˜"><a href="#ğŸˆ-1-Switch-è§£å†³ç›¸åŒè·¯å¾„é—®é¢˜" class="headerlink" title="ğŸˆ 1. Switch è§£å†³ç›¸åŒè·¯å¾„é—®é¢˜"></a>ğŸˆ 1. Switch è§£å†³ç›¸åŒè·¯å¾„é—®é¢˜</h2><p>é¦–å…ˆæˆ‘ä»¬çœ‹ä¸€æ®µè¿™æ ·çš„ä»£ç </p>
<pre class=" language-js"><code class="language-js"><span class="token operator">&lt;</span>Route path<span class="token operator">=</span><span class="token string">"/home"</span> component<span class="token operator">=</span><span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>Home<span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span><span class="token operator">></span><span class="token operator">&lt;</span><span class="token operator">/</span>Route<span class="token operator">></span>
<span class="token operator">&lt;</span>Route path<span class="token operator">=</span><span class="token string">"/about"</span> component<span class="token operator">=</span><span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>About<span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span><span class="token operator">></span><span class="token operator">&lt;</span><span class="token operator">/</span>Route<span class="token operator">></span>
<span class="token operator">&lt;</span>Route path<span class="token operator">=</span><span class="token string">"/about"</span> component<span class="token operator">=</span><span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>About<span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span><span class="token operator">></span><span class="token operator">&lt;</span><span class="token operator">/</span>Route<span class="token operator">></span>
</code></pre>
<p>è¿™æ˜¯ä¸¤ä¸ªè·¯ç”±ç»„ä»¶ï¼Œåœ¨2ï¼Œ3è¡Œä¸­ï¼Œæˆ‘ä»¬åŒæ—¶ä½¿ç”¨äº†ç›¸åŒçš„è·¯å¾„ <code>/about</code> </p>
<p><img src="https://ljcimg.oss-cn-beijing.aliyuncs.com/img/image-20210903075753268.png" alt="image-20210903075753268"></p>
<p>æˆ‘ä»¬å‘ç°å®ƒå‡ºç°äº†ä¸¤ä¸ª <code>about</code> ç»„ä»¶çš„å†…å®¹ï¼Œé‚£è¿™æ˜¯ä¸ºä»€ä¹ˆå‘¢ï¼Ÿ</p>
<p>å…¶å®æ˜¯å› ä¸ºï¼Œ<code>Route</code> çš„æœºåˆ¶ï¼Œå½“åŒ¹é…ä¸Šäº†ç¬¬ä¸€ä¸ª <code>/about</code> ç»„ä»¶åï¼Œå®ƒè¿˜ä¼šç»§ç»­å‘ä¸‹åŒ¹é…ï¼Œå› æ­¤ä¼šå‡ºç°ä¸¤ä¸ª About ç»„ä»¶ï¼Œè¿™æ—¶æˆ‘ä»¬å¯ä»¥é‡‡ç”¨ <code>Switch</code> ç»„ä»¶è¿›è¡ŒåŒ…è£¹</p>
<pre class=" language-js"><code class="language-js"><span class="token operator">&lt;</span>Switch<span class="token operator">></span>
    <span class="token operator">&lt;</span>Route path<span class="token operator">=</span><span class="token string">"/home"</span> component<span class="token operator">=</span><span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>Home<span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span><span class="token operator">></span><span class="token operator">&lt;</span><span class="token operator">/</span>Route<span class="token operator">></span>
    <span class="token operator">&lt;</span>Route path<span class="token operator">=</span><span class="token string">"/about"</span> component<span class="token operator">=</span><span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>About<span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span><span class="token operator">></span><span class="token operator">&lt;</span><span class="token operator">/</span>Route<span class="token operator">></span>
    <span class="token operator">&lt;</span>Route path<span class="token operator">=</span><span class="token string">"/about"</span> component<span class="token operator">=</span><span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>About<span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span><span class="token operator">></span><span class="token operator">&lt;</span><span class="token operator">/</span>Route<span class="token operator">></span>
<span class="token operator">&lt;</span><span class="token operator">/</span>Switch<span class="token operator">></span>
</code></pre>
<p>åœ¨ä½¿ç”¨ <code>Switch</code> æ—¶ï¼Œæˆ‘ä»¬éœ€è¦å…ˆä» <code>react-router-dom</code> ä¸­æš´éœ²å‡º <code>Switch</code> ç»„ä»¶</p>
<p>è¿™æ ·æˆ‘ä»¬å°±èƒ½æˆåŠŸçš„è§£å†³æ‰è¿™ä¸ªé—®é¢˜äº†</p>
<h2 id="ğŸ¥Ÿ-2-è§£å†³äºŒçº§è·¯ç”±æ ·å¼ä¸¢å¤±çš„é—®é¢˜"><a href="#ğŸ¥Ÿ-2-è§£å†³äºŒçº§è·¯ç”±æ ·å¼ä¸¢å¤±çš„é—®é¢˜" class="headerlink" title="ğŸ¥Ÿ 2. è§£å†³äºŒçº§è·¯ç”±æ ·å¼ä¸¢å¤±çš„é—®é¢˜"></a>ğŸ¥Ÿ 2. è§£å†³äºŒçº§è·¯ç”±æ ·å¼ä¸¢å¤±çš„é—®é¢˜</h2><p>å½“æˆ‘ä»¬å°†è·¯å¾„æ”¹å†™æˆ <code>path=&quot;/ljc/about&quot;</code> è¿™æ ·çš„å½¢å¼æ—¶ï¼Œæˆ‘ä»¬ä¼šå‘ç°å½“æˆ‘ä»¬å¼ºåˆ¶åˆ·æ–°é¡µé¢çš„æ—¶å€™ï¼Œé¡µé¢çš„ CSS æ ·å¼æ¶ˆå¤±äº†ã€‚è¿™æ˜¯å› ä¸ºï¼Œæˆ‘ä»¬åœ¨å¼•å…¥æ ·å¼æ–‡ä»¶æ—¶ï¼Œé‡‡å–çš„æ˜¯ç›¸å¯¹è·¯å¾„ï¼Œå½“æˆ‘ä»¬ä½¿ç”¨äºŒçº§è·¯ç”±çš„æ—¶å€™ï¼Œä¼šä½¿å¾—è¯·æ±‚çš„è·¯å¾„å‘ç”Ÿæ”¹å˜ï¼Œæµè§ˆå™¨ä¼šå‘ <code>localhost:3000/ljc</code> ä¸‹è¯·æ±‚ css æ ·å¼èµ„æºï¼Œè¿™å¹¶ä¸æ˜¯æˆ‘ä»¬æƒ³è¦çš„ï¼Œå› ä¸ºæˆ‘ä»¬çš„æ ·å¼å­˜æ”¾äºå…¬å…±æ–‡ä»¶ä¸‹çš„ CSS æ–‡ä»¶å¤¹ä¸­ã€‚</p>
<p><img src="https://ljcimg.oss-cn-beijing.aliyuncs.com/img/react-router-tworouter.gif" alt="react-router-tworouter"></p>
<p>æˆ‘ä»¬æœ‰å‡ ç§æ–¹æ³•ï¼Œå¯ä»¥è§£å†³è¿™ä¸ªé—®é¢˜ </p>
<ol>
<li>å°†æ ·å¼å¼•å…¥çš„è·¯å¾„æ”¹æˆç»å¯¹è·¯å¾„</li>
<li>å¼•å…¥æ ·å¼æ–‡ä»¶æ—¶ä¸å¸¦ <code>.</code></li>
<li>ä½¿ç”¨ HashRouter</li>
</ol>
<p>æˆ‘ä»¬ä¸€èˆ¬é‡‡ç”¨<strong>ç¬¬ä¸€ç§æ–¹å¼</strong>å»è§£å†³</p>
<h2 id="ğŸ‘-3-è·¯ç”±çš„ç²¾å‡†åŒ¹é…å’Œæ¨¡ç³ŠåŒ¹é…"><a href="#ğŸ‘-3-è·¯ç”±çš„ç²¾å‡†åŒ¹é…å’Œæ¨¡ç³ŠåŒ¹é…" class="headerlink" title="ğŸ‘ 3. è·¯ç”±çš„ç²¾å‡†åŒ¹é…å’Œæ¨¡ç³ŠåŒ¹é…"></a>ğŸ‘ 3. è·¯ç”±çš„ç²¾å‡†åŒ¹é…å’Œæ¨¡ç³ŠåŒ¹é…</h2><p>è·¯ç”±çš„åŒ¹é…æœ‰ä¸¤ç§å½¢å¼ï¼Œä¸€ç§æ˜¯ç²¾å‡†åŒ¹é…ä¸€ç§æ˜¯æ¨¡ç³ŠåŒ¹é…ï¼ŒReact ä¸­é»˜è®¤å¼€å¯çš„æ˜¯æ¨¡ç³ŠåŒ¹é…</p>
<p>æ¨¡ç³ŠåŒ¹é…å¯ä»¥ç†è§£ä¸ºï¼Œåœ¨åŒ¹é…è·¯ç”±æ—¶ï¼Œåªè¦æœ‰åŒ¹é…åˆ°çš„å°±å¥½äº†</p>
<p>ç²¾å‡†åŒ¹é…å°±æ˜¯ï¼Œä¸¤è€…å¿…é¡»ç›¸åŒ</p>
<p>æˆ‘ä»¬å±•ç¤ºä¸€ä¸ªæ¨¡ç³ŠåŒ¹é…çš„ä¾‹å­</p>
<pre class=" language-js"><code class="language-js"><span class="token operator">&lt;</span>MyNavLink to <span class="token operator">=</span> <span class="token string">"/home/a/b"</span> <span class="token operator">></span>Home<span class="token operator">&lt;</span><span class="token operator">/</span>MyNavLink<span class="token operator">></span>
</code></pre>
<p>è¿™ä¸ªæ ‡ç­¾åŒ¹é…çš„è·¯ç”±ï¼Œæˆ‘ä»¬å¯ä»¥æ‹†åˆ†æˆ home a bï¼Œå°†ä¼šæ ¹æ®è¿™ä¸ªå…ˆåé¡ºåºåŒ¹é…è·¯ç”±</p>
<pre class=" language-js"><code class="language-js"><span class="token operator">&lt;</span>Route path<span class="token operator">=</span><span class="token string">"/home"</span>component<span class="token operator">=</span><span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>Home<span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span><span class="token operator">/</span><span class="token operator">></span>
</code></pre>
<p>å°±å¯ä»¥åŒ¹é…åˆ°ä¸Šé¢çš„è¿™ä¸ªè·¯ç”±ï¼Œå› ä¸ºå®ƒåŒ¹é…çš„æ˜¯ home</p>
<p>å½“åŒ¹é…çš„è·¯ç”±æ”¹æˆä¸‹é¢è¿™æ ·æ—¶ï¼Œå°±ä¼šå¤±è´¥ã€‚å®ƒä¼šæŒ‰ç…§ç¬¬ä¸€ä¸ªæ¥åŒ¹é…ï¼Œå¦‚æœç¬¬ä¸€ä¸ªæ²¡æœ‰åŒ¹é…ä¸Šï¼Œé‚£å°±ä¼šå¤±è´¥ï¼Œè¿™é‡Œçš„ a å’Œ home æ²¡æœ‰åŒ¹é…ä¸Šï¼Œå¾ˆæ˜¾ç„¶ä¼šå¤±è´¥</p>
<pre class=" language-js"><code class="language-js"><span class="token operator">&lt;</span>Route path<span class="token operator">=</span><span class="token string">"/a"</span> component<span class="token operator">=</span><span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>Home<span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span><span class="token operator">/</span><span class="token operator">></span>
</code></pre>
<p>å½“æˆ‘ä»¬å¼€å¯äº†ç²¾å‡†åŒ¹é…åï¼Œå°±æˆ‘ä»¬çš„ç¬¬ä¸€ç§åŒ¹é…å°±ä¸ä¼šæˆåŠŸï¼Œå› ä¸ºç²¾å‡†åŒ¹é…éœ€è¦çš„æ˜¯å®Œå…¨ä¸€æ ·çš„å€¼ï¼Œå¼€å¯ç²¾å‡†åŒ¹é…é‡‡ç”¨çš„æ˜¯ <code>exact</code> æ¥å®ç°</p>
<pre class=" language-js"><code class="language-js"><span class="token operator">&lt;</span>Route exact<span class="token operator">=</span><span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span><span class="token boolean">true</span><span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>  path<span class="token operator">=</span><span class="token string">"/home"</span> component<span class="token operator">=</span><span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>Home<span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span><span class="token operator">/</span><span class="token operator">></span>
</code></pre>
<h2 id="ğŸ‹-4-é‡å®šå‘è·¯ç”±"><a href="#ğŸ‹-4-é‡å®šå‘è·¯ç”±" class="headerlink" title="ğŸ‹ 4. é‡å®šå‘è·¯ç”±"></a>ğŸ‹ 4. é‡å®šå‘è·¯ç”±</h2><p>åœ¨æˆ‘ä»¬å†™å¥½äº†è¿™äº›ä¹‹åï¼Œæˆ‘ä»¬ä¼šå‘ç°ï¼Œæˆ‘ä»¬éœ€è¦ç‚¹å‡»ä»»æ„ä¸€ä¸ªæŒ‰é’®ï¼Œæ‰ä¼šå»åŒ¹é…ä¸€ä¸ªç»„ä»¶ï¼Œè¿™å¹¶ä¸æ˜¯æˆ‘ä»¬æƒ³è¦çš„ï¼Œæˆ‘ä»¬æƒ³è¦é¡µé¢ä¸€åŠ è½½ä¸Šæ¥ï¼Œé»˜è®¤çš„å°±èƒ½åŒ¹é…åˆ°ä¸€ä¸ªç»„ä»¶ã€‚</p>
<p>è¿™ä¸ªæ—¶å€™æˆ‘ä»¬å°±éœ€è¦æ—¶å€™ Redirecrt è¿›è¡Œé»˜è®¤åŒ¹é…äº†ã€‚</p>
<pre class=" language-js"><code class="language-js"><span class="token operator">&lt;</span>Redirect to<span class="token operator">=</span><span class="token string">"/home"</span> <span class="token operator">/</span><span class="token operator">></span>
</code></pre>
<p>å½“æˆ‘ä»¬åŠ ä¸Šè¿™æ¡è¯­å¥æ—¶ï¼Œé¡µé¢æ‰¾ä¸åˆ°æŒ‡å®šè·¯å¾„æ—¶ï¼Œå°±ä¼šé‡å®šå‘åˆ° <code>/home</code> é¡µé¢ä¸‹å› æ­¤å½“æˆ‘ä»¬è¯·æ±‚3000ç«¯å£æ—¶ï¼Œå°±ä¼šé‡å®šå‘åˆ° <code>/home</code> è¿™æ ·å°±èƒ½å¤Ÿå®ç°æˆ‘ä»¬æƒ³è¦çš„æ•ˆæœäº†</p>
<p><img src="https://ljcimg.oss-cn-beijing.aliyuncs.com/img/image-20210904013342960.png" alt="image-20210904013342960"></p>
<h2 id="ğŸ“-5-åµŒå¥—è·¯ç”±"><a href="#ğŸ“-5-åµŒå¥—è·¯ç”±" class="headerlink" title="ğŸ“ 5. åµŒå¥—è·¯ç”±"></a>ğŸ“ 5. åµŒå¥—è·¯ç”±</h2><p>åµŒå¥—è·¯ç”±ä¹Ÿå°±æ˜¯æˆ‘ä»¬å‰é¢æœ‰æåŠçš„äºŒçº§è·¯ç”±ï¼Œä½†æ˜¯åµŒå¥—è·¯ç”±åŒ…æ‹¬äº†äºŒçº§ã€ä¸‰çº§â€¦è¿˜æœ‰å¾ˆå¤šçº§è·¯ç”±ï¼Œå½“æˆ‘ä»¬éœ€è¦åœ¨ä¸€ä¸ªè·¯ç”±ç»„ä»¶ä¸­æ·»åŠ ä¸¤ä¸ªç»„ä»¶ï¼Œä¸€ä¸ªæ˜¯å¤´éƒ¨ï¼Œä¸€ä¸ªæ˜¯å†…å®¹åŒº</p>
<p>æˆ‘ä»¬å°†æˆ‘ä»¬çš„åµŒå¥—å†…å®¹å†™åœ¨ç›¸åº”çš„ç»„ä»¶é‡Œé¢ï¼Œè¿™ä¸ªæ˜¯åœ¨ Home ç»„ä»¶çš„ return å†…å®¹</p>
<pre class=" language-js"><code class="language-js"><span class="token operator">&lt;</span>div<span class="token operator">></span>
    <span class="token operator">&lt;</span>h2<span class="token operator">></span>Homeç»„ä»¶å†…å®¹<span class="token operator">&lt;</span><span class="token operator">/</span>h2<span class="token operator">></span>
    <span class="token operator">&lt;</span>div<span class="token operator">></span>
        <span class="token operator">&lt;</span>ul className<span class="token operator">=</span><span class="token string">"nav nav-tabs"</span><span class="token operator">></span>
            <span class="token operator">&lt;</span>li<span class="token operator">></span>
                <span class="token operator">&lt;</span>MyNavLink className<span class="token operator">=</span><span class="token string">"list-group-item"</span> to<span class="token operator">=</span><span class="token string">"/home/news"</span><span class="token operator">></span>News<span class="token operator">&lt;</span><span class="token operator">/</span>MyNavLink<span class="token operator">></span>
            <span class="token operator">&lt;</span><span class="token operator">/</span>li<span class="token operator">></span>
            <span class="token operator">&lt;</span>li<span class="token operator">></span>
                <span class="token operator">&lt;</span>MyNavLink className<span class="token operator">=</span><span class="token string">"list-group-item "</span> to<span class="token operator">=</span><span class="token string">"/home/message"</span><span class="token operator">></span>Message<span class="token operator">&lt;</span><span class="token operator">/</span>MyNavLink<span class="token operator">></span>
            <span class="token operator">&lt;</span><span class="token operator">/</span>li<span class="token operator">></span>
        <span class="token operator">&lt;</span><span class="token operator">/</span>ul<span class="token operator">></span>
        <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">/* æ³¨å†Œè·¯ç”± */</span><span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>
        <span class="token operator">&lt;</span>Switch<span class="token operator">></span>
            <span class="token operator">&lt;</span>Route path<span class="token operator">=</span><span class="token string">"/home/news"</span> component<span class="token operator">=</span><span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>News<span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span> <span class="token operator">/</span><span class="token operator">></span>
            <span class="token operator">&lt;</span>Route path<span class="token operator">=</span><span class="token string">"/home/message"</span> component<span class="token operator">=</span><span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>Message<span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span> <span class="token operator">/</span><span class="token operator">></span>
        <span class="token operator">&lt;</span><span class="token operator">/</span>Switch<span class="token operator">></span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">></span>
<span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">></span>
</code></pre>
<p>åœ¨è¿™é‡Œæˆ‘ä»¬éœ€è¦ä½¿ç”¨åµŒå¥—è·¯ç”±çš„æ–¹å¼ï¼Œæ‰èƒ½å®ŒæˆåŒ¹é…</p>
<p>é¦–å…ˆæˆ‘ä»¬å¾— React ä¸­è·¯ç”±å¾—æ³¨å†Œæ˜¯æœ‰é¡ºåºå¾—ï¼Œæˆ‘ä»¬åœ¨åŒ¹é…å¾—æ—¶å€™ï¼Œå› ä¸º Home ç»„ä»¶æ˜¯å…ˆæ³¨å†Œå¾—ï¼Œå› æ­¤åœ¨åŒ¹é…çš„æ—¶å€™å…ˆå»æ‰¾ home è·¯ç”±ï¼Œç”±äºæ˜¯æ¨¡ç³ŠåŒ¹é…ï¼Œä¼šæˆåŠŸçš„åŒ¹é…</p>
<p>åœ¨ Home ç»„ä»¶é‡Œé¢å»åŒ¹é…ç›¸åº”çš„è·¯ç”±ï¼Œä»è€Œæ‰¾åˆ° &#x2F;home&#x2F;news è¿›è¡ŒåŒ¹é…ï¼Œå› æ­¤æ‰¾åˆ° News ç»„ä»¶ï¼Œè¿›è¡ŒåŒ¹é…æ¸²æŸ“</p>
<blockquote>
<p>å¦‚æœå¼€å¯ç²¾ç¡®åŒ¹é…çš„è¯ï¼Œç¬¬ä¸€æ­¥çš„ <code>/home/news</code> åŒ¹é… <code>/home</code> å°±ä¼šå¡ä½ä¸åŠ¨ï¼Œè¿™ä¸ªæ—¶å€™å°±ä¸ä¼šæ˜¾ç¤ºæœ‰ç”¨çš„ä¸œè¥¿äº†ï¼</p>
</blockquote>
<h2 id="ğŸŸ-6-ä¼ é€’-params-å‚æ•°"><a href="#ğŸŸ-6-ä¼ é€’-params-å‚æ•°" class="headerlink" title="ğŸŸ 6. ä¼ é€’ params å‚æ•°"></a>ğŸŸ 6. ä¼ é€’ params å‚æ•°</h2><p><img src="https://ljcimg.oss-cn-beijing.aliyuncs.com/img/react-router-params.gif" alt="react-router-params"></p>
<p>é¦–å…ˆæˆ‘ä»¬éœ€è¦å®ç°çš„æ•ˆæœæ˜¯ï¼Œç‚¹å‡»æ¶ˆæ¯åˆ—è¡¨ï¼Œå±•ç¤ºå‡ºæ¶ˆæ¯çš„è¯¦ç»†å†…å®¹</p>
<p>è¿™ä¸ªæ¡ˆä¾‹å®ç°çš„æ–¹æ³•æœ‰ä¸‰ç§ï¼Œç¬¬ä¸€ç§å°±æ˜¯ä¼ é€’ params å‚æ•°ï¼Œç”±äºæˆ‘ä»¬æ‰€æ˜¾ç¤ºçš„æ•°æ®éƒ½æ˜¯ä»æ•°æ®é›†ä¸­å–å‡ºæ¥çš„ï¼Œå› æ­¤æˆ‘ä»¬éœ€è¦æœ‰æ•°æ®çš„ä¼ è¾“ç»™ Detail ç»„ä»¶</p>
<p>æˆ‘ä»¬é¦–å…ˆéœ€è¦å°†è¯¦ç»†å†…å®¹çš„æ•°æ®åˆ—è¡¨ï¼Œä¿å­˜åœ¨ DetailData ä¸­ï¼Œå°†æ¶ˆæ¯åˆ—è¡¨ä¿å­˜åœ¨ Message çš„ state ä¸­ã€‚</p>
<p>æˆ‘ä»¬å¯ä»¥é€šè¿‡å°†æ•°æ®æ‹¼æ¥åœ¨è·¯ç”±åœ°å€æœ«å°¾æ¥å®ç°æ•°æ®çš„ä¼ é€’</p>
<pre class=" language-js"><code class="language-js"> <span class="token operator">&lt;</span>Link to<span class="token operator">=</span><span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span><span class="token template-string"><span class="token string">`/home/message/detail/$&amp;#123;msgObj.id&amp;#125;/$&amp;#123;msgObj.title&amp;#125;`</span></span><span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span><span class="token operator">></span><span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>msgObj<span class="token punctuation">.</span>title<span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span><span class="token operator">&lt;</span><span class="token operator">/</span>Link<span class="token operator">></span>
</code></pre>
<p>å¦‚ä¸Šï¼Œæˆ‘ä»¬å°†æ¶ˆæ¯åˆ—è¡¨çš„ id å’Œ title å†™åœ¨äº†è·¯ç”±åœ°å€åé¢</p>
<blockquote>
<p>è¿™é‡Œæˆ‘ä»¬éœ€è¦æ³¨æ„çš„æ˜¯ï¼šéœ€è¦é‡‡ç”¨æ¨¡æ¿å­—ç¬¦ä¸²ä»¥åŠ <code>$</code> ç¬¦çš„æ–¹å¼æ¥è¿›è¡Œæ•°æ®çš„è·å–</p>
</blockquote>
<p>åœ¨æ³¨å†Œè·¯ç”±æ—¶ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡ <code>:æ•°æ®å</code> æ¥æ¥æ”¶æ•°æ®</p>
<pre class=" language-js"><code class="language-js"><span class="token operator">&lt;</span>Route path<span class="token operator">=</span><span class="token string">"/home/message/detail/:id/:title"</span> component<span class="token operator">=</span><span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>Detail<span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span> <span class="token operator">/</span><span class="token operator">></span>
</code></pre>
<p>å¦‚ä¸Šï¼Œä½¿ç”¨äº† <code>:id/:title</code> æˆåŠŸçš„æ¥æ”¶äº†ç”± Link ä¼ é€’è¿‡æ¥çš„ id å’Œ title æ•°æ®</p>
<p>è¿™æ ·æˆ‘ä»¬æ—¢æˆåŠŸçš„å®ç°äº†è·¯ç”±çš„è·³è½¬ï¼Œåˆå°†éœ€è¦è·å–çš„æ•°æ®ä¼ é€’ç»™äº† Detail ç»„ä»¶</p>
<p>æˆ‘ä»¬åœ¨ Detail ç»„ä»¶ä¸­æ‰“å° <code>this.props</code> æ¥æŸ¥çœ‹å½“å‰æ¥æ”¶çš„æ•°æ®æƒ…å†µ</p>
<p><img src="https://ljcimg.oss-cn-beijing.aliyuncs.com/img/image-20210906153042353.png" alt="image-20210906153042353"></p>
<p>æˆ‘ä»¬å¯ä»¥å‘ç°ï¼Œæˆ‘ä»¬ä¼ é€’çš„æ•°æ®è¢«æ¥æ”¶åˆ°äº†å¯¹è±¡çš„ match å±æ€§ä¸‹çš„ params ä¸­</p>
<p>å› æ­¤æˆ‘ä»¬å¯ä»¥åœ¨ Detail ç»„ä»¶ä¸­è·å–åˆ°åˆ Message ç»„ä»¶ä¸­ä¼ é€’æ¥çš„ params æ•°æ®</p>
<p>å¹¶é€šè¿‡ params æ•°æ®ä¸­çš„ <code>id</code> å€¼ï¼Œåœ¨è¯¦ç»†å†…å®¹çš„æ•°æ®é›†ä¸­æŸ¥æ‰¾å‡ºæŒ‡å®š <code>id</code> çš„è¯¦ç»†å†…å®¹</p>
<pre class=" language-js"><code class="language-js"><span class="token keyword">const</span> <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span> id<span class="token punctuation">,</span> title <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span> <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>props<span class="token punctuation">.</span>match<span class="token punctuation">.</span>params
<span class="token keyword">const</span> findResult <span class="token operator">=</span> DetailData<span class="token punctuation">.</span><span class="token function">find</span><span class="token punctuation">(</span><span class="token punctuation">(</span>detailObj<span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> detailObj<span class="token punctuation">.</span>id <span class="token operator">===</span> id
<span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span><span class="token punctuation">)</span>
</code></pre>
<p>æœ€åæ¸²æŸ“æ•°æ®å³å¯</p>
<h2 id="ğŸ€-7-ä¼ é€’-search-å‚æ•°"><a href="#ğŸ€-7-ä¼ é€’-search-å‚æ•°" class="headerlink" title="ğŸ€ 7. ä¼ é€’ search å‚æ•°"></a>ğŸ€ 7. ä¼ é€’ search å‚æ•°</h2><p>æˆ‘ä»¬è¿˜å¯ä»¥é‡‡ç”¨ä¼ é€’ search å‚æ•°çš„æ–¹æ³•æ¥å®ç°</p>
<p>é¦–å…ˆæˆ‘ä»¬å…ˆç¡®å®šæ•°æ®ä¼ è¾“çš„æ–¹å¼</p>
<p>æˆ‘ä»¬å…ˆåœ¨ Link ä¸­é‡‡ç”¨ <code>?</code> ç¬¦å·çš„æ–¹å¼æ¥è¡¨ç¤ºåé¢çš„ä¸ºå¯ç”¨æ•°æ®</p>
<pre class=" language-js"><code class="language-js"><span class="token operator">&lt;</span>Link to<span class="token operator">=</span><span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span><span class="token template-string"><span class="token string">`/home/message/detail/?id=$&amp;#123;msgObj.id&amp;#125;&amp;title=$&amp;#123;msgObj.title&amp;#125;`</span></span><span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span><span class="token operator">></span><span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>msgObj<span class="token punctuation">.</span>title<span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span><span class="token operator">&lt;</span><span class="token operator">/</span>Link<span class="token operator">></span>
</code></pre>
<p>é‡‡ç”¨ <code>search</code> ä¼ é€’çš„æ–¹å¼ï¼Œæ— éœ€åœ¨ Route ä¸­å†æ¬¡å£°æ˜ï¼Œå¯ä»¥åœ¨ Detail ç»„ä»¶ä¸­ç›´æ¥è·å–åˆ°</p>
<p><img src="https://ljcimg.oss-cn-beijing.aliyuncs.com/img/image-20210906155217647.png" alt="image-20210906155217647"></p>
<p>æˆ‘ä»¬å¯ä»¥å‘ç°ï¼Œæˆ‘ä»¬çš„æ•°æ®ä¿å­˜åœ¨äº† <code>location</code> å¯¹è±¡ä¸‹çš„ <code>search</code> ä¸­ï¼Œæ˜¯ä¸€ç§å­—ç¬¦ä¸²çš„å½¢å¼ä¿å­˜çš„ï¼Œæˆ‘ä»¬å¯ä»¥å¼•ç”¨ä¸€ä¸ªåº“æ¥è¿›è¡Œè½¬åŒ– <code>querystring</code></p>
<pre class=" language-js"><code class="language-js"><span class="token keyword">import</span> qs <span class="token keyword">from</span> <span class="token string">'querystring'</span>
</code></pre>
<p>è¿™ä¸ªåº“æ˜¯ React ä¸­è‡ªå¸¦æœ‰çš„ï¼Œå®ƒæœ‰ä¸¤ä¸ªæ–¹æ³•ï¼Œä¸€ä¸ªæ˜¯ <code>parse</code> ä¸€ä¸ªæ˜¯ <code>stringify</code> </p>
<p>æˆ‘ä»¬å¯ä»¥é‡‡ç”¨ <code>parse</code> æ–¹æ³•ï¼Œå°†å­—ç¬¦ä¸²è½¬åŒ–ä¸ºé”®å€¼å¯¹å½¢å¼çš„å¯¹è±¡</p>
<pre class=" language-js"><code class="language-js"><span class="token keyword">const</span> <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span> search <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span> <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>props<span class="token punctuation">.</span>location
<span class="token keyword">const</span> <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span> id<span class="token punctuation">,</span> title <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span> <span class="token operator">=</span> qs<span class="token punctuation">.</span><span class="token function">parse</span><span class="token punctuation">(</span>search<span class="token punctuation">.</span><span class="token function">slice</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
</code></pre>
<p>è¿™æ ·æˆ‘ä»¬å°±èƒ½æˆåŠŸçš„è·å–æ•°æ®ï¼Œå¹¶è¿›è¡Œæ¸²æŸ“</p>
<blockquote>
<p>tipsï¼šæ— éœ€å£°æ˜æ¥æ”¶</p>
</blockquote>
<h2 id="ğŸŒ·-8-ä¼ é€’-state-å‚æ•°"><a href="#ğŸŒ·-8-ä¼ é€’-state-å‚æ•°" class="headerlink" title="ğŸŒ· 8. ä¼ é€’ state å‚æ•°"></a>ğŸŒ· 8. ä¼ é€’ state å‚æ•°</h2><p>é‡‡ç”¨ä¼ é€’ state å‚æ•°çš„æ–¹æ³•ï¼Œæ˜¯æˆ‘è§‰å¾—æœ€å®Œç¾çš„ä¸€ç§æ–¹æ³•ï¼Œå› ä¸ºå®ƒä¸ä¼šå°†æ•°æ®æºå¸¦åˆ°åœ°å€æ ä¸Šï¼Œé‡‡ç”¨å†…éƒ¨çš„çŠ¶æ€æ¥ç»´æŠ¤</p>
<pre class=" language-js"><code class="language-js"><span class="token operator">&lt;</span>Link to<span class="token operator">=</span><span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span><span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span> pathname<span class="token punctuation">:</span> <span class="token string">'/home/message/detail'</span><span class="token punctuation">,</span> state<span class="token punctuation">:</span> <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span> id<span class="token punctuation">:</span> msgObj<span class="token punctuation">.</span>id<span class="token punctuation">,</span> title<span class="token punctuation">:</span> msgObj<span class="token punctuation">.</span>title <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span> <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span><span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span><span class="token operator">></span><span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>msgObj<span class="token punctuation">.</span>title<span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span><span class="token operator">&lt;</span><span class="token operator">/</span>Link<span class="token operator">></span>
</code></pre>
<p>é¦–å…ˆï¼Œæˆ‘ä»¬éœ€è¦åœ¨ Link ä¸­æ³¨å†Œè·³è½¬æ—¶ï¼Œä¼ é€’ä¸€ä¸ªè·¯ç”±å¯¹è±¡ï¼ŒåŒ…æ‹¬ä¸€ä¸ª è·³è½¬åœ°å€åï¼Œä¸€ä¸ª state æ•°æ®ï¼Œè¿™æ ·æˆ‘ä»¬å°±å¯ä»¥åœ¨ Detail ç»„ä»¶ä¸­è·å–åˆ°è¿™ä¸ªä¼ é€’çš„ state æ•°æ®</p>
<blockquote>
<p>æ³¨æ„ï¼šé‡‡ç”¨è¿™ç§æ–¹å¼ä¼ é€’ï¼Œæ— éœ€å£°æ˜æ¥æ”¶</p>
</blockquote>
<p>æˆ‘ä»¬å¯ä»¥åœ¨ Detail ç»„ä»¶ä¸­çš„ location å¯¹è±¡ä¸‹çš„ state ä¸­å–å‡ºæˆ‘ä»¬æ‰€ä¼ é€’çš„æ•°æ®</p>
<pre class=" language-js"><code class="language-js"><span class="token keyword">const</span> <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span> id<span class="token punctuation">,</span> title <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span> <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>props<span class="token punctuation">.</span>location<span class="token punctuation">.</span>state
</code></pre>
<p><img src="https://ljcimg.oss-cn-beijing.aliyuncs.com/img/image-20210906160940033.png" alt="image-20210906160940033"></p>
<p>ç›´æ¥ä½¿ç”¨å³å¯~</p>
<p>è§£å†³æ¸…é™¤ç¼“å­˜é€ æˆæŠ¥é”™çš„é—®é¢˜ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨è·å–ä¸åˆ°æ•°æ®çš„æ—¶å€™ç”¨ç©ºå¯¹è±¡æ¥æ›¿ä»£ï¼Œä¾‹å¦‚ï¼Œ</p>
<pre class=" language-js"><code class="language-js"><span class="token keyword">const</span> <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span> id<span class="token punctuation">,</span> title <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span> <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>props<span class="token punctuation">.</span>location<span class="token punctuation">.</span>state <span class="token operator">||</span> <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span><span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>
</code></pre>
<p>å½“è·å–ä¸åˆ° <code>state</code> æ—¶ï¼Œåˆ™ç”¨ç©ºå¯¹è±¡ä»£æ›¿</p>
<blockquote>
<p>è¿™é‡Œçš„ state å’ŒçŠ¶æ€é‡Œçš„ state æœ‰æ‰€ä¸åŒ</p>
</blockquote>
<hr>
<blockquote>
<p>éå¸¸æ„Ÿè°¢æ‚¨çš„é˜…è¯»ï¼Œæ¬¢è¿æå‡ºä½ çš„æ„è§ï¼Œæœ‰ä»€ä¹ˆé—®é¢˜æ¬¢è¿æŒ‡å‡ºï¼Œè°¢è°¢ï¼ğŸˆ</p>
</blockquote>
<h2 id="ğŸŒ®-React-å…¥é—¨å­¦ä¹ ï¼ˆåäºŒï¼‰â€“-React-è·¯ç”±è·³è½¬"><a href="#ğŸŒ®-React-å…¥é—¨å­¦ä¹ ï¼ˆåäºŒï¼‰â€“-React-è·¯ç”±è·³è½¬" class="headerlink" title="ğŸŒ® React å…¥é—¨å­¦ä¹ ï¼ˆåäºŒï¼‰â€“ React è·¯ç”±è·³è½¬"></a>ğŸŒ® React å…¥é—¨å­¦ä¹ ï¼ˆåäºŒï¼‰â€“ React è·¯ç”±è·³è½¬</h2><h2 id="1-push-ä¸-replace-æ¨¡å¼"><a href="#1-push-ä¸-replace-æ¨¡å¼" class="headerlink" title="1. push ä¸ replace æ¨¡å¼"></a>1. push ä¸ replace æ¨¡å¼</h2><p>é»˜è®¤æƒ…å†µä¸‹ï¼Œå¼€å¯çš„æ˜¯ push æ¨¡å¼ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œæ¯æ¬¡ç‚¹å‡»è·³è½¬ï¼Œéƒ½ä¼šå‘æ ˆä¸­å‹å…¥ä¸€ä¸ªæ–°çš„åœ°å€ï¼Œåœ¨ç‚¹å‡»è¿”å›æ—¶ï¼Œå¯ä»¥è¿”å›åˆ°ä¸Šä¸€ä¸ªæ‰“å¼€çš„åœ°å€ï¼Œ</p>
<p><img src="https://ljcimg.oss-cn-beijing.aliyuncs.com/img/react-router-push.gif" alt="react-router-push"></p>
<p>å°±åƒä¸Šå›¾ä¸€æ ·ï¼Œæˆ‘ä»¬æ¯æ¬¡è¿”å›éƒ½ä¼šè¿”å›åˆ°ä¸Šä¸€æ¬¡ç‚¹å‡»çš„åœ°å€ä¸­</p>
<p>å½“æˆ‘ä»¬åœ¨è¯»æ¶ˆæ¯çš„æ—¶å€™ï¼Œæœ‰æ—¶å€™æˆ‘ä»¬å¯èƒ½ä¼šä¸å–œæ¬¢è¿™ç§ç¹ççš„è·³è½¬ï¼Œæˆ‘ä»¬å¯ä»¥å¼€å¯ replace æ¨¡å¼ï¼Œè¿™ç§æ¨¡å¼ä¸ push æ¨¡å¼ä¸åŒï¼Œå®ƒä¼šå°†å½“å‰åœ°å€<strong>æ›¿æ¢</strong>æˆç‚¹å‡»çš„åœ°å€ï¼Œä¹Ÿå°±æ˜¯æ›¿æ¢äº†æ–°çš„æ ˆé¡¶</p>
<p>æˆ‘ä»¬åªéœ€è¦åœ¨éœ€è¦å¼€å¯çš„é“¾æ¥ä¸ŠåŠ ä¸Š <code>replace</code> å³å¯</p>
<pre class=" language-js"><code class="language-js"><span class="token operator">&lt;</span>Link replace to<span class="token operator">=</span><span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span><span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span> pathname<span class="token punctuation">:</span> <span class="token string">'/home/message/detail'</span><span class="token punctuation">,</span> state<span class="token punctuation">:</span> <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span> id<span class="token punctuation">:</span> msgObj<span class="token punctuation">.</span>id<span class="token punctuation">,</span> title<span class="token punctuation">:</span> msgObj<span class="token punctuation">.</span>title <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span> <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span><span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span><span class="token operator">></span><span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>msgObj<span class="token punctuation">.</span>title<span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span><span class="token operator">&lt;</span><span class="token operator">/</span>Link<span class="token operator">></span>
</code></pre>
<p><img src="https://ljcimg.oss-cn-beijing.aliyuncs.com/img/react-router-replace.gif" alt="react-router-replace"></p>
<h2 id="2-ç¼–ç¨‹å¼è·¯ç”±å¯¼èˆª"><a href="#2-ç¼–ç¨‹å¼è·¯ç”±å¯¼èˆª" class="headerlink" title="2. ç¼–ç¨‹å¼è·¯ç”±å¯¼èˆª"></a>2. ç¼–ç¨‹å¼è·¯ç”±å¯¼èˆª</h2><p>æˆ‘ä»¬å¯ä»¥é‡‡ç”¨ç»‘å®šäº‹ä»¶çš„æ–¹å¼å®ç°è·¯ç”±çš„è·³è½¬ï¼Œæˆ‘ä»¬åœ¨æŒ‰é’®ä¸Šç»‘å®šä¸€ä¸ª <code>onClick</code> äº‹ä»¶ï¼Œå½“äº‹ä»¶è§¦å‘æ—¶ï¼Œæˆ‘ä»¬æ‰§è¡Œä¸€ä¸ªå›è°ƒ <code>replaceShow</code> </p>
<p>è¿™ä¸ªå‡½æ•°æ¥æ”¶ä¸¤ä¸ªå‚æ•°ï¼Œç”¨æ¥ä»¿åˆ¶é»˜è®¤çš„è·³è½¬æ–¹å¼ï¼Œç¬¬ä¸€ä¸ªæ˜¯ç‚¹å‡»çš„ id ç¬¬äºŒä¸ªæ˜¯æ ‡é¢˜</p>
<p>æˆ‘ä»¬åœ¨å›è°ƒä¸­ï¼Œè°ƒç”¨ <code>this.props.location</code> å¯¹è±¡ä¸‹çš„ replace æ–¹æ³•</p>
<pre class=" language-js"><code class="language-js">replaceShow <span class="token operator">=</span> <span class="token punctuation">(</span>id<span class="token punctuation">,</span> title<span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span>props<span class="token punctuation">.</span>history<span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span><span class="token template-string"><span class="token string">`/home/message/detail/$&amp;#123;id&amp;#125;/$&amp;#123;title&amp;#125;`</span></span><span class="token punctuation">)</span>
<span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>
</code></pre>
<p>åŒæ—¶æˆ‘ä»¬å¯ä»¥å€ŸåŠ© <code>this.props.history</code> èº«ä¸Šçš„ API å®ç°è·¯ç”±çš„è·³è½¬ï¼Œä¾‹å¦‚ <code>go</code>ã€<code>goBack</code> ã€<code>goForward</code></p>
<h2 id="3-withRouter"><a href="#3-withRouter" class="headerlink" title="3. withRouter"></a>3. withRouter</h2><p>å½“æˆ‘ä»¬éœ€è¦åœ¨é¡µé¢å†…éƒ¨æ·»åŠ å›é€€å‰è¿›ç­‰æŒ‰é’®æ—¶ï¼Œç”±äºè¿™äº›ç»„ä»¶æˆ‘ä»¬ä¸€èˆ¬é€šè¿‡ä¸€èˆ¬ç»„ä»¶çš„æ–¹å¼å»ç¼–å†™ï¼Œå› æ­¤æˆ‘ä»¬ä¼šé‡åˆ°ä¸€ä¸ªé—®é¢˜ï¼Œ<strong>æ— æ³•è·å¾— history å¯¹è±¡</strong>ï¼Œè¿™æ­£æ˜¯å› ä¸ºæˆ‘ä»¬é‡‡ç”¨çš„æ˜¯ä¸€èˆ¬ç»„ä»¶é€ æˆçš„ã€‚</p>
<p><img src="https://ljcimg.oss-cn-beijing.aliyuncs.com/img/image-20210906231051190.png" alt="image-20210906231051190"></p>
<p>åªæœ‰è·¯ç”±ç»„ä»¶æ‰èƒ½è·å–åˆ° history å¯¹è±¡</p>
<p>å› æ­¤æˆ‘ä»¬éœ€è¦å¦‚ä½•è§£å†³è¿™ä¸ªé—®é¢˜å‘¢</p>
<p>æˆ‘ä»¬å¯ä»¥åˆ©ç”¨ <code>react-router-dom</code> å¯¹è±¡ä¸‹çš„ <code>withRouter</code> å‡½æ•°æ¥å¯¹æˆ‘ä»¬å¯¼å‡ºçš„ <code>Header</code> ç»„ä»¶è¿›è¡ŒåŒ…è£…ï¼Œè¿™æ ·æˆ‘ä»¬å°±èƒ½è·å¾—ä¸€ä¸ªæ‹¥æœ‰ <code>history</code> å¯¹è±¡çš„ä¸€èˆ¬ç»„ä»¶</p>
<p>æˆ‘ä»¬éœ€è¦å¯¹å“ªä¸ªç»„ä»¶åŒ…è£…å°±åœ¨å“ªä¸ªç»„ä»¶ä¸‹å¼•å…¥</p>
<pre class=" language-js"><code class="language-js"><span class="token comment" spellcheck="true">// Header/index.jsx</span>
<span class="token keyword">import</span> <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span> withRouter <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span> <span class="token keyword">from</span> <span class="token string">'react-router-dom'</span>
<span class="token comment" spellcheck="true">// åœ¨æœ€åå¯¼å‡ºå¯¹è±¡æ—¶ï¼Œç”¨ `withRouter` å‡½æ•°å¯¹ index è¿›è¡ŒåŒ…è£…</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token function">withRouter</span><span class="token punctuation">(</span>index<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
<p>è¿™æ ·å°±èƒ½è®©ä¸€èˆ¬ç»„ä»¶è·å¾—è·¯ç”±ç»„ä»¶æ‰€ç‰¹æœ‰çš„ API</p>
<h2 id="4-BrowserRouter-å’Œ-HashRouter-çš„åŒºåˆ«"><a href="#4-BrowserRouter-å’Œ-HashRouter-çš„åŒºåˆ«" class="headerlink" title="4. BrowserRouter å’Œ HashRouter çš„åŒºåˆ«"></a>4. BrowserRouter å’Œ HashRouter çš„åŒºåˆ«</h2><h4 id="å®ƒä»¬çš„åº•å±‚å®ç°åŸç†ä¸ä¸€æ ·"><a href="#å®ƒä»¬çš„åº•å±‚å®ç°åŸç†ä¸ä¸€æ ·" class="headerlink" title="å®ƒä»¬çš„åº•å±‚å®ç°åŸç†ä¸ä¸€æ ·"></a><strong>å®ƒä»¬çš„åº•å±‚å®ç°åŸç†ä¸ä¸€æ ·</strong></h4><p>å¯¹äº BrowserRouter æ¥è¯´å®ƒä½¿ç”¨çš„æ˜¯ React ä¸ºå®ƒå°è£…çš„ history API ï¼Œè¿™é‡Œçš„ history å’Œæµè§ˆå™¨ä¸­çš„ history æœ‰æ‰€ä¸åŒå™¢ï¼é€šè¿‡æ“ä½œè¿™äº› API æ¥å®ç°è·¯ç”±çš„ä¿å­˜ç­‰æ“ä½œï¼Œä½†æ˜¯è¿™äº› API æ˜¯ H5 ä¸­æå‡ºçš„ï¼Œå› æ­¤ä¸å…¼å®¹ IE9 ä»¥ä¸‹ç‰ˆæœ¬ã€‚</p>
<p>å¯¹äº HashRouter è€Œè¨€ï¼Œå®ƒå®ç°çš„åŸç†æ˜¯é€šè¿‡ URL çš„å“ˆå¸Œå€¼ï¼Œä½†æ˜¯è¿™å¥è¯æˆ‘ä¸æ˜¯å¾ˆç†è§£ï¼Œç”¨ä¸€ä¸ªç®€å•çš„è§£é‡Šå°±æ˜¯</p>
<p>æˆ‘ä»¬å¯ä»¥ç†è§£ä¸ºæ˜¯é”šç‚¹è·³è½¬ï¼Œå› ä¸ºé”šç‚¹è·³è½¬ä¼šä¿å­˜å†å²è®°å½•ï¼Œä»è€Œè®© HashRouter æœ‰äº†ç›¸å…³çš„å‰è¿›åé€€æ“ä½œï¼ŒHashRouter ä¸ä¼šå°† <code>#</code> ç¬¦å·åé¢çš„å†…å®¹è¯·æ±‚ã€‚å…¼å®¹æ€§æ›´å¥½ï¼</p>
<h4 id="åœ°å€æ çš„è¡¨ç°å½¢å¼ä¸ä¸€æ ·"><a href="#åœ°å€æ çš„è¡¨ç°å½¢å¼ä¸ä¸€æ ·" class="headerlink" title="åœ°å€æ çš„è¡¨ç°å½¢å¼ä¸ä¸€æ ·"></a>åœ°å€æ çš„è¡¨ç°å½¢å¼ä¸ä¸€æ ·</h4><ul>
<li>HashRouter çš„è·¯å¾„ä¸­åŒ…å« <code>#</code> ï¼Œä¾‹å¦‚ <code>localhost:3000/#/demo/test</code></li>
</ul>
<h4 id="åˆ·æ–°åè·¯ç”±-state-å‚æ•°æ”¹å˜"><a href="#åˆ·æ–°åè·¯ç”±-state-å‚æ•°æ”¹å˜" class="headerlink" title="åˆ·æ–°åè·¯ç”± state å‚æ•°æ”¹å˜"></a>åˆ·æ–°åè·¯ç”± state å‚æ•°æ”¹å˜</h4><ol>
<li>åœ¨BrowserRouter ä¸­ï¼Œstate ä¿å­˜åœ¨history å¯¹è±¡ä¸­ï¼Œåˆ·æ–°ä¸ä¼šä¸¢å¤±</li>
<li>HashRouter åˆ™åˆ·æ–°ä¼šä¸¢å¤± state</li>
</ol>
<h2 id="React-å…¥é—¨å­¦ä¹ ï¼ˆåä¸‰ï¼‰â€“-antd-ç»„ä»¶åº“çš„åŸºæœ¬ä½¿ç”¨"><a href="#React-å…¥é—¨å­¦ä¹ ï¼ˆåä¸‰ï¼‰â€“-antd-ç»„ä»¶åº“çš„åŸºæœ¬ä½¿ç”¨" class="headerlink" title="React å…¥é—¨å­¦ä¹ ï¼ˆåä¸‰ï¼‰â€“ antd ç»„ä»¶åº“çš„åŸºæœ¬ä½¿ç”¨"></a>React å…¥é—¨å­¦ä¹ ï¼ˆåä¸‰ï¼‰â€“ antd ç»„ä»¶åº“çš„åŸºæœ¬ä½¿ç”¨</h2><h2 id="å¼•è¨€-7"><a href="#å¼•è¨€-7" class="headerlink" title="å¼•è¨€"></a>å¼•è¨€</h2><p>åœ¨æˆ‘ä»¬å­¦ä¹ <code> JavaScript</code> çš„æ—¶å€™ï¼Œæˆ‘ä»¬å­¦ä¹ äº†ä¸€ä¸ª <code>bootstrap</code> çš„ç»„ä»¶åº“ã€‚å¯ä»¥è®©æˆ‘ä»¬å¿«é€Ÿå¼€å‘ï¼Œä½†æ˜¯æˆ‘ä»¬ç°åœ¨å­¦ä¹ äº† React ï¼Œä¸€ç§ç»„ä»¶åŒ–ç¼–ç¨‹æ–¹å¼ï¼Œå¾ˆå°‘è¯´ä¼šå»è´´å¤§é‡çš„ HTML ä»£ç ï¼Œå†é…ä¸€ä¸‹ CSSï¼ŒJSã€‚æˆ‘ä»¬ä¹Ÿæœ‰ä¸€äº›ç°æˆçš„ç»„ä»¶åº“å¯ä»¥ä½¿ç”¨ï¼Œæˆ‘ä»¬åªéœ€è¦å†™ä¸€ä¸ªç»„ä»¶æ ‡ç­¾å³å¯è°ƒç”¨ã€‚è¿™è®©æˆ‘ä»¬ React å¼€å‘å˜å¾—ååˆ†çš„å¿«é€Ÿï¼Œæ–¹ä¾¿å’Œæ•´æ´ã€‚</p>
<p>æˆ‘ä»¬è¿™é‡Œå­¦ä¹ çš„æ˜¯ <code>Ant-design</code> ï¼ˆåº”è¯¥æ˜¯è¿™æ ·ï¼‰ï¼Œå®ƒæœ‰å¾ˆå¤šçš„ç»„ä»¶ä¾›æˆ‘ä»¬ä½¿ç”¨</p>
<p><img src="https://ljcimg.oss-cn-beijing.aliyuncs.com/img/image-20210907180731157.png" alt="image-20210907180731157"></p>
<p>æŒ‰é’®ï¼Œæ—¥å†ï¼Œè¿™äº›éƒ½æ˜¯éå¸¸å¸¸ç”¨çš„ç»„ä»¶ï¼Œæˆ‘ä»¬ä¸€èµ·çœ‹çœ‹å¦‚ä½•ä½¿ç”¨å§</p>
<h2 id="1-Antd-ç»„ä»¶åŸºæœ¬ä½¿ç”¨"><a href="#1-Antd-ç»„ä»¶åŸºæœ¬ä½¿ç”¨" class="headerlink" title="1. Antd ç»„ä»¶åŸºæœ¬ä½¿ç”¨"></a>1. Antd ç»„ä»¶åŸºæœ¬ä½¿ç”¨</h2><p>ä½¿ç”¨ <code>Antd</code> ç»„ä»¶éå¸¸çš„ç®€å•</p>
<p>å¼•åŒ… â€”â€“ æš´éœ² â€”- ä½¿ç”¨</p>
<p>é¦–å…ˆæˆ‘ä»¬é€šè¿‡ç»„ä»¶åº“æ¥å®ç°ä¸€ä¸ªç®€å•çš„æŒ‰é’®</p>
<h4 id="ç¬¬ä¸€æ­¥"><a href="#ç¬¬ä¸€æ­¥" class="headerlink" title="ç¬¬ä¸€æ­¥"></a>ç¬¬ä¸€æ­¥</h4><p>å®‰è£…å¹¶å¼•å…¥ <code>antd</code> åŒ…</p>
<p>ä½¿ç”¨å‘½ä»¤ä¸‹è½½è¿™ä¸ªç»„ä»¶åº“</p>
<pre class=" language-shell"><code class="language-shell">yarn add antd
</code></pre>
<p>åœ¨æˆ‘ä»¬éœ€è¦ä½¿ç”¨çš„æ–‡ä»¶ä¸‹å¼•å…¥ï¼Œæˆ‘è¿™é‡Œæ˜¯åœ¨ <code>App.jsx</code> å†…å¼•å…¥</p>
<pre class=" language-js"><code class="language-js"><span class="token keyword">import</span> <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span> Button <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span> <span class="token keyword">from</span> <span class="token string">'antd'</span>
</code></pre>
<p>åœ¨å¼•å…¥çš„åŒæ—¶ï¼Œæš´éœ²å‡ºè¦ä½¿ç”¨çš„ç»„ä»¶å <code>Button</code></p>
<p>æ¨èå»<a target="_blank" rel="noopener" href="https://ant.design/components/button-cn/">å®˜æ–¹æ–‡æ¡£</a>æŸ¥çœ‹ï¼Œéƒ½ä¼šæœ‰ä»£ç è§£é‡Š</p>
<p><img src="https://ljcimg.oss-cn-beijing.aliyuncs.com/img/image-20210907181354552.png" alt="image-20210907181354552"></p>
<p>ç°åœ¨æˆ‘ä»¬å¯ä»¥åœ¨ App ä¸­ä½¿ç”¨ <code>Button</code> ç»„ä»¶</p>
<pre class=" language-js"><code class="language-js"><span class="token operator">&lt;</span>div<span class="token operator">></span>
    App<span class="token punctuation">.</span><span class="token punctuation">.</span>
    <span class="token operator">&lt;</span>Button type<span class="token operator">=</span><span class="token string">"primary"</span><span class="token operator">></span>Primary Button<span class="token operator">&lt;</span><span class="token operator">/</span>Button<span class="token operator">></span>
    <span class="token operator">&lt;</span>Button<span class="token operator">></span>Default Button<span class="token operator">&lt;</span><span class="token operator">/</span>Button<span class="token operator">></span>
    <span class="token operator">&lt;</span>Button type<span class="token operator">=</span><span class="token string">"dashed"</span><span class="token operator">></span>Dashed Button<span class="token operator">&lt;</span><span class="token operator">/</span>Button<span class="token operator">></span>
    <span class="token operator">&lt;</span>br <span class="token operator">/</span><span class="token operator">></span>
    <span class="token operator">&lt;</span>Button type<span class="token operator">=</span><span class="token string">"text"</span><span class="token operator">></span>Text Button<span class="token operator">&lt;</span><span class="token operator">/</span>Button<span class="token operator">></span>
    <span class="token operator">&lt;</span>Button type<span class="token operator">=</span><span class="token string">"link"</span><span class="token operator">></span>Link Button<span class="token operator">&lt;</span><span class="token operator">/</span>Button<span class="token operator">></span>
<span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">></span>
</code></pre>
<p>æˆ‘è¿™é‡Œä½¿ç”¨äº†å‡ ç§æŒ‰é’®</p>
<p>ä½†æ˜¯å°±è¿™æ ·ä½ ä¼šå‘ç°æŒ‰é’®å°‘äº†æ ·å¼</p>
<p>æˆ‘ä»¬è¿˜éœ€è¦å¼•å…¥ <code>antd</code> çš„ CSS æ–‡ä»¶</p>
<pre class=" language-js"><code class="language-js">@<span class="token keyword">import</span> <span class="token string">'/node_modules/antd/dist/antd.less'</span><span class="token punctuation">;</span>
</code></pre>
<p>å¯ä»¥åœ¨ <code>node_modules</code> æ–‡ä»¶ä¸­çš„ <code>antd</code> ç›®å½•ä¸‹çš„ <code>dist</code> æ–‡ä»¶å¤¹ä¸­æ‰¾åˆ°ç›¸åº”çš„æ ·å¼æ–‡ä»¶ï¼Œå¼•å…¥å³å¯</p>
<p><img src="https://ljcimg.oss-cn-beijing.aliyuncs.com/img/image-20210907181854774.png" alt="image-20210907181854774"></p>
<p>å³å¯æˆåŠŸå¼•å…¥ <code>antd</code> ç»„ä»¶</p>
<h2 id="2-è‡ªå®šä¹‰ä¸»é¢˜é¢œè‰²"><a href="#2-è‡ªå®šä¹‰ä¸»é¢˜é¢œè‰²" class="headerlink" title="2. è‡ªå®šä¹‰ä¸»é¢˜é¢œè‰²"></a>2. è‡ªå®šä¹‰ä¸»é¢˜é¢œè‰²</h2><p>ç”±äºè¿™äº›ç»„ä»¶é‡‡ç”¨çš„é¢œè‰²ï¼Œéƒ½æ˜¯æ”¯ä»˜å®è“ï¼Œæœ‰æ—¶å€™æˆ‘ä»¬ä¸æƒ³è¦è¿™æ ·çš„é¢œè‰²ï¼Œæƒ³è¦ç”¨å…¶ä»–çš„é…è‰²ï¼Œè¿™å½“ç„¶æ˜¯å¯ä»¥å®ç°çš„ï¼Œæˆ‘ä»¬éœ€è¦å¼•ç”¨ä¸€äº›åº“å’Œæ›´æ”¹ä¸€äº›é…ç½®æ–‡ä»¶æ¥å®ç°</p>
<p>åœ¨è§†é¢‘ä¸­ï¼Œè€å¸ˆè®²è§£çš„æ˜¯ <code>3.å‡ </code> ç‰ˆæœ¬ä¸­çš„å®ç°æ–¹æ³•ï¼Œè¿™ç§æ–¹æ³•éœ€è¦å»æš´éœ² React ä¸­çš„é…ç½®æ–‡ä»¶ï¼Œè¿™ç§æ“ä½œæ˜¯ä¸å¯è¿”å›çš„ï¼Œä¸€æ—¦æš´éœ²å°±ä¸å¯å›æ”¶ã€‚æˆ‘è§‰å¾—è¿™ä¸æ˜¯ä¸€ä¸ªå¥½æ–¹æ³•~</p>
<p>åœ¨ <code>antd</code> æœ€æ–°ç‰ˆä¸­ï¼Œå¼•å…¥äº† <code>craco</code> åº“ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ <code>craco</code> æ¥å®ç°è‡ªå®šä¹‰çš„æ•ˆæœ</p>
<p>é¦–å…ˆæˆ‘ä»¬éœ€è¦å®‰è£… <code>craco</code> </p>
<pre class=" language-shell"><code class="language-shell">yarn add @craco/craco
</code></pre>
<p>åŒæ—¶æˆ‘ä»¬éœ€è¦æ›´æ”¹ <code>package.json</code> ä¸­çš„å¯åŠ¨æ–‡ä»¶</p>
<pre class=" language-json"><code class="language-json"><span class="token property">"scripts"</span><span class="token operator">:</span> &amp;#<span class="token number">123</span><span class="token punctuation">;</span>
  <span class="token property">"start"</span><span class="token operator">:</span> <span class="token string">"craco start"</span><span class="token punctuation">,</span>
  <span class="token property">"build"</span><span class="token operator">:</span> <span class="token string">"craco build"</span><span class="token punctuation">,</span>
  <span class="token property">"test"</span><span class="token operator">:</span> <span class="token string">"craco test"</span><span class="token punctuation">,</span>
  <span class="token property">"eject"</span><span class="token operator">:</span> <span class="token string">"react-scripts eject"</span>
&amp;#<span class="token number">125</span><span class="token punctuation">;</span><span class="token punctuation">,</span>
</code></pre>
<p>æ›´æ”¹æˆ <code>craco</code> æ‰§è¡Œ</p>
<p>æ¥ä¸‹æ¥æˆ‘ä»¬éœ€è¦åœ¨æ ¹ç›®å½•ä¸‹æ–°å»ºä¸€ä¸ª <code>craco.config.js</code> æ–‡ä»¶ï¼Œç”¨äºé…ç½®è‡ªå®šä¹‰å†…å®¹</p>
<pre class=" language-js"><code class="language-js"><span class="token keyword">const</span> CracoLessPlugin <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'craco-less'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>
  plugins<span class="token punctuation">:</span> <span class="token punctuation">[</span>
    <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>
      plugin<span class="token punctuation">:</span> CracoLessPlugin<span class="token punctuation">,</span>
      options<span class="token punctuation">:</span> <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>
        lessLoaderOptions<span class="token punctuation">:</span> <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>
          lessOptions<span class="token punctuation">:</span> <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>
            modifyVars<span class="token punctuation">:</span> <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span> <span class="token string">'@primary-color'</span><span class="token punctuation">:</span> <span class="token string">'skyblue'</span> <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span><span class="token punctuation">,</span>
            javascriptEnabled<span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
          <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span><span class="token punctuation">,</span>
        <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span><span class="token punctuation">,</span>
      <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span><span class="token punctuation">,</span>
    <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span><span class="token punctuation">,</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
<span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span><span class="token punctuation">;</span>
</code></pre>
<p>å…¶å®å®ƒå°±æ˜¯ç”¨æ¥æ“ä½œ <code>less</code> æ–‡ä»¶çš„å…¨å±€é¢œè‰²</p>
<p>ç®€å•çš„è¯´ï¼Œ<code>antd</code> ç»„ä»¶æ˜¯é‡‡ç”¨ <code>less</code> ç¼–å†™çš„ï¼Œæˆ‘ä»¬éœ€è¦é€šè¿‡é‡æ–°é…ç½®çš„æ–¹å¼å»æ›´æ”¹å®ƒçš„å€¼</p>
<p>åŒæ—¶æˆ‘ä»¬éœ€è¦å°†æˆ‘ä»¬å…ˆå‰çš„ <code>App.css</code> æ–‡ä»¶æ›´æ”¹ä¸º <code>App.less</code> æ–‡ä»¶ï¼Œåœ¨å½“ä¸­å¼•å…¥æˆ‘ä»¬çš„ <code>less</code> æ–‡ä»¶</p>
<pre class=" language-js"><code class="language-js">@<span class="token keyword">import</span> <span class="token string">'/node_modules/antd/dist/antd.less'</span><span class="token punctuation">;</span>
</code></pre>
<p>æ³¨æ„ä¸€å®šè¦æ·»åŠ <strong>åˆ†å·ç»“å°¾</strong>ï¼Œè¿™æ˜¯ä¸€ä¸ªéå¸¸å®¹æ˜“çŠ¯çš„é”™è¯¯</p>
<p><img src="https://ljcimg.oss-cn-beijing.aliyuncs.com/img/image-20210907200116517.png" alt="image-20210907200116517"></p>
<p>å¯è§ï¼Œæˆ‘ä»¬æˆåŠŸçš„å°†ä¸»é¢˜è‰²ä¿®æ”¹æˆäº†çº¢è‰²</p>
<blockquote>
<p>antd uiç»„ä»¶åº“å°±è®°è¿™ä¹ˆå¤šï¼Œè¿˜æœ‰æ ·å¼çš„æŒ‰éœ€å¼•å…¥æ²¡æœ‰è®°å½•ï¼Œä¸å¤ªå–œå¥½æš´éœ² React é…ç½®æ–‡ä»¶â€¦</p>
</blockquote>
</article><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta">æ–‡ç« ä½œè€…: </span><span class="post-copyright-info"><a href="http://zyydgrbk.top">é‚¹é˜³</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta">æ–‡ç« é“¾æ¥: </span><span class="post-copyright-info"><a href="http://zyydgrbk.top/2023/08/16/react-xue-xi/">http://zyydgrbk.top/2023/08/16/react-xue-xi/</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta">ç‰ˆæƒå£°æ˜: </span><span class="post-copyright-info">æœ¬åšå®¢æ‰€æœ‰æ–‡ç« é™¤ç‰¹åˆ«å£°æ˜å¤–ï¼Œå‡é‡‡ç”¨ <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank">CC BY-NC-SA 4.0</a> è®¸å¯åè®®ã€‚è½¬è½½è¯·æ³¨æ˜æ¥è‡ª <a href="http://zyydgrbk.top" target="_blank">é‚¹é˜³ ã® åšå®¢</a>ï¼</span></div></div><div class="tag_share"><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/%E5%89%8D%E7%AB%AF/">å‰ç«¯</a></div><div class="post_share"><div class="social-share" data-image="https://zyydgrbk.oss-cn-chengdu.aliyuncs.com/images/01d59958d20fd2a801219c77f1d73b.webp" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/butterfly-extsrc/sharejs/dist/css/share.min.css" media="print" onload="this.media='all'"><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc/sharejs/dist/js/social-share.min.js" defer></script></div></div><nav class="pagination-post" id="pagination"><div class="prev-post pull-left"><a href="/2023/08/16/react-xue-xi-er/" title="reactå­¦ä¹ äºŒ"><img class="cover" src="https://zyydgrbk.oss-cn-chengdu.aliyuncs.com/images/0128be58d20fc3a801219c77e6ff8e.webp" onerror="onerror=null;src='/img/404.jpg'" alt="cover of previous post"><div class="pagination-info"><div class="label">ä¸Šä¸€ç¯‡</div><div class="prev_info">reactå­¦ä¹ äºŒ</div></div></a></div><div class="next-post pull-right"><a href="/2023/08/15/zhang-kong-xi-guan-yue-du-bi-ji/" title="æŒæ§ä¹ æƒ¯é˜…è¯»ç¬”è®°"><img class="cover" src="https://zyydgrbk.oss-cn-chengdu.aliyuncs.com/images/016c6058d20fc3a801219c7727314f.webp" onerror="onerror=null;src='/img/404.jpg'" alt="cover of next post"><div class="pagination-info"><div class="label">ä¸‹ä¸€ç¯‡</div><div class="next_info">æŒæ§ä¹ æƒ¯é˜…è¯»ç¬”è®°</div></div></a></div></nav><div class="relatedPosts"><div class="headline"><i class="fas fa-thumbs-up fa-fw"></i><span>ç›¸å…³æ¨è</span></div><div class="relatedPosts-list"><div><a href="/2023/08/10/http-jie-kou-ping-tai-kai-fa/" title="httpæ¥å£å¹³å°å¼€å‘"><img class="cover" src="https://zyydgrbk.oss-cn-chengdu.aliyuncs.com/images/0121d458d20fb3a801219c77ae2613.webp" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2023-08-10</div><div class="title">httpæ¥å£å¹³å°å¼€å‘</div></div></a></div><div><a href="/2023/09/13/js-shen-ru-ife-baidu-com/" title="jsæ·±å…¥-ife.baidu.com"><img class="cover" src="https://zyydgrbk.oss-cn-chengdu.aliyuncs.com/images/Snipaste_2023-08-17_17-10-46.jpg" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2023-09-13</div><div class="title">jsæ·±å…¥-ife.baidu.com</div></div></a></div><div><a href="/2023/09/02/nodejs/" title="nodejs"><img class="cover" src="https://zyydgrbk.oss-cn-chengdu.aliyuncs.com/images/Snipaste_2023-08-17_17-10-26.jpg" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2023-09-02</div><div class="title">nodejs</div></div></a></div><div><a href="/2023/08/17/react-jiao-shou-jia-pei-zhi-dai-li-zong-jie/" title="reactè„šæ‰‹æ¶é…ç½®ä»£ç†æ€»ç»“"><img class="cover" src="https://zyydgrbk.oss-cn-chengdu.aliyuncs.com/images/Snipaste_2023-08-17_17-09-32.jpg" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2023-08-17</div><div class="title">reactè„šæ‰‹æ¶é…ç½®ä»£ç†æ€»ç»“</div></div></a></div><div><a href="/2023/08/17/xie-lian-shou-xiang-mu-shi-yu-jian-de-wen-ti/" title="å†™ç»ƒæ‰‹é¡¹ç›®æ—¶é‡è§çš„é—®é¢˜"><img class="cover" src="https://zyydgrbk.oss-cn-chengdu.aliyuncs.com/images/Snipaste_2023-08-17_17-09-45.jpg" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2023-08-17</div><div class="title">å†™ç»ƒæ‰‹é¡¹ç›®æ—¶é‡è§çš„é—®é¢˜</div></div></a></div><div><a href="/2023/09/26/hou-duan-wen-jian-shang-chuan/" title="åç«¯æ–‡ä»¶ä¸Šä¼ "><img class="cover" src="https://zyydgrbk.oss-cn-chengdu.aliyuncs.com/images/Snipaste_2023-09-26_19-44-45.jpg" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2023-09-26</div><div class="title">åç«¯æ–‡ä»¶ä¸Šä¼ </div></div></a></div></div></div></div><div class="aside-content" id="aside-content"><div class="card-widget card-info"><div class="is-center"><div class="avatar-img"><img src="https://zyydgrbk.oss-cn-chengdu.aliyuncs.com/images/nobackground.png" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/></div><div class="author-info__name">é‚¹é˜³</div><div class="author-info__description">Being happy is a duty!</div></div><div class="card-info-data site-data is-center"><a href="/archives/"><div class="headline">æ–‡ç« </div><div class="length-num">70</div></a><a href="/tags/"><div class="headline">æ ‡ç­¾</div><div class="length-num">20</div></a><a href="/categories/"><div class="headline">åˆ†ç±»</div><div class="length-num">9</div></a></div><a id="card-info-btn" target="_blank" rel="noopener" href="https://github.com/"><i class="fab fa-github"></i><span>My github</span></a><div class="card-info-social-icons is-center"><a class="social-icon" href="https://github.com/" target="_blank" title="Github"><i class="fab fa-github" style="color: #hdhfbb;"></i></a><a class="social-icon" href="mailto:zouyang159536@163.com" target="_blank" title="Email"><i class="fas fa-envelope" style="color: #000000;"></i></a></div></div><div class="card-widget card-announcement"><div class="item-headline"><i class="fas fa-bullhorn fa-shake"></i><span>å…¬å‘Š</span></div><div class="announcement_content">This is my Blog</div></div><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="fas fa-stream"></i><span>ç›®å½•</span><span class="toc-percentage"></span></div><div class="toc-content"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#react%E5%AD%A6%E4%B9%A0%E8%B7%AF%E5%BE%84"><span class="toc-number">1.</span> <span class="toc-text">reactå­¦ä¹ è·¯å¾„</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#React-%E4%BB%8E%E5%85%A5%E9%97%A8%E5%88%B0%E5%85%A5%E5%9C%9F%EF%BC%88%E4%B8%80%EF%BC%89%E2%80%93-%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86%E4%BB%A5%E5%8F%8A-jsx-%E8%AF%AD%E6%B3%95"><span class="toc-number">1.1.</span> <span class="toc-text">React ä»å…¥é—¨åˆ°å…¥åœŸï¼ˆä¸€ï¼‰â€“ åŸºç¡€çŸ¥è¯†ä»¥åŠ jsx è¯­æ³•</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%B8%80%E3%80%81React-%E7%AE%80%E4%BB%8B"><span class="toc-number">1.2.</span> <span class="toc-text">ä¸€ã€React ç®€ä»‹</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-%E5%85%B3%E4%BA%8E-React"><span class="toc-number">1.2.1.</span> <span class="toc-text">1. å…³äº React</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-Hello-React"><span class="toc-number">1.2.2.</span> <span class="toc-text">2. Hello React</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-%E8%99%9A%E6%8B%9F-DOM-%E5%92%8C%E7%9C%9F%E5%AE%9E-DOM-%E7%9A%84%E4%B8%A4%E7%A7%8D%E5%88%9B%E5%BB%BA%E6%96%B9%E6%B3%95"><span class="toc-number">1.2.3.</span> <span class="toc-text">3. è™šæ‹Ÿ DOM å’ŒçœŸå® DOM çš„ä¸¤ç§åˆ›å»ºæ–¹æ³•</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#3-1-JS-%E5%88%9B%E5%BB%BA%E8%99%9A%E6%8B%9F-DOM"><span class="toc-number">1.2.3.1.</span> <span class="toc-text">3.1 JS åˆ›å»ºè™šæ‹Ÿ DOM</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3-2-Jsx-%E5%88%9B%E5%BB%BA%E8%99%9A%E6%8B%9FDOM"><span class="toc-number">1.2.3.2.</span> <span class="toc-text">3.2 Jsx åˆ›å»ºè™šæ‹ŸDOM</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%BA%8C%E3%80%81jsx-%E8%AF%AD%E6%B3%95"><span class="toc-number">1.3.</span> <span class="toc-text">äºŒã€jsx è¯­æ³•</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#1-%E6%B3%A8%E9%87%8A"><span class="toc-number">1.3.0.1.</span> <span class="toc-text">1. æ³¨é‡Š</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-%E6%95%B0%E7%BB%84"><span class="toc-number">1.3.0.2.</span> <span class="toc-text">2. æ•°ç»„</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#tip-JSX-%E5%B0%8F%E7%BB%83%E4%B9%A0"><span class="toc-number">1.3.1.</span> <span class="toc-text">tip: JSX å°ç»ƒä¹ </span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#React-%E4%BB%8E%E5%85%A5%E9%97%A8%E5%88%B0%E5%85%A5%E5%9C%9F%EF%BC%88%E4%BA%8C%EF%BC%89%E2%80%93-%E9%9D%A2%E5%90%91%E7%BB%84%E4%BB%B6%E7%BC%96%E7%A8%8B"><span class="toc-number">1.4.</span> <span class="toc-text">React ä»å…¥é—¨åˆ°å…¥åœŸï¼ˆäºŒï¼‰â€“ é¢å‘ç»„ä»¶ç¼–ç¨‹</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%B8%80%E3%80%81%E7%BB%84%E4%BB%B6%E7%9A%84%E4%BD%BF%E7%94%A8"><span class="toc-number">1.5.</span> <span class="toc-text">ä¸€ã€ç»„ä»¶çš„ä½¿ç”¨</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-%E5%87%BD%E6%95%B0%E5%BC%8F%E7%BB%84%E4%BB%B6"><span class="toc-number">1.5.1.</span> <span class="toc-text">1. å‡½æ•°å¼ç»„ä»¶</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-%E7%B1%BB%E5%BC%8F%E7%BB%84%E4%BB%B6"><span class="toc-number">1.5.2.</span> <span class="toc-text">2. ç±»å¼ç»„ä»¶</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-%E5%85%B6%E4%BB%96%E7%9F%A5%E8%AF%86"><span class="toc-number">1.5.3.</span> <span class="toc-text">3. å…¶ä»–çŸ¥è¯†</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%BA%8C%E3%80%81%E7%BB%84%E4%BB%B6%E5%AE%9E%E4%BE%8B%E4%B8%89%E5%A4%A7%E5%B1%9E%E6%80%A7"><span class="toc-number">1.6.</span> <span class="toc-text">äºŒã€ç»„ä»¶å®ä¾‹ä¸‰å¤§å±æ€§</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-state"><span class="toc-number">1.6.1.</span> <span class="toc-text">1. state</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-props"><span class="toc-number">1.6.2.</span> <span class="toc-text">2. props</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-refs"><span class="toc-number">1.6.3.</span> <span class="toc-text">3. refs</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-%E4%BA%8B%E4%BB%B6%E5%A4%84%E7%90%86"><span class="toc-number">1.6.4.</span> <span class="toc-text">4. äº‹ä»¶å¤„ç†</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%B8%89%E3%80%81%E9%AB%98%E9%98%B6%E5%87%BD%E6%95%B0"><span class="toc-number">1.7.</span> <span class="toc-text">ä¸‰ã€é«˜é˜¶å‡½æ•°</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#React-%E5%85%A5%E9%97%A8%EF%BC%88%E4%B8%89%EF%BC%89-%E2%80%93-%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F-LifeCycle"><span class="toc-number">1.8.</span> <span class="toc-text">React å…¥é—¨ï¼ˆä¸‰ï¼‰ â€“ ç”Ÿå‘½å‘¨æœŸ LifeCycle</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%BC%95%E8%A8%80"><span class="toc-number">1.9.</span> <span class="toc-text">å¼•è¨€</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#React-%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F"><span class="toc-number">1.10.</span> <span class="toc-text">React ç”Ÿå‘½å‘¨æœŸ</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%88%9D%E5%A7%8B%E5%8C%96%E9%98%B6%E6%AE%B5"><span class="toc-number">1.10.1.</span> <span class="toc-text">åˆå§‹åŒ–é˜¶æ®µ</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#1-constructor-%E6%89%A7%E8%A1%8C"><span class="toc-number">1.10.1.1.</span> <span class="toc-text">1. constructor æ‰§è¡Œ</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-static-getDerivedStateFromProps-%E6%89%A7%E8%A1%8C-%EF%BC%88%E6%96%B0%E9%92%A9%E5%AD%90%EF%BC%89"><span class="toc-number">1.10.1.2.</span> <span class="toc-text">2. static getDerivedStateFromProps æ‰§è¡Œ ï¼ˆæ–°é’©å­ï¼‰</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-componentWillMount-%E6%89%A7%E8%A1%8C%EF%BC%88%E5%8D%B3%E5%B0%86%E5%BA%9F%E5%BC%83%EF%BC%89"><span class="toc-number">1.10.1.3.</span> <span class="toc-text">2. componentWillMount æ‰§è¡Œï¼ˆå³å°†åºŸå¼ƒï¼‰</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3-render-%E6%89%A7%E8%A1%8C"><span class="toc-number">1.10.1.4.</span> <span class="toc-text">3. render æ‰§è¡Œ</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#4-componentDidMount-%E6%89%A7%E8%A1%8C"><span class="toc-number">1.10.1.5.</span> <span class="toc-text">4. componentDidMount æ‰§è¡Œ</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%88%9D%E5%A7%8B%E5%8C%96%E9%98%B6%E6%AE%B5%E6%80%BB%E7%BB%93"><span class="toc-number">1.10.1.6.</span> <span class="toc-text">åˆå§‹åŒ–é˜¶æ®µæ€»ç»“</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%9B%B4%E6%96%B0%E9%98%B6%E6%AE%B5"><span class="toc-number">1.10.2.</span> <span class="toc-text">æ›´æ–°é˜¶æ®µ</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#1-getDerivedStateFromProps-%E6%89%A7%E8%A1%8C"><span class="toc-number">1.10.2.1.</span> <span class="toc-text">1. getDerivedStateFromProps æ‰§è¡Œ</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-shouldComponentUpdat-%E6%89%A7%E8%A1%8C"><span class="toc-number">1.10.2.2.</span> <span class="toc-text">2. shouldComponentUpdat æ‰§è¡Œ</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3-render-%E6%89%A7%E8%A1%8C-1"><span class="toc-number">1.10.2.3.</span> <span class="toc-text">3. render æ‰§è¡Œ</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#4-getSnapshotBeforeUpdate-%E6%89%A7%E8%A1%8C"><span class="toc-number">1.10.2.4.</span> <span class="toc-text">4. getSnapshotBeforeUpdate æ‰§è¡Œ</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#5-componentDidUpdate-%E6%89%A7%E8%A1%8C"><span class="toc-number">1.10.2.5.</span> <span class="toc-text">5. componentDidUpdate æ‰§è¡Œ</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E9%94%80%E6%AF%81%E9%98%B6%E6%AE%B5"><span class="toc-number">1.10.3.</span> <span class="toc-text">é”€æ¯é˜¶æ®µ</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#componentWillUnmount-%E6%89%A7%E8%A1%8C"><span class="toc-number">1.10.3.1.</span> <span class="toc-text">componentWillUnmount  æ‰§è¡Œ</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%80%BB%E7%BB%93"><span class="toc-number">1.11.</span> <span class="toc-text">æ€»ç»“</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#React%E5%85%A5%E9%97%A8%E5%AD%A6%E4%B9%A0%EF%BC%88%E5%9B%9B%EF%BC%89%E2%80%93-diffing-%E7%AE%97%E6%B3%95"><span class="toc-number">1.12.</span> <span class="toc-text">Reactå…¥é—¨å­¦ä¹ ï¼ˆå››ï¼‰â€“ diffing ç®—æ³•</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%89%8D%E8%A8%80"><span class="toc-number">1.13.</span> <span class="toc-text">å‰è¨€</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%BB%80%E4%B9%88%E6%98%AF%E8%99%9A%E6%8B%9F-DOM-%EF%BC%9F"><span class="toc-number">1.14.</span> <span class="toc-text">ä»€ä¹ˆæ˜¯è™šæ‹Ÿ DOM ï¼Ÿ</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%BB%80%E4%B9%88%E6%98%AF-diff-%E7%AE%97%E6%B3%95%EF%BC%9F"><span class="toc-number">1.15.</span> <span class="toc-text">ä»€ä¹ˆæ˜¯ diff ç®—æ³•ï¼Ÿ</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%B8%89%E4%B8%AA%E7%AD%96%E7%95%A5"><span class="toc-number">1.16.</span> <span class="toc-text">ä¸‰ä¸ªç­–ç•¥</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#tree-diff-%E5%88%86%E5%B1%82%E6%B1%82%E5%BC%82"><span class="toc-number">1.16.1.</span> <span class="toc-text">tree diff åˆ†å±‚æ±‚å¼‚</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#component-diff"><span class="toc-number">1.16.2.</span> <span class="toc-text">component diff</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#element-diff"><span class="toc-number">1.16.3.</span> <span class="toc-text">element diff</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%BB%BA%E8%AE%AE"><span class="toc-number">1.17.</span> <span class="toc-text">å»ºè®®</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%8F%82%E8%80%83%E8%B5%84%E6%96%99"><span class="toc-number">1.18.</span> <span class="toc-text">å‚è€ƒèµ„æ–™</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#React-%E5%85%A5%E9%97%A8%E5%AD%A6%E4%B9%A0%EF%BC%88%E4%BA%94%EF%BC%89%E2%80%93-%E8%AE%A4%E8%AF%86%E8%84%9A%E6%89%8B%E6%9E%B6"><span class="toc-number">1.19.</span> <span class="toc-text">React å…¥é—¨å­¦ä¹ ï¼ˆäº”ï¼‰â€“ è®¤è¯†è„šæ‰‹æ¶</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%AE%80%E4%BB%8B"><span class="toc-number">1.20.</span> <span class="toc-text">ç®€ä»‹</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%F0%9F%8D%95-1-%E4%BB%80%E4%B9%88%E6%98%AF-React-%E8%84%9A%E6%89%8B%E6%9E%B6%EF%BC%9F"><span class="toc-number">1.21.</span> <span class="toc-text">ğŸ• 1. ä»€ä¹ˆæ˜¯ React è„šæ‰‹æ¶ï¼Ÿ</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%F0%9F%8D%94-2-%E4%B8%BA%E4%BB%80%E4%B9%88%E8%A6%81%E7%94%A8%E8%84%9A%E6%89%8B%E6%9E%B6%EF%BC%9F"><span class="toc-number">1.22.</span> <span class="toc-text">ğŸ” 2. ä¸ºä»€ä¹ˆè¦ç”¨è„šæ‰‹æ¶ï¼Ÿ</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%F0%9F%8D%9F-3-%E6%80%8E%E4%B9%88%E7%94%A8-React-%E8%84%9A%E6%89%8B%E6%9E%B6%EF%BC%9F"><span class="toc-number">1.23.</span> <span class="toc-text">ğŸŸ 3. æ€ä¹ˆç”¨ React è„šæ‰‹æ¶ï¼Ÿ</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-%E5%AE%89%E8%A3%85-React-%E8%84%9A%E6%89%8B%E6%9E%B6"><span class="toc-number">1.23.1.</span> <span class="toc-text">1. å®‰è£… React è„šæ‰‹æ¶</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-%E8%84%9A%E6%89%8B%E6%9E%B6%E9%A1%B9%E7%9B%AE%E7%BB%93%E6%9E%84"><span class="toc-number">1.23.2.</span> <span class="toc-text">2. è„šæ‰‹æ¶é¡¹ç›®ç»“æ„</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#React-%E5%85%A5%E9%97%A8%E5%AD%A6%E4%B9%A0%EF%BC%88%E5%85%AD%EF%BC%89%E2%80%93-TodoList-%E6%A1%88%E4%BE%8B"><span class="toc-number">1.24.</span> <span class="toc-text">React å…¥é—¨å­¦ä¹ ï¼ˆå…­ï¼‰â€“ TodoList æ¡ˆä¾‹</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%BC%95%E8%A8%80-1"><span class="toc-number">1.25.</span> <span class="toc-text">å¼•è¨€</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%B8%80%E3%80%81%E6%8B%86%E5%88%86%E7%BB%84%E4%BB%B6"><span class="toc-number">1.26.</span> <span class="toc-text">ä¸€ã€æ‹†åˆ†ç»„ä»¶</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%BA%8C%E3%80%81%E5%AE%9E%E7%8E%B0%E9%9D%99%E6%80%81%E7%BB%84%E4%BB%B6"><span class="toc-number">1.27.</span> <span class="toc-text">äºŒã€å®ç°é™æ€ç»„ä»¶</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%B8%89%E3%80%81%E5%AE%9E%E7%8E%B0%E5%8A%A8%E6%80%81%E7%BB%84%E4%BB%B6"><span class="toc-number">1.28.</span> <span class="toc-text">ä¸‰ã€å®ç°åŠ¨æ€ç»„ä»¶</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%F0%9F%8D%8E-1-%E5%8A%A8%E6%80%81%E5%B1%95%E7%A4%BA%E5%88%97%E8%A1%A8"><span class="toc-number">1.28.1.</span> <span class="toc-text">ğŸ 1. åŠ¨æ€å±•ç¤ºåˆ—è¡¨</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%F0%9F%8D%8D-2-%E6%B7%BB%E5%8A%A0%E4%BA%8B%E9%A1%B9%E5%8A%9F%E8%83%BD"><span class="toc-number">1.28.2.</span> <span class="toc-text">ğŸ 2. æ·»åŠ äº‹é¡¹åŠŸèƒ½</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%F0%9F%8D%8B-3-%E5%AE%9E%E7%8E%B0%E9%BC%A0%E6%A0%87%E6%82%AC%E6%B5%AE%E6%95%88%E6%9E%9C"><span class="toc-number">1.28.3.</span> <span class="toc-text">ğŸ‹ 3. å®ç°é¼ æ ‡æ‚¬æµ®æ•ˆæœ</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%F0%9F%8D%89-4-%E5%A4%8D%E9%80%89%E6%A1%86%E7%8A%B6%E6%80%81%E7%BB%B4%E6%8A%A4"><span class="toc-number">1.28.4.</span> <span class="toc-text">ğŸ‰ 4. å¤é€‰æ¡†çŠ¶æ€ç»´æŠ¤</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%F0%9F%8D%8F-5-%E9%99%90%E5%88%B6%E5%8F%82%E6%95%B0%E7%B1%BB%E5%9E%8B"><span class="toc-number">1.28.5.</span> <span class="toc-text">ğŸ 5. é™åˆ¶å‚æ•°ç±»å‹</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%F0%9F%8D%92-6-%E5%88%A0%E9%99%A4%E6%8C%89%E9%92%AE"><span class="toc-number">1.28.6.</span> <span class="toc-text">ğŸ’ 6. åˆ é™¤æŒ‰é’®</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%F0%9F%8D%93-7-%E8%8E%B7%E5%8F%96%E5%AE%8C%E6%88%90%E6%95%B0%E9%87%8F"><span class="toc-number">1.28.7.</span> <span class="toc-text">ğŸ“ 7. è·å–å®Œæˆæ•°é‡</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%F0%9F%8D%8A-8-%E5%85%A8%E9%80%89%E6%8C%89%E9%92%AE"><span class="toc-number">1.28.8.</span> <span class="toc-text">ğŸŠ 8. å…¨é€‰æŒ‰é’®</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%F0%9F%A5%AD-9-%E5%88%A0%E9%99%A4%E5%B7%B2%E5%AE%8C%E6%88%90"><span class="toc-number">1.28.9.</span> <span class="toc-text">ğŸ¥­ 9. åˆ é™¤å·²å®Œæˆ</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%80%BB%E7%BB%93-1"><span class="toc-number">1.29.</span> <span class="toc-text">æ€»ç»“</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#React-%E5%85%A5%E9%97%A8%E5%AD%A6%E4%B9%A0%EF%BC%88%E4%B8%83%EF%BC%89%E2%80%93-%E8%84%9A%E6%89%8B%E6%9E%B6%E9%85%8D%E7%BD%AE%E4%BB%A3%E7%90%86"><span class="toc-number">1.30.</span> <span class="toc-text">React å…¥é—¨å­¦ä¹ ï¼ˆä¸ƒï¼‰â€“ è„šæ‰‹æ¶é…ç½®ä»£ç†</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E5%BC%95%E8%A8%80-2"><span class="toc-number">2.</span> <span class="toc-text">å¼•è¨€</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#1-%E5%85%A8%E5%B1%80%E4%BB%A3%E7%90%86"><span class="toc-number">2.1.</span> <span class="toc-text">1. å…¨å±€ä»£ç†</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2-%E5%8D%95%E7%8B%AC%E9%85%8D%E7%BD%AE"><span class="toc-number">2.2.</span> <span class="toc-text">2. å•ç‹¬é…ç½®</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#React-%E5%85%A5%E9%97%A8%E5%AD%A6%E4%B9%A0%EF%BC%88%E5%85%AB%EF%BC%89%E2%80%93-GitHub-%E6%90%9C%E7%B4%A2%E6%A1%88%E4%BE%8B"><span class="toc-number">2.3.</span> <span class="toc-text">React å…¥é—¨å­¦ä¹ ï¼ˆå…«ï¼‰â€“ GitHub æœç´¢æ¡ˆä¾‹</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%BC%95%E8%A8%80-3"><span class="toc-number">2.4.</span> <span class="toc-text">å¼•è¨€</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%B8%80%E3%80%81%E5%AE%9E%E7%8E%B0%E9%9D%99%E6%80%81%E7%BB%84%E4%BB%B6"><span class="toc-number">2.5.</span> <span class="toc-text">ä¸€ã€å®ç°é™æ€ç»„ä»¶</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%BA%8C%E3%80%81axios-%E5%8F%91%E9%80%81%E8%AF%B7%E6%B1%82"><span class="toc-number">2.6.</span> <span class="toc-text">äºŒã€axios å‘é€è¯·æ±‚</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%B8%89%E3%80%81%E6%B8%B2%E6%9F%93%E6%95%B0%E6%8D%AE"><span class="toc-number">2.7.</span> <span class="toc-text">ä¸‰ã€æ¸²æŸ“æ•°æ®</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%9B%9B%E3%80%81%E5%A2%9E%E5%8A%A0%E4%BA%A4%E4%BA%92"><span class="toc-number">2.8.</span> <span class="toc-text">å››ã€å¢åŠ äº¤äº’</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#React-%E5%85%A5%E9%97%A8%E5%AD%A6%E4%B9%A0%EF%BC%88%E4%B9%9D%EF%BC%89%E2%80%93-%E6%B6%88%E6%81%AF%E8%AE%A2%E9%98%85%E5%8F%91%E5%B8%83"><span class="toc-number">2.9.</span> <span class="toc-text">React å…¥é—¨å­¦ä¹ ï¼ˆä¹ï¼‰â€“ æ¶ˆæ¯è®¢é˜…å‘å¸ƒ</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%BC%95%E8%A8%80-4"><span class="toc-number">2.10.</span> <span class="toc-text">å¼•è¨€</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%B6%88%E6%81%AF%E5%8F%91%E5%B8%83%E8%AE%A2%E9%98%85"><span class="toc-number">2.11.</span> <span class="toc-text">æ¶ˆæ¯å‘å¸ƒè®¢é˜…</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%89%A9%E5%B1%95-%E2%80%93-Fetch"><span class="toc-number">2.12.</span> <span class="toc-text">æ‰©å±• â€“ Fetch</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%F0%9F%8C%AE-React-%E5%85%A5%E9%97%A8%E5%AD%A6%E4%B9%A0%EF%BC%88%E5%8D%81%EF%BC%89%E2%80%93-React-%E8%B7%AF%E7%94%B1"><span class="toc-number">2.13.</span> <span class="toc-text">ğŸŒ® React å…¥é—¨å­¦ä¹ ï¼ˆåï¼‰â€“ React è·¯ç”±</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%BC%95%E8%A8%80-5"><span class="toc-number">2.14.</span> <span class="toc-text">å¼•è¨€</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%F0%9F%8D%95-1-SPA"><span class="toc-number">2.15.</span> <span class="toc-text">ğŸ• 1. SPA</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%F0%9F%8D%94-2-%E4%BB%80%E4%B9%88%E6%98%AF%E8%B7%AF%E7%94%B1%EF%BC%9F"><span class="toc-number">2.16.</span> <span class="toc-text">ğŸ” 2. ä»€ä¹ˆæ˜¯è·¯ç”±ï¼Ÿ</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%F0%9F%8D%9F-3-%E8%B7%AF%E7%94%B1%E7%9A%84%E5%8E%9F%E7%90%86"><span class="toc-number">2.17.</span> <span class="toc-text">ğŸŸ 3. è·¯ç”±çš„åŸç†</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%F0%9F%8C%AD-4-%E8%B7%AF%E7%94%B1%E7%9A%84%E5%9F%BA%E6%9C%AC%E4%BD%BF%E7%94%A8"><span class="toc-number">2.18.</span> <span class="toc-text">ğŸŒ­ 4. è·¯ç”±çš„åŸºæœ¬ä½¿ç”¨</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#react-router-dom-%E7%9A%84%E7%90%86%E8%A7%A3%E5%92%8C%E4%BD%BF%E7%94%A8"><span class="toc-number">2.18.1.</span> <span class="toc-text">react-router-dom çš„ç†è§£å’Œä½¿ç”¨</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%F0%9F%8D%BF-5-%E8%B7%AF%E7%94%B1%E7%BB%84%E4%BB%B6%E5%92%8C%E4%B8%80%E8%88%AC%E7%BB%84%E4%BB%B6"><span class="toc-number">2.19.</span> <span class="toc-text">ğŸ¿ 5. è·¯ç”±ç»„ä»¶å’Œä¸€èˆ¬ç»„ä»¶</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%F0%9F%8D%9B-6-NavLink-%E6%A0%87%E7%AD%BE"><span class="toc-number">2.20.</span> <span class="toc-text">ğŸ› 6. NavLink æ ‡ç­¾</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%F0%9F%A5%A9-7-NavLink-%E5%B0%81%E8%A3%85"><span class="toc-number">2.21.</span> <span class="toc-text">ğŸ¥© 7. NavLink å°è£…</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%F0%9F%8C%AE-React-%E5%85%A5%E9%97%A8%E5%AD%A6%E4%B9%A0%EF%BC%88%E5%8D%81%E4%B8%80%EF%BC%89%E2%80%93-React-%E8%B7%AF%E7%94%B1%E4%BC%A0%E5%8F%82"><span class="toc-number">2.22.</span> <span class="toc-text">ğŸŒ® React å…¥é—¨å­¦ä¹ ï¼ˆåä¸€ï¼‰â€“ React è·¯ç”±ä¼ å‚</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%BC%95%E8%A8%80-6"><span class="toc-number">2.23.</span> <span class="toc-text">å¼•è¨€</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%F0%9F%8D%88-1-Switch-%E8%A7%A3%E5%86%B3%E7%9B%B8%E5%90%8C%E8%B7%AF%E5%BE%84%E9%97%AE%E9%A2%98"><span class="toc-number">2.24.</span> <span class="toc-text">ğŸˆ 1. Switch è§£å†³ç›¸åŒè·¯å¾„é—®é¢˜</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%F0%9F%A5%9F-2-%E8%A7%A3%E5%86%B3%E4%BA%8C%E7%BA%A7%E8%B7%AF%E7%94%B1%E6%A0%B7%E5%BC%8F%E4%B8%A2%E5%A4%B1%E7%9A%84%E9%97%AE%E9%A2%98"><span class="toc-number">2.25.</span> <span class="toc-text">ğŸ¥Ÿ 2. è§£å†³äºŒçº§è·¯ç”±æ ·å¼ä¸¢å¤±çš„é—®é¢˜</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%F0%9F%8D%91-3-%E8%B7%AF%E7%94%B1%E7%9A%84%E7%B2%BE%E5%87%86%E5%8C%B9%E9%85%8D%E5%92%8C%E6%A8%A1%E7%B3%8A%E5%8C%B9%E9%85%8D"><span class="toc-number">2.26.</span> <span class="toc-text">ğŸ‘ 3. è·¯ç”±çš„ç²¾å‡†åŒ¹é…å’Œæ¨¡ç³ŠåŒ¹é…</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%F0%9F%8D%8B-4-%E9%87%8D%E5%AE%9A%E5%90%91%E8%B7%AF%E7%94%B1"><span class="toc-number">2.27.</span> <span class="toc-text">ğŸ‹ 4. é‡å®šå‘è·¯ç”±</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%F0%9F%8D%93-5-%E5%B5%8C%E5%A5%97%E8%B7%AF%E7%94%B1"><span class="toc-number">2.28.</span> <span class="toc-text">ğŸ“ 5. åµŒå¥—è·¯ç”±</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%F0%9F%8D%9F-6-%E4%BC%A0%E9%80%92-params-%E5%8F%82%E6%95%B0"><span class="toc-number">2.29.</span> <span class="toc-text">ğŸŸ 6. ä¼ é€’ params å‚æ•°</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%F0%9F%8D%80-7-%E4%BC%A0%E9%80%92-search-%E5%8F%82%E6%95%B0"><span class="toc-number">2.30.</span> <span class="toc-text">ğŸ€ 7. ä¼ é€’ search å‚æ•°</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%F0%9F%8C%B7-8-%E4%BC%A0%E9%80%92-state-%E5%8F%82%E6%95%B0"><span class="toc-number">2.31.</span> <span class="toc-text">ğŸŒ· 8. ä¼ é€’ state å‚æ•°</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%F0%9F%8C%AE-React-%E5%85%A5%E9%97%A8%E5%AD%A6%E4%B9%A0%EF%BC%88%E5%8D%81%E4%BA%8C%EF%BC%89%E2%80%93-React-%E8%B7%AF%E7%94%B1%E8%B7%B3%E8%BD%AC"><span class="toc-number">2.32.</span> <span class="toc-text">ğŸŒ® React å…¥é—¨å­¦ä¹ ï¼ˆåäºŒï¼‰â€“ React è·¯ç”±è·³è½¬</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#1-push-%E4%B8%8E-replace-%E6%A8%A1%E5%BC%8F"><span class="toc-number">2.33.</span> <span class="toc-text">1. push ä¸ replace æ¨¡å¼</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2-%E7%BC%96%E7%A8%8B%E5%BC%8F%E8%B7%AF%E7%94%B1%E5%AF%BC%E8%88%AA"><span class="toc-number">2.34.</span> <span class="toc-text">2. ç¼–ç¨‹å¼è·¯ç”±å¯¼èˆª</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#3-withRouter"><span class="toc-number">2.35.</span> <span class="toc-text">3. withRouter</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#4-BrowserRouter-%E5%92%8C-HashRouter-%E7%9A%84%E5%8C%BA%E5%88%AB"><span class="toc-number">2.36.</span> <span class="toc-text">4. BrowserRouter å’Œ HashRouter çš„åŒºåˆ«</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%AE%83%E4%BB%AC%E7%9A%84%E5%BA%95%E5%B1%82%E5%AE%9E%E7%8E%B0%E5%8E%9F%E7%90%86%E4%B8%8D%E4%B8%80%E6%A0%B7"><span class="toc-number">2.36.0.1.</span> <span class="toc-text">å®ƒä»¬çš„åº•å±‚å®ç°åŸç†ä¸ä¸€æ ·</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%9C%B0%E5%9D%80%E6%A0%8F%E7%9A%84%E8%A1%A8%E7%8E%B0%E5%BD%A2%E5%BC%8F%E4%B8%8D%E4%B8%80%E6%A0%B7"><span class="toc-number">2.36.0.2.</span> <span class="toc-text">åœ°å€æ çš„è¡¨ç°å½¢å¼ä¸ä¸€æ ·</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%88%B7%E6%96%B0%E5%90%8E%E8%B7%AF%E7%94%B1-state-%E5%8F%82%E6%95%B0%E6%94%B9%E5%8F%98"><span class="toc-number">2.36.0.3.</span> <span class="toc-text">åˆ·æ–°åè·¯ç”± state å‚æ•°æ”¹å˜</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#React-%E5%85%A5%E9%97%A8%E5%AD%A6%E4%B9%A0%EF%BC%88%E5%8D%81%E4%B8%89%EF%BC%89%E2%80%93-antd-%E7%BB%84%E4%BB%B6%E5%BA%93%E7%9A%84%E5%9F%BA%E6%9C%AC%E4%BD%BF%E7%94%A8"><span class="toc-number">2.37.</span> <span class="toc-text">React å…¥é—¨å­¦ä¹ ï¼ˆåä¸‰ï¼‰â€“ antd ç»„ä»¶åº“çš„åŸºæœ¬ä½¿ç”¨</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%BC%95%E8%A8%80-7"><span class="toc-number">2.38.</span> <span class="toc-text">å¼•è¨€</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#1-Antd-%E7%BB%84%E4%BB%B6%E5%9F%BA%E6%9C%AC%E4%BD%BF%E7%94%A8"><span class="toc-number">2.39.</span> <span class="toc-text">1. Antd ç»„ä»¶åŸºæœ¬ä½¿ç”¨</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E7%AC%AC%E4%B8%80%E6%AD%A5"><span class="toc-number">2.39.0.1.</span> <span class="toc-text">ç¬¬ä¸€æ­¥</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2-%E8%87%AA%E5%AE%9A%E4%B9%89%E4%B8%BB%E9%A2%98%E9%A2%9C%E8%89%B2"><span class="toc-number">2.40.</span> <span class="toc-text">2. è‡ªå®šä¹‰ä¸»é¢˜é¢œè‰²</span></a></li></ol></li></ol></div></div><div class="card-widget card-recent-post"><div class="item-headline"><i class="fas fa-history"></i><span>æœ€æ–°æ–‡ç« </span></div><div class="aside-list"><div class="aside-list-item"><a class="thumbnail" href="/2023/12/03/neuralcoref-de-an-zhuang-yu-shi-yong/" title="neuralcorefçš„å®‰è£…ä¸ä½¿ç”¨"><img src="https://zyydgrbk.oss-cn-chengdu.aliyuncs.com/images/Snipaste_2023-11-10_10-23-14.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="neuralcorefçš„å®‰è£…ä¸ä½¿ç”¨"/></a><div class="content"><a class="title" href="/2023/12/03/neuralcoref-de-an-zhuang-yu-shi-yong/" title="neuralcorefçš„å®‰è£…ä¸ä½¿ç”¨">neuralcorefçš„å®‰è£…ä¸ä½¿ç”¨</a><time datetime="2023-12-03T08:01:20.000Z" title="å‘è¡¨äº 2023-12-03 16:01:20">2023-12-03</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2023/11/10/bo-ke-you-hua-er/" title="åšå®¢ä¼˜åŒ–äºŒ"><img src="https://zyydgrbk.oss-cn-chengdu.aliyuncs.com/images/Snipaste_2023-11-10_10-22-16.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="åšå®¢ä¼˜åŒ–äºŒ"/></a><div class="content"><a class="title" href="/2023/11/10/bo-ke-you-hua-er/" title="åšå®¢ä¼˜åŒ–äºŒ">åšå®¢ä¼˜åŒ–äºŒ</a><time datetime="2023-11-10T02:19:16.000Z" title="å‘è¡¨äº 2023-11-10 10:19:16">2023-11-10</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2023/11/06/tu-yu-tu-xue-xi/" title="å›¾ä¸å›¾å­¦ä¹ "><img src="https://zyydgrbk.oss-cn-chengdu.aliyuncs.com/images/fengmian4.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="å›¾ä¸å›¾å­¦ä¹ "/></a><div class="content"><a class="title" href="/2023/11/06/tu-yu-tu-xue-xi/" title="å›¾ä¸å›¾å­¦ä¹ ">å›¾ä¸å›¾å­¦ä¹ </a><time datetime="2023-11-06T14:37:54.000Z" title="å‘è¡¨äº 2023-11-06 22:37:54">2023-11-06</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2023/10/31/paddlepaddle-shang-shou/" title="PaddlePaddleä¸Šæ‰‹"><img src="https://zyydgrbk.oss-cn-chengdu.aliyuncs.com/images/Snipaste_2023-10-07_15-20-15.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="PaddlePaddleä¸Šæ‰‹"/></a><div class="content"><a class="title" href="/2023/10/31/paddlepaddle-shang-shou/" title="PaddlePaddleä¸Šæ‰‹">PaddlePaddleä¸Šæ‰‹</a><time datetime="2023-10-31T12:36:14.000Z" title="å‘è¡¨äº 2023-10-31 20:36:14">2023-10-31</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2023/10/26/tu-shen-jing-wang-luo-coding/" title="å›¾ç¥ç»ç½‘ç»œcoding"><img src="https://zyydgrbk.oss-cn-chengdu.aliyuncs.com/images/Snipaste_2023-10-07_15-20-31.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="å›¾ç¥ç»ç½‘ç»œcoding"/></a><div class="content"><a class="title" href="/2023/10/26/tu-shen-jing-wang-luo-coding/" title="å›¾ç¥ç»ç½‘ç»œcoding">å›¾ç¥ç»ç½‘ç»œcoding</a><time datetime="2023-10-26T02:31:50.000Z" title="å‘è¡¨äº 2023-10-26 10:31:50">2023-10-26</time></div></div></div></div></div></div></main><footer id="footer" style="background: transparent"><div id="footer-wrap"><div class="copyright">&copy;2023 By é‚¹é˜³</div><div class="framework-info"><span>æ¡†æ¶ </span><a target="_blank" rel="noopener" href="https://hexo.io">Hexo</a><span class="footer-separator">|</span><span>ä¸»é¢˜ </span><a target="_blank" rel="noopener" href="https://github.com/jerryc127/hexo-theme-butterfly">Butterfly</a></div><div class="footer_custom_text">Hi, this is zy's blog, welcome!</div></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="é˜…è¯»æ¨¡å¼"><i class="fas fa-book-open"></i></button><button id="darkmode" type="button" title="æµ…è‰²å’Œæ·±è‰²æ¨¡å¼è½¬æ¢"><i class="fas fa-adjust"></i></button><button id="hide-aside-btn" type="button" title="å•æ å’ŒåŒæ åˆ‡æ¢"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside_config" type="button" title="è®¾ç½®"><i class="fas fa-cog fa-spin"></i></button><button class="close" id="mobile-toc-button" type="button" title="ç›®å½•"><i class="fas fa-list-ul"></i></button><button id="go-up" type="button" title="å›åˆ°é¡¶éƒ¨"><span class="scroll-percent"></span><i class="fas fa-arrow-up"></i></button></div></div><div><script src="https://npm.elemecdn.com/vue@2.6.11"></script><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="https://cdn.jsdelivr.net/npm/@fancyapps/ui/dist/fancybox/fancybox.umd.min.js"></script><div class="js-pjax"><script>var gitcalendar = new Vue({
  el: '#gitcalendar',
  data: {
    simplemode: true, 
    user: 'YangZouy',
    fixed: 'fixed',
    px: 'px',
    x: '',
    y: '',
    span1: '',
    span2: '',
    month: ['ä¸€æœˆ', 'äºŒæœˆ', 'ä¸‰æœˆ', 'å››æœˆ', 'äº”æœˆ', 'å…­æœˆ', 'ä¸ƒæœˆ', 'å…«æœˆ', 'ä¹æœˆ', 'åæœˆ', 'åä¸€æœˆ', 'åäºŒæœˆ'],
    monthchange: [],
    oneyearbeforeday: '',
    thisday: '',
    amonthago: '',
    aweekago: '',
    //- æœ€è¿‘ä¸€å‘¨æ•°æ®
    weekdatacore: 0,
    datacore: 0,
    total: 0,
    datadate: '',
    data: [],
    positionplusdata: [],
    firstweek: [],
    lastweek: [],
    beforeweek: [],
    //- æœ€è¿‘ä¸€æœˆæ•°æ®
    thisweekdatacore: 0,
    mounthbeforeday: 0,
    mounthfirstindex: 0,
    crispedges: 'crispedges',
    thisdayindex: 0,
    amonthagoindex: 0,
    amonthagoweek: [],
    firstdate: [],
    first2date: [],
    montharrbefore: [],
    monthindex: 0,
    color: ['#f7f0f7', '#f5e1e8', '#f2c9d5', '#ebaec2', '#d689a3', '#de8ea9', '#cf5b81', '#c44771', '#bf3462', '#ab204f', '#ab0f43']
  },
  methods: {
    selectStyle(data, event) {
      document.querySelector('.angle-wrapper').style.display = 'block'
      this.span1 = data.date;
      //- this.span2 = data.count;
      this.span2 = data.intensity;
      this.x = event.clientX - 100;
      this.y = event.clientY - 60
    },
    outStyle() {
      document.querySelector('.angle-wrapper').style.display = 'none'
    },
    thiscolor(x) {
      if (x === 0) {
        let i = parseInt(x / 2);
        return this.color[0]
      } else if (x < 2) {
        return this.color[1]
      } else if (x < 20) {
        let i = parseInt(x / 2);
        return this.color[i]
      } else {
        return this.color[9]
      }
    },
  }
});
var apiurl = '' ? 'https:///api?' : 'https://githubapi.ryanchristian.dev/user/'
var githubapiurl = apiurl + gitcalendar.user;
//canvasç»˜å›¾
function responsiveChart() {
  let c = document.getElementById("gitcanvas");
  if (c) {
    let cmessage = document.getElementById("gitmessage");
    let ctx = c.getContext("2d");
    c.width = document.getElementById("gitcalendarcanvasbox").offsetWidth;
    let linemaxwitdh = 0.96 * c.width / gitcalendar.data.length;
    c.height = 9 * linemaxwitdh;
    let lineminwitdh = 0.8 * linemaxwitdh;
    let setposition = {
      x: 0.02 * c.width,
      y: 0.025 * c.width
    };
    for (let week in gitcalendar.data) {
      weekdata = gitcalendar.data[week];
      for (let day in weekdata) {
        let dataitem = {
          date: "",
          //- count: "",
          intensity: "",
          x: 0,
          y: 0
        };
        gitcalendar.positionplusdata.push(dataitem);
        //- ctx.fillStyle = gitcalendar.thiscolor(weekdata[day].count);
        ctx.fillStyle = gitcalendar.thiscolor(weekdata[day].intensity);
        setposition.y = Math.round(setposition.y * 100) / 100;
        dataitem.date = weekdata[day].date;
        //- dataitem.count = weekdata[day].count;
        dataitem.intensity = weekdata[day].intensity;
        dataitem.x = setposition.x;
        dataitem.y = setposition.y;
        ctx.fillRect(setposition.x, setposition.y, lineminwitdh, lineminwitdh);
        setposition.y = setposition.y + linemaxwitdh
      };
      setposition.y = 0.025 * c.width;
      setposition.x = setposition.x + linemaxwitdh
    };
    ctx.font = "600  Arial";
    ctx.fillStyle = '#aaa';
    ctx.fillText("æ—¥", 0, 1.9 * linemaxwitdh);
    ctx.fillText("äºŒ", 0, 3.9 * linemaxwitdh);
    ctx.fillText("å››", 0, 5.9 * linemaxwitdh);
    ctx.fillText("å…­", 0, 7.9 * linemaxwitdh);
    let monthindexlist = c.width / 24;
    for (let index in gitcalendar.monthchange) {
      ctx.fillText(gitcalendar.monthchange[index], monthindexlist, 0.7 * linemaxwitdh);
      monthindexlist = monthindexlist + c.width / 12
    };
    cmessage.onmousemove = function(event) {
      document.querySelector('.angle-wrapper').style.display = 'none'
    };
    c.onmousemove = function(event) {
      document.querySelector('.angle-wrapper').style.display = 'none'
      getMousePos(c, event);
    };

    function getMousePos(canvas, event) {
      var rect = canvas.getBoundingClientRect();
      var x = event.clientX - rect.left * (canvas.width / rect.width);
      var y = event.clientY - rect.top * (canvas.height / rect.height);
      //console.log("x:"+x+",y:"+y);
      for (let item of gitcalendar.positionplusdata) {
        let lenthx = x - item.x;
        let lenthy = y - item.y;
        //console.log(lenthx,lenthy);
        if (0 < lenthx && lenthx < lineminwitdh) {
          if (0 < lenthy && lenthy < lineminwitdh) {
            //console.log(item.date,item.count)
            document.querySelector('.angle-wrapper').style.display = 'block'
            gitcalendar.span1 = item.date;
            //- gitcalendar.span2 = item.count;
            gitcalendar.span2 = item.intensity;
            gitcalendar.x = event.clientX - 100;
            gitcalendar.y = event.clientY - 60
          }
        }
        //if(0< x - item.x <lineminwitdh&&0< y - item.y <lineminwitdh){
        //console.log(item.count,item.date);
        //}
      }
    }
  }
}
//æ•°æ®ç»Ÿè®¡ç®—æ³•
function addlastmonth() {
  if (gitcalendar.thisdayindex === 0) {
    thisweekcore(52);
    thisweekcore(51);
    thisweekcore(50);
    thisweekcore(49);
    thisweekcore(48);
  
    gitcalendar.thisweekdatacore += parseInt(gitcalendar.firstdate[6].intensity);
    gitcalendar.amonthago = gitcalendar.firstdate[6].date
  } else {
    thisweekcore(52);
    thisweekcore(51);
    thisweekcore(50);
    thisweekcore(49);
    thisweek2core();
    gitcalendar.amonthago = gitcalendar.first2date[gitcalendar.thisdayindex - 1].date
  }
};

function thisweek2core() {
  for (let i = gitcalendar.thisdayindex - 1; i < gitcalendar.first2date.length; i++) {
  
    gitcalendar.thisweekdatacore += parseInt(gitcalendar.first2date[i].intensity)
  }
};

function thisweekcore(index) {
  for (let item of gitcalendar.data[index]) {
    gitcalendar.thisweekdatacore += parseInt(item.intensity)
  }
};

function addlastweek() {
  for (let item of gitcalendar.lastweek) {
    gitcalendar.weekdatacore += parseInt(item.intensity)
  }
};

function addbeforeweek() {
  for (let i = gitcalendar.thisdayindex; i < gitcalendar.beforeweek.length; i++) {
    gitcalendar.weekdatacore += parseInt(gitcalendar.beforeweek[i].intensity)
  }
};

function addweek(data) {
  if (gitcalendar.thisdayindex === 6) {
    gitcalendar.aweekago = gitcalendar.lastweek[0].date;
    addlastweek()
  } else {
    lastweek = data.contributions[51];
    gitcalendar.aweekago = lastweek[gitcalendar.thisdayindex + 1].date;
    addlastweek();
    addbeforeweek()
  }
}

fetch(githubapiurl)
  .then(data => data.json())
  .then(data => {
    gitcalendar.data = data.contributions;
    gitcalendar.total = data.total;
    gitcalendar.first2date = gitcalendar.data[48];
    gitcalendar.firstdate = gitcalendar.data[47];
    gitcalendar.firstweek = data.contributions[0];
    gitcalendar.lastweek = data.contributions[52];
    gitcalendar.beforeweek = data.contributions[51];
    gitcalendar.thisdayindex = gitcalendar.lastweek.length - 1;
    gitcalendar.thisday = gitcalendar.lastweek[gitcalendar.thisdayindex].date;
    gitcalendar.oneyearbeforeday = gitcalendar.firstweek[0].date;
    gitcalendar.monthindex = gitcalendar.thisday.substring(5, 7) * 1;
    gitcalendar.montharrbefore = gitcalendar.month.splice(gitcalendar.monthindex, 12 - gitcalendar.monthindex);
    gitcalendar.monthchange = gitcalendar.montharrbefore.concat(gitcalendar.month);
    addweek(data);
    addlastmonth();
    responsiveChart();
  })
  .catch(function(error) {
    console.log(error);
  });

//æ‰‹æœºç‰ˆæ›´æ¢ä¸ºsvgç»˜åˆ¶
if (document.getElementById("gitcalendarcanvasbox").offsetWidth < 500) {
  gitcalendar.simplemode = false
}

//å½“æ”¹å˜çª—å£å¤§å°æ—¶é‡æ–°ç»˜åˆ¶canvas
window.onresize = function() {
  if (gitcalendar.simplemode) responsiveChart()
}

//è§£å†³æ»šåŠ¨æ»‘è½®æ—¶å‡ºç°çš„æ ‡ç­¾æ˜¾ç¤º
window.onscroll = function() {
  if (document.querySelector('.angle-wrapper')) {
    document.querySelector('.angle-wrapper').style.display = 'none'
  }
};</script></div><script async data-pjax src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script></div></body></html>